{
    "openapi": "3.1.0",
    "info": {
        "title": "GOBAI Partner API",
        "version": "1.0.0",
        "description": "GOBAI Partner API.\n\n- Sandbox + Production environments\n- Idempotency and webhooks supported\n- Use Bearer token / API key as configured"
    },
    "servers": [
        {
            "url": "http://192.168.1.105:8000",
            "description": "Sandbox"
        },
        {
            "url": "https://api.gobai.app",
            "description": "Production"
        }
    ],
    "paths": {
        "/user": {
            "get": {
                "responses": {
                    "200": {
                        "description": "`User`",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/User"
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            },
            "patch": {
                "operationId": "auth.update",
                "tags": [
                    "Auth"
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "name": {
                                        "type": "string",
                                        "maxLength": 120
                                    },
                                    "username": {
                                        "type": "string",
                                        "maxLength": 60
                                    },
                                    "email": {
                                        "type": "string",
                                        "format": "email",
                                        "maxLength": 120
                                    },
                                    "mobile": {
                                        "type": "string",
                                        "maxLength": 30
                                    },
                                    "latitude": {
                                        "type": "number",
                                        "description": "location (based on what you sent)",
                                        "minimum": -90,
                                        "maximum": 90
                                    },
                                    "longitude": {
                                        "type": "number",
                                        "minimum": -180,
                                        "maximum": 180
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "enum": [
                                                "User updated"
                                            ]
                                        },
                                        "user": {
                                            "$ref": "#/components/schemas/User"
                                        }
                                    },
                                    "required": [
                                        "message",
                                        "user"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/admin/wallet/cashin": {
            "get": {
                "operationId": "adminCashIn.index",
                "tags": [
                    "AdminCashIn"
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        },
                                        "data": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "ok",
                                        "data"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/admin/wallet/cashin/{id}/approve": {
            "post": {
                "operationId": "adminCashIn.approve",
                "tags": [
                    "AdminCashIn"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        },
                                        "request": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "ok",
                                        "request"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/admin/wallet/cashin/{id}/reject": {
            "post": {
                "operationId": "adminCashIn.reject",
                "tags": [
                    "AdminCashIn"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "reason": {
                                        "type": "string",
                                        "maxLength": 255
                                    }
                                },
                                "required": [
                                    "reason"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        },
                                        "request": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "ok",
                                        "request"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/admin/wallet/cashout": {
            "get": {
                "operationId": "adminCashOut.index",
                "tags": [
                    "AdminCashOut"
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        },
                                        "data": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "ok",
                                        "data"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/admin/wallet/cashout/{id}/approve": {
            "post": {
                "operationId": "adminCashOut.approve",
                "tags": [
                    "AdminCashOut"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        },
                                        "request": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "ok",
                                        "request"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/admin/wallet/cashout/{id}/reject": {
            "post": {
                "operationId": "adminCashOut.reject",
                "tags": [
                    "AdminCashOut"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "reason": {
                                        "type": "string",
                                        "maxLength": 255
                                    }
                                },
                                "required": [
                                    "reason"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        },
                                        "request": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "ok",
                                        "request"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/admin/catalog/categories": {
            "post": {
                "operationId": "adminCatalogCategory.store",
                "tags": [
                    "AdminCatalogCategory"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/ProductCategoryStoreRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "`ProductCategoryResource`",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/components/schemas/ProductCategoryResource"
                                        }
                                    },
                                    "required": [
                                        "data"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/admin/catalog/categories/{category}": {
            "put": {
                "operationId": "adminCatalogCategory.update",
                "tags": [
                    "AdminCatalogCategory"
                ],
                "parameters": [
                    {
                        "name": "category",
                        "in": "path",
                        "required": true,
                        "description": "The category ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/ProductCategoryUpdateRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "`ProductCategoryResource`",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/components/schemas/ProductCategoryResource"
                                        }
                                    },
                                    "required": [
                                        "data"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            },
            "delete": {
                "operationId": "adminCatalogCategory.destroy",
                "tags": [
                    "AdminCatalogCategory"
                ],
                "parameters": [
                    {
                        "name": "category",
                        "in": "path",
                        "required": true,
                        "description": "The category ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        }
                                    },
                                    "required": [
                                        "ok"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/admin/catalog/collections": {
            "post": {
                "operationId": "adminCatalogCollection.store",
                "tags": [
                    "AdminCatalogCollection"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/ProductCollectionStoreRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "`ProductCollectionResource`",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/components/schemas/ProductCollectionResource"
                                        }
                                    },
                                    "required": [
                                        "data"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/admin/catalog/collections/{collection}": {
            "put": {
                "operationId": "adminCatalogCollection.update",
                "tags": [
                    "AdminCatalogCollection"
                ],
                "parameters": [
                    {
                        "name": "collection",
                        "in": "path",
                        "required": true,
                        "description": "The collection ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/ProductCollectionUpdateRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "`ProductCollectionResource`",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/components/schemas/ProductCollectionResource"
                                        }
                                    },
                                    "required": [
                                        "data"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            },
            "delete": {
                "operationId": "adminCatalogCollection.destroy",
                "tags": [
                    "AdminCatalogCollection"
                ],
                "parameters": [
                    {
                        "name": "collection",
                        "in": "path",
                        "required": true,
                        "description": "The collection ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        }
                                    },
                                    "required": [
                                        "ok"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/admin/catalog/collections/{collection}/products": {
            "post": {
                "operationId": "adminCatalogCollection.syncProducts",
                "tags": [
                    "AdminCatalogCollection"
                ],
                "parameters": [
                    {
                        "name": "collection",
                        "in": "path",
                        "required": true,
                        "description": "The collection ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/ProductCollectionSyncRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "`ProductCollectionResource`",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/components/schemas/ProductCollectionResource"
                                        }
                                    },
                                    "required": [
                                        "data"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/admin/driver-documents/{document}/approve": {
            "post": {
                "operationId": "admin.driver_documents.approve",
                "tags": [
                    "AdminDriverDocument"
                ],
                "parameters": [
                    {
                        "name": "document",
                        "in": "path",
                        "required": true,
                        "description": "The document ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "enum": [
                                                "Document approved."
                                            ]
                                        },
                                        "data": {
                                            "anyOf": [
                                                {
                                                    "$ref": "#/components/schemas/DriverDocument"
                                                },
                                                {
                                                    "type": "null"
                                                }
                                            ]
                                        }
                                    },
                                    "required": [
                                        "message",
                                        "data"
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/admin/driver-documents/{document}/reject": {
            "post": {
                "operationId": "admin.driver_documents.reject",
                "tags": [
                    "AdminDriverDocument"
                ],
                "parameters": [
                    {
                        "name": "document",
                        "in": "path",
                        "required": true,
                        "description": "The document ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "reason": {
                                        "type": "string",
                                        "maxLength": 255
                                    }
                                },
                                "required": [
                                    "reason"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "enum": [
                                                "Document rejected."
                                            ]
                                        },
                                        "data": {
                                            "anyOf": [
                                                {
                                                    "$ref": "#/components/schemas/DriverDocument"
                                                },
                                                {
                                                    "type": "null"
                                                }
                                            ]
                                        }
                                    },
                                    "required": [
                                        "message",
                                        "data"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/admin/driver-applications": {
            "get": {
                "operationId": "admin.driver_applications.index",
                "summary": "GET /admin/driver-applications?status=pending|approved|rejected|suspended",
                "tags": [
                    "AdminDriverManagement"
                ],
                "parameters": [
                    {
                        "name": "status",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "default": "pending"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/components/schemas/LengthAwarePaginator"
                                        }
                                    },
                                    "required": [
                                        "data"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/admin/driver-applications/{user}": {
            "get": {
                "operationId": "admin.driver_applications.show",
                "summary": "GET /admin/driver-applications/{user}",
                "tags": [
                    "AdminDriverManagement"
                ],
                "parameters": [
                    {
                        "name": "user",
                        "in": "path",
                        "required": true,
                        "description": "The user ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "anyOf": [
                                                {
                                                    "$ref": "#/components/schemas/DriverProfile"
                                                },
                                                {
                                                    "type": "null"
                                                }
                                            ]
                                        }
                                    },
                                    "required": [
                                        "data"
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/admin/driver-applications/{user}/approve": {
            "post": {
                "operationId": "admin.driver_applications.approve",
                "summary": "POST /admin/driver-applications/{user}/approve\n- Requires required docs approved\n- Sets driver_profiles.status=approved\n- Sets users.role_id = driver role id",
                "tags": [
                    "AdminDriverManagement"
                ],
                "parameters": [
                    {
                        "name": "user",
                        "in": "path",
                        "required": true,
                        "description": "The user ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "enum": [
                                                "Driver approved."
                                            ]
                                        },
                                        "data": {
                                            "anyOf": [
                                                {
                                                    "$ref": "#/components/schemas/DriverProfile"
                                                },
                                                {
                                                    "type": "null"
                                                }
                                            ]
                                        }
                                    },
                                    "required": [
                                        "message",
                                        "data"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "enum": [
                                                "Cannot approve driver. Missing or unapproved documents."
                                            ]
                                        },
                                        "missing": {
                                            "type": "array",
                                            "prefixItems": [
                                                {
                                                    "type": "object",
                                                    "properties": {
                                                        "type": {
                                                            "type": "string"
                                                        },
                                                        "problem": {
                                                            "type": "string",
                                                            "enum": [
                                                                "missing"
                                                            ]
                                                        }
                                                    },
                                                    "required": [
                                                        "type",
                                                        "problem"
                                                    ]
                                                },
                                                {
                                                    "type": "object",
                                                    "properties": {
                                                        "type": {
                                                            "type": "string"
                                                        },
                                                        "problem": {
                                                            "type": "string",
                                                            "enum": [
                                                                "not_approved"
                                                            ]
                                                        }
                                                    },
                                                    "required": [
                                                        "type",
                                                        "problem"
                                                    ]
                                                }
                                            ],
                                            "minItems": 2,
                                            "maxItems": 2,
                                            "additionalItems": false
                                        }
                                    },
                                    "required": [
                                        "message",
                                        "missing"
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/admin/driver-applications/{user}/reject": {
            "post": {
                "operationId": "admin.driver_applications.reject",
                "summary": "POST /admin/driver-applications/{user}/reject",
                "tags": [
                    "AdminDriverManagement"
                ],
                "parameters": [
                    {
                        "name": "user",
                        "in": "path",
                        "required": true,
                        "description": "The user ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "reason": {
                                        "type": "string",
                                        "maxLength": 255
                                    }
                                },
                                "required": [
                                    "reason"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "enum": [
                                                "Driver rejected."
                                            ]
                                        },
                                        "data": {
                                            "anyOf": [
                                                {
                                                    "$ref": "#/components/schemas/DriverProfile"
                                                },
                                                {
                                                    "type": "null"
                                                }
                                            ]
                                        }
                                    },
                                    "required": [
                                        "message",
                                        "data"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/admin/drivers/{user}/assign-vehicle": {
            "post": {
                "operationId": "admin.drivers.assign_vehicle",
                "summary": "POST /admin/drivers/{user}/assign-vehicle\nBody: { \"vehicle_id\": 123 }\n- Driver must be approved\n- Updates vehicles.driver_id\n- (Optional) clears previous vehicle(s) attached to this driver",
                "tags": [
                    "AdminDriverManagement"
                ],
                "parameters": [
                    {
                        "name": "user",
                        "in": "path",
                        "required": true,
                        "description": "The user ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "vehicle_id": {
                                        "type": "integer"
                                    }
                                },
                                "required": [
                                    "vehicle_id"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "enum": [
                                                "Vehicle assigned."
                                            ]
                                        },
                                        "data": {
                                            "anyOf": [
                                                {
                                                    "$ref": "#/components/schemas/DriverProfile"
                                                },
                                                {
                                                    "type": "null"
                                                }
                                            ]
                                        }
                                    },
                                    "required": [
                                        "message",
                                        "data"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/admin/drivers": {
            "get": {
                "operationId": "adminDriverWallet.drivers",
                "tags": [
                    "AdminDriverWallet"
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/components/schemas/LengthAwarePaginator"
                                        }
                                    },
                                    "required": [
                                        "data"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/admin/drivers/{driver}/wallet": {
            "get": {
                "operationId": "adminDriverWallet.show",
                "tags": [
                    "AdminDriverWallet"
                ],
                "parameters": [
                    {
                        "name": "driver",
                        "in": "path",
                        "required": true,
                        "description": "The driver ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "driver": {
                                            "type": "object",
                                            "properties": {
                                                "id": {
                                                    "type": "integer"
                                                },
                                                "name": {
                                                    "type": "string"
                                                },
                                                "email": {
                                                    "type": "string"
                                                },
                                                "status": {
                                                    "type": "string"
                                                }
                                            },
                                            "required": [
                                                "id",
                                                "name",
                                                "email",
                                                "status"
                                            ]
                                        },
                                        "wallet": {
                                            "type": "object",
                                            "properties": {
                                                "balance_points": {
                                                    "type": "integer"
                                                },
                                                "status": {
                                                    "type": "string"
                                                }
                                            },
                                            "required": [
                                                "balance_points",
                                                "status"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "driver",
                                        "wallet"
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/admin/drivers/{driver}/wallet/credit": {
            "post": {
                "operationId": "adminDriverWallet.credit",
                "tags": [
                    "AdminDriverWallet"
                ],
                "parameters": [
                    {
                        "name": "driver",
                        "in": "path",
                        "required": true,
                        "description": "The driver ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "points": {
                                        "type": "integer",
                                        "minimum": 1,
                                        "maximum": 1000000
                                    },
                                    "note": {
                                        "type": [
                                            "string",
                                            "null"
                                        ],
                                        "maxLength": 255
                                    }
                                },
                                "required": [
                                    "points"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        },
                                        "balance_points": {
                                            "type": "integer"
                                        },
                                        "tx": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "ok",
                                        "balance_points",
                                        "tx"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/admin/drivers/{driver}/wallet/ledger": {
            "get": {
                "operationId": "adminDriverWallet.ledger",
                "tags": [
                    "AdminDriverWallet"
                ],
                "parameters": [
                    {
                        "name": "driver",
                        "in": "path",
                        "required": true,
                        "description": "The driver ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "balance_points": {
                                            "type": "integer"
                                        },
                                        "transactions": {
                                            "$ref": "#/components/schemas/LengthAwarePaginator"
                                        }
                                    },
                                    "required": [
                                        "balance_points",
                                        "transactions"
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/admin/manual-promotions": {
            "get": {
                "operationId": "adminManualPromotion.index",
                "tags": [
                    "AdminManualPromotion"
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            },
            "post": {
                "operationId": "adminManualPromotion.store",
                "tags": [
                    "AdminManualPromotion"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/ManualPromotionStoreRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/admin/manual-promotions/{manualPromotion}": {
            "delete": {
                "operationId": "adminManualPromotion.destroy",
                "tags": [
                    "AdminManualPromotion"
                ],
                "parameters": [
                    {
                        "name": "manualPromotion",
                        "in": "path",
                        "required": true,
                        "description": "The manual promotion ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "204": {
                        "description": "No content",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "type": "string"
                                    },
                                    "minItems": 0,
                                    "maxItems": 0,
                                    "additionalItems": false
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/admin/manual-promotions/{manualPromotion}/disable": {
            "post": {
                "operationId": "adminManualPromotion.disable",
                "tags": [
                    "AdminManualPromotion"
                ],
                "parameters": [
                    {
                        "name": "manualPromotion",
                        "in": "path",
                        "required": true,
                        "description": "The manual promotion ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/admin/merchants/pending": {
            "get": {
                "operationId": "admin.merchants.pending",
                "tags": [
                    "AdminMerchantManagement"
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/components/schemas/LengthAwarePaginator"
                                        }
                                    },
                                    "required": [
                                        "data"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/admin/merchants/{user}": {
            "get": {
                "operationId": "admin.merchants.show",
                "tags": [
                    "AdminMerchantManagement"
                ],
                "parameters": [
                    {
                        "name": "user",
                        "in": "path",
                        "required": true,
                        "description": "The user ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "profile": {
                                                    "anyOf": [
                                                        {
                                                            "$ref": "#/components/schemas/MerchantProfile"
                                                        },
                                                        {
                                                            "type": "null"
                                                        }
                                                    ]
                                                },
                                                "stores": {
                                                    "type": "array",
                                                    "items": {
                                                        "$ref": "#/components/schemas/Store"
                                                    }
                                                }
                                            },
                                            "required": [
                                                "profile",
                                                "stores"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "data"
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/admin/merchants/{user}/approve": {
            "post": {
                "operationId": "admin.merchants.approve",
                "summary": "Approve merchant + approve their store.\nRequires DTI doc approved",
                "tags": [
                    "AdminMerchantManagement"
                ],
                "parameters": [
                    {
                        "name": "user",
                        "in": "path",
                        "required": true,
                        "description": "The user ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "store_id": {
                                        "type": [
                                            "integer",
                                            "null"
                                        ]
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "enum": [
                                                "Merchant approved."
                                            ]
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "profile": {
                                                    "anyOf": [
                                                        {
                                                            "$ref": "#/components/schemas/MerchantProfile"
                                                        },
                                                        {
                                                            "type": "null"
                                                        }
                                                    ]
                                                },
                                                "store": {
                                                    "type": "string"
                                                }
                                            },
                                            "required": [
                                                "profile",
                                                "store"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "message",
                                        "data"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/admin/merchants/{user}/reject": {
            "post": {
                "operationId": "admin.merchants.reject",
                "tags": [
                    "AdminMerchantManagement"
                ],
                "parameters": [
                    {
                        "name": "user",
                        "in": "path",
                        "required": true,
                        "description": "The user ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "reason": {
                                        "type": "string",
                                        "maxLength": 255
                                    }
                                },
                                "required": [
                                    "reason"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "enum": [
                                                "Merchant rejected."
                                            ]
                                        },
                                        "data": {
                                            "anyOf": [
                                                {
                                                    "$ref": "#/components/schemas/MerchantProfile"
                                                },
                                                {
                                                    "type": "null"
                                                }
                                            ]
                                        }
                                    },
                                    "required": [
                                        "message",
                                        "data"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/admin/merchant-documents/{document}/approve": {
            "post": {
                "operationId": "admin.merchant_documents.approve",
                "tags": [
                    "AdminMerchantManagement"
                ],
                "parameters": [
                    {
                        "name": "document",
                        "in": "path",
                        "required": true,
                        "description": "The document ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "enum": [
                                                "Document approved."
                                            ]
                                        },
                                        "data": {
                                            "anyOf": [
                                                {
                                                    "$ref": "#/components/schemas/MerchantDocument"
                                                },
                                                {
                                                    "type": "null"
                                                }
                                            ]
                                        }
                                    },
                                    "required": [
                                        "message",
                                        "data"
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/admin/merchant-documents/{document}/reject": {
            "post": {
                "operationId": "admin.merchant_documents.reject",
                "tags": [
                    "AdminMerchantManagement"
                ],
                "parameters": [
                    {
                        "name": "document",
                        "in": "path",
                        "required": true,
                        "description": "The document ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "reason": {
                                        "type": "string",
                                        "maxLength": 255
                                    }
                                },
                                "required": [
                                    "reason"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "enum": [
                                                "Document rejected."
                                            ]
                                        },
                                        "data": {
                                            "anyOf": [
                                                {
                                                    "$ref": "#/components/schemas/MerchantDocument"
                                                },
                                                {
                                                    "type": "null"
                                                }
                                            ]
                                        }
                                    },
                                    "required": [
                                        "message",
                                        "data"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/admin/orders/search": {
            "get": {
                "operationId": "adminOrders.search",
                "tags": [
                    "AdminOrders"
                ],
                "parameters": [
                    {
                        "name": "order_id",
                        "in": "query",
                        "schema": {
                            "type": [
                                "integer",
                                "null"
                            ],
                            "minimum": 1
                        }
                    },
                    {
                        "name": "customer_phone",
                        "in": "query",
                        "schema": {
                            "type": [
                                "string",
                                "null"
                            ],
                            "minLength": 3,
                            "maxLength": 32
                        }
                    },
                    {
                        "name": "customer_email",
                        "in": "query",
                        "schema": {
                            "type": [
                                "string",
                                "null"
                            ],
                            "format": "email",
                            "maxLength": 120
                        }
                    },
                    {
                        "name": "driver_id",
                        "in": "query",
                        "schema": {
                            "type": [
                                "integer",
                                "null"
                            ],
                            "minimum": 1
                        }
                    },
                    {
                        "name": "store_id",
                        "in": "query",
                        "schema": {
                            "type": [
                                "integer",
                                "null"
                            ],
                            "minimum": 1
                        }
                    },
                    {
                        "name": "status",
                        "in": "query",
                        "schema": {
                            "type": [
                                "string",
                                "null"
                            ],
                            "enum": [
                                "pending",
                                "pending_payment",
                                "accepted",
                                "arrived",
                                "picked_up",
                                "in_transit",
                                "delivered",
                                "completed",
                                "cancelled"
                            ]
                        }
                    },
                    {
                        "name": "per_page",
                        "in": "query",
                        "schema": {
                            "type": [
                                "integer",
                                "null"
                            ],
                            "minimum": 1,
                            "maximum": 100
                        }
                    },
                    {
                        "name": "page",
                        "in": "query",
                        "schema": {
                            "type": [
                                "integer",
                                "null"
                            ],
                            "minimum": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Paginated set of `AdminOrderResource`",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/AdminOrderResource"
                                            }
                                        },
                                        "links": {
                                            "type": "object",
                                            "properties": {
                                                "first": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "last": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "prev": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "next": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "first",
                                                "last",
                                                "prev",
                                                "next"
                                            ]
                                        },
                                        "meta": {
                                            "type": "object",
                                            "properties": {
                                                "current_page": {
                                                    "type": "integer",
                                                    "minimum": 1
                                                },
                                                "from": {
                                                    "type": [
                                                        "integer",
                                                        "null"
                                                    ],
                                                    "minimum": 1
                                                },
                                                "last_page": {
                                                    "type": "integer",
                                                    "minimum": 1
                                                },
                                                "links": {
                                                    "type": "array",
                                                    "description": "Generated paginator links.",
                                                    "items": {
                                                        "type": "object",
                                                        "properties": {
                                                            "url": {
                                                                "type": [
                                                                    "string",
                                                                    "null"
                                                                ]
                                                            },
                                                            "label": {
                                                                "type": "string"
                                                            },
                                                            "active": {
                                                                "type": "boolean"
                                                            }
                                                        },
                                                        "required": [
                                                            "url",
                                                            "label",
                                                            "active"
                                                        ]
                                                    }
                                                },
                                                "path": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ],
                                                    "description": "Base path for paginator generated URLs."
                                                },
                                                "per_page": {
                                                    "type": "integer",
                                                    "description": "Number of items shown per page.",
                                                    "minimum": 0
                                                },
                                                "to": {
                                                    "type": [
                                                        "integer",
                                                        "null"
                                                    ],
                                                    "description": "Number of the last item in the slice.",
                                                    "minimum": 1
                                                },
                                                "total": {
                                                    "type": "integer",
                                                    "description": "Total number of items being paginated.",
                                                    "minimum": 0
                                                }
                                            },
                                            "required": [
                                                "current_page",
                                                "from",
                                                "last_page",
                                                "links",
                                                "path",
                                                "per_page",
                                                "to",
                                                "total"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "data",
                                        "links",
                                        "meta"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/admin/orders/{order}/timeline": {
            "get": {
                "operationId": "adminOrders.timeline",
                "tags": [
                    "AdminOrders"
                ],
                "parameters": [
                    {
                        "name": "order",
                        "in": "path",
                        "required": true,
                        "description": "The order ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "`OrderTimelineResource`",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/components/schemas/OrderTimelineResource"
                                        }
                                    },
                                    "required": [
                                        "data"
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/admin/orders/{order}/force-cancel": {
            "post": {
                "operationId": "adminOrders.forceCancel",
                "tags": [
                    "AdminOrders"
                ],
                "parameters": [
                    {
                        "name": "order",
                        "in": "path",
                        "required": true,
                        "description": "The order ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/AdminForceCancelOrderRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "`AdminOrderResource`",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/components/schemas/AdminOrderResource"
                                        }
                                    },
                                    "required": [
                                        "data"
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/admin/orders/{order}/reassign-driver": {
            "post": {
                "operationId": "adminOrders.reassignDriver",
                "tags": [
                    "AdminOrders"
                ],
                "parameters": [
                    {
                        "name": "order",
                        "in": "path",
                        "required": true,
                        "description": "The order ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/AdminReassignDriverRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "`AdminOrderResource`",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/components/schemas/AdminOrderResource"
                                        }
                                    },
                                    "required": [
                                        "data"
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/admin/orders/{order}/unassign-driver": {
            "post": {
                "operationId": "adminOrders.unassignDriver",
                "tags": [
                    "AdminOrders"
                ],
                "parameters": [
                    {
                        "name": "order",
                        "in": "path",
                        "required": true,
                        "description": "The order ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/AdminUnassignDriverRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "`AdminOrderResource`",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/components/schemas/AdminOrderResource"
                                        }
                                    },
                                    "required": [
                                        "data"
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/admin/partner-applications": {
            "get": {
                "operationId": "adminPartnerApplications.index",
                "tags": [
                    "AdminPartnerApplications"
                ],
                "parameters": [
                    {
                        "name": "status",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "maxLength": 40
                        }
                    },
                    {
                        "name": "limit",
                        "in": "query",
                        "schema": {
                            "type": "integer",
                            "minimum": 1,
                            "maximum": 200
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "type": "string"
                                            }
                                        },
                                        "meta": {
                                            "type": "object",
                                            "properties": {
                                                "current_page": {
                                                    "type": "integer"
                                                },
                                                "per_page": {
                                                    "type": "integer"
                                                },
                                                "total": {
                                                    "type": "integer"
                                                },
                                                "last_page": {
                                                    "type": "integer"
                                                }
                                            },
                                            "required": [
                                                "current_page",
                                                "per_page",
                                                "total",
                                                "last_page"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "data",
                                        "meta"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/admin/partner-applications/{partner}/approve": {
            "post": {
                "operationId": "adminPartnerApplications.approve",
                "tags": [
                    "AdminPartnerApplications"
                ],
                "parameters": [
                    {
                        "name": "partner",
                        "in": "path",
                        "required": true,
                        "description": "The partner ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "anyOf": [
                                        {
                                            "type": "object",
                                            "properties": {
                                                "ok": {
                                                    "type": "boolean"
                                                },
                                                "partner": {
                                                    "type": "string"
                                                }
                                            },
                                            "required": [
                                                "ok",
                                                "partner"
                                            ]
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "ok": {
                                                    "type": "boolean"
                                                },
                                                "partner": {
                                                    "$ref": "#/components/schemas/PartnerProfile"
                                                }
                                            },
                                            "required": [
                                                "ok",
                                                "partner"
                                            ]
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/admin/partner-applications/{partner}/reject": {
            "post": {
                "operationId": "adminPartnerApplications.reject",
                "tags": [
                    "AdminPartnerApplications"
                ],
                "parameters": [
                    {
                        "name": "partner",
                        "in": "path",
                        "required": true,
                        "description": "The partner ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "reason": {
                                        "type": [
                                            "string",
                                            "null"
                                        ],
                                        "maxLength": 255
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        },
                                        "partner": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "ok",
                                        "partner"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/admin/partners/{partner}/summary": {
            "get": {
                "operationId": "adminPartnerDetail.summary",
                "summary": "GET /v1/admin/partners/{partner}/summary\nKPI snapshot for admin view",
                "tags": [
                    "AdminPartnerDetail"
                ],
                "parameters": [
                    {
                        "name": "partner",
                        "in": "path",
                        "required": true,
                        "description": "The partner ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "partner_user_id": {
                                                    "type": "integer"
                                                },
                                                "today": {
                                                    "type": "object",
                                                    "properties": {
                                                        "completed": {
                                                            "type": "integer"
                                                        },
                                                        "earnings_points": {
                                                            "type": "integer"
                                                        }
                                                    },
                                                    "required": [
                                                        "completed",
                                                        "earnings_points"
                                                    ]
                                                },
                                                "month": {
                                                    "type": "object",
                                                    "properties": {
                                                        "completed": {
                                                            "type": "integer"
                                                        },
                                                        "current_partner_pct": {
                                                            "type": "integer"
                                                        },
                                                        "current_system_pct": {
                                                            "type": "integer"
                                                        },
                                                        "next_order_partner_pct": {
                                                            "type": "integer"
                                                        },
                                                        "next_order_system_pct": {
                                                            "type": "integer"
                                                        },
                                                        "tier_label": {
                                                            "type": "string"
                                                        }
                                                    },
                                                    "required": [
                                                        "completed",
                                                        "current_partner_pct",
                                                        "current_system_pct",
                                                        "next_order_partner_pct",
                                                        "next_order_system_pct",
                                                        "tier_label"
                                                    ]
                                                },
                                                "tiers": {
                                                    "type": "string"
                                                }
                                            },
                                            "required": [
                                                "partner_user_id",
                                                "today",
                                                "month",
                                                "tiers"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "data"
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/admin/partners/{partner}/wallet": {
            "get": {
                "operationId": "adminPartnerDetail.wallet",
                "summary": "GET /v1/admin/partners/{partner}/wallet",
                "tags": [
                    "AdminPartnerDetail"
                ],
                "parameters": [
                    {
                        "name": "partner",
                        "in": "path",
                        "required": true,
                        "description": "The partner ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "user_id": {
                                                    "type": "integer"
                                                },
                                                "balance_points": {
                                                    "type": "integer"
                                                },
                                                "status": {
                                                    "type": "string"
                                                },
                                                "updated_at": {
                                                    "type": "string"
                                                }
                                            },
                                            "required": [
                                                "user_id",
                                                "balance_points",
                                                "status",
                                                "updated_at"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "data"
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/admin/partners/{partner}/wallet/transactions": {
            "get": {
                "operationId": "adminPartnerDetail.walletTransactions",
                "summary": "GET /v1/admin/partners/{partner}/wallet/transactions",
                "tags": [
                    "AdminPartnerDetail"
                ],
                "parameters": [
                    {
                        "name": "partner",
                        "in": "path",
                        "required": true,
                        "description": "The partner ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "type": "string"
                                            }
                                        },
                                        "meta": {
                                            "type": "object",
                                            "properties": {
                                                "page": {
                                                    "type": "integer"
                                                },
                                                "current_page": {
                                                    "type": "integer"
                                                },
                                                "per_page": {
                                                    "type": "integer"
                                                },
                                                "total": {
                                                    "type": "integer"
                                                },
                                                "last_page": {
                                                    "type": "integer"
                                                }
                                            },
                                            "required": [
                                                "page",
                                                "current_page",
                                                "per_page",
                                                "total",
                                                "last_page"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "data",
                                        "meta"
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/admin/partners/{partner}/drivers": {
            "get": {
                "operationId": "adminPartnerDetail.drivers",
                "summary": "GET /v1/admin/partners/{partner}/drivers",
                "tags": [
                    "AdminPartnerDetail"
                ],
                "parameters": [
                    {
                        "name": "partner",
                        "in": "path",
                        "required": true,
                        "description": "The partner ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/User"
                                            }
                                        }
                                    },
                                    "required": [
                                        "data"
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/admin/partners/{partner}/stores": {
            "get": {
                "operationId": "adminPartnerDetail.stores",
                "summary": "GET /v1/admin/partners/{partner}/stores",
                "tags": [
                    "AdminPartnerDetail"
                ],
                "parameters": [
                    {
                        "name": "partner",
                        "in": "path",
                        "required": true,
                        "description": "The partner ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/Store"
                                            }
                                        }
                                    },
                                    "required": [
                                        "data"
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/admin/partners/{user}/promote": {
            "post": {
                "operationId": "adminPartnerManagement.promote",
                "summary": "Promote a user to partner_ops\nPOST /v1/admin/partners/{user}/promote",
                "tags": [
                    "AdminPartnerManagement"
                ],
                "parameters": [
                    {
                        "name": "user",
                        "in": "path",
                        "required": true,
                        "description": "The user ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        },
                                        "partner_user_id": {
                                            "type": "integer"
                                        }
                                    },
                                    "required": [
                                        "ok",
                                        "partner_user_id"
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/admin/partners/{partner}/assign-store": {
            "post": {
                "operationId": "adminPartnerManagement.assignStoreByRequest",
                "summary": "Test-friendly endpoint (alias used by routes):\nPOST /v1/admin/partners/{partner}/assign-store {store_id}",
                "tags": [
                    "AdminPartnerManagement"
                ],
                "parameters": [
                    {
                        "name": "partner",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        },
                                        "store_id": {
                                            "type": "integer"
                                        },
                                        "partner_user_id": {
                                            "type": "integer"
                                        }
                                    },
                                    "required": [
                                        "ok",
                                        "store_id",
                                        "partner_user_id"
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/admin/partners/{partner}/assign-driver": {
            "post": {
                "operationId": "adminPartnerManagement.assignDriverByRequest",
                "description": "Accepts:\n- driver_user_id (preferred, used by feature tests)\n- driver_id (legacy alias)",
                "summary": "Test-friendly endpoint (alias used by routes):\nPOST /v1/admin/partners/{partner}/assign-driver {driver_user_id}",
                "tags": [
                    "AdminPartnerManagement"
                ],
                "parameters": [
                    {
                        "name": "partner",
                        "in": "path",
                        "required": true,
                        "description": "The partner ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "driver_user_id": {
                                        "type": "integer"
                                    },
                                    "driver_id": {
                                        "type": "integer"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        },
                                        "driver_id": {
                                            "type": "integer"
                                        },
                                        "partner_user_id": {
                                            "type": "integer"
                                        }
                                    },
                                    "required": [
                                        "ok",
                                        "driver_id",
                                        "partner_user_id"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/admin/partners/{partner}/drivers/{driver}/assign": {
            "post": {
                "operationId": "adminPartnerManagement.assignDriver",
                "summary": "Assign a driver to a partner owner.\nPOST /v1/admin/partners/{partner}/drivers/{driver}/assign",
                "tags": [
                    "AdminPartnerManagement"
                ],
                "parameters": [
                    {
                        "name": "partner",
                        "in": "path",
                        "required": true,
                        "description": "The partner ID",
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "driver",
                        "in": "path",
                        "required": true,
                        "description": "The driver ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        },
                                        "driver_id": {
                                            "type": "integer"
                                        },
                                        "partner_user_id": {
                                            "type": "integer"
                                        }
                                    },
                                    "required": [
                                        "ok",
                                        "driver_id",
                                        "partner_user_id"
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/admin/partners/drivers/{driver}/unassign": {
            "post": {
                "operationId": "adminPartnerManagement.unassignDriver",
                "summary": "Unassign a driver from any partner.\nPOST /v1/admin/partners/drivers/{driver}/unassign",
                "tags": [
                    "AdminPartnerManagement"
                ],
                "parameters": [
                    {
                        "name": "driver",
                        "in": "path",
                        "required": true,
                        "description": "The driver ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        },
                                        "driver_id": {
                                            "type": "integer"
                                        },
                                        "partner_user_id": {
                                            "type": "null"
                                        }
                                    },
                                    "required": [
                                        "ok",
                                        "driver_id",
                                        "partner_user_id"
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/admin/partners/{partner}/stores/{store}/assign": {
            "post": {
                "operationId": "adminPartnerManagement.assignStore",
                "description": "POST /v1/admin/partners/{partner}/stores/{store}/assign",
                "summary": "Assign a store to a partner owner.\nThis makes NEW merchant-created orders auto-tag the partner (via store.partner_user_id)\nso partner dispatch & commission work end-to-end",
                "tags": [
                    "AdminPartnerManagement"
                ],
                "parameters": [
                    {
                        "name": "partner",
                        "in": "path",
                        "required": true,
                        "description": "The partner ID",
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "store",
                        "in": "path",
                        "required": true,
                        "description": "The store ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        },
                                        "store_id": {
                                            "type": "integer"
                                        },
                                        "partner_user_id": {
                                            "type": "integer"
                                        }
                                    },
                                    "required": [
                                        "ok",
                                        "store_id",
                                        "partner_user_id"
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/admin/partners/stores/{store}/unassign": {
            "post": {
                "operationId": "adminPartnerManagement.unassignStore",
                "summary": "Unassign a store from any partner.\nPOST /v1/admin/partners/stores/{store}/unassign",
                "tags": [
                    "AdminPartnerManagement"
                ],
                "parameters": [
                    {
                        "name": "store",
                        "in": "path",
                        "required": true,
                        "description": "The store ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        },
                                        "store_id": {
                                            "type": "integer"
                                        },
                                        "partner_user_id": {
                                            "type": "null"
                                        }
                                    },
                                    "required": [
                                        "ok",
                                        "store_id",
                                        "partner_user_id"
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/admin/orders/{order}/payment/verify": {
            "post": {
                "operationId": "adminPayment.verify",
                "tags": [
                    "AdminPayment"
                ],
                "parameters": [
                    {
                        "name": "order",
                        "in": "path",
                        "required": true,
                        "description": "The order ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        },
                                        "order": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "ok",
                                        "order"
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/admin/orders/{order}/payment/reject": {
            "post": {
                "operationId": "adminPayment.reject",
                "tags": [
                    "AdminPayment"
                ],
                "parameters": [
                    {
                        "name": "order",
                        "in": "path",
                        "required": true,
                        "description": "The order ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "reason": {
                                        "type": "string",
                                        "maxLength": 255
                                    }
                                },
                                "required": [
                                    "reason"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        },
                                        "order": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "ok",
                                        "order"
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/admin/promo-brain/run": {
            "post": {
                "operationId": "adminPromoBrain.run",
                "summary": "Admin-only: trigger a Promo Brain run from the web console",
                "tags": [
                    "AdminPromoBrain"
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "slot": {
                                        "type": [
                                            "string",
                                            "null"
                                        ],
                                        "enum": [
                                            "am",
                                            "pm"
                                        ]
                                    },
                                    "dry_run": {
                                        "type": [
                                            "boolean",
                                            "null"
                                        ]
                                    },
                                    "force": {
                                        "type": [
                                            "boolean",
                                            "null"
                                        ]
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {}
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/admin/promo-brain/runs": {
            "get": {
                "operationId": "adminPromoBrain.runs",
                "summary": "Admin-only: list recent runs for dashboards",
                "tags": [
                    "AdminPromoBrain"
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/PromoBrainRun"
                                            }
                                        }
                                    },
                                    "required": [
                                        "data"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/admin/promo-brain/runs/{run}": {
            "get": {
                "operationId": "adminPromoBrain.show",
                "summary": "Admin-only: view a single run snapshot + publish report",
                "tags": [
                    "AdminPromoBrain"
                ],
                "parameters": [
                    {
                        "name": "run",
                        "in": "path",
                        "required": true,
                        "description": "The run ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/components/schemas/PromoBrainRun"
                                        }
                                    },
                                    "required": [
                                        "data"
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/admin/promo-brain/diagnose": {
            "get": {
                "operationId": "adminPromoBrain.diagnose",
                "description": "This does NOT consume promos. It calls PromoService::preview with debug enabled,\nand also returns the most recent Promo Brain assignment(s) for that user.",
                "summary": "Admin-only: explain why a specific customer is (or isn't) getting a promo",
                "tags": [
                    "AdminPromoBrain"
                ],
                "parameters": [
                    {
                        "name": "user_id",
                        "in": "query",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "flow_type",
                        "in": "query",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "transport",
                                "parcel",
                                "store"
                            ]
                        }
                    },
                    {
                        "name": "platform_fee_points",
                        "in": "query",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "minimum": 0
                        }
                    },
                    {
                        "name": "promo_code",
                        "in": "query",
                        "schema": {
                            "type": [
                                "string",
                                "null"
                            ],
                            "maxLength": 40
                        }
                    },
                    {
                        "name": "bundle_key",
                        "in": "query",
                        "schema": {
                            "type": [
                                "string",
                                "null"
                            ],
                            "maxLength": 40
                        }
                    },
                    {
                        "name": "auto_apply",
                        "in": "query",
                        "schema": {
                            "type": "boolean"
                        }
                    },
                    {
                        "name": "pickup_latitude",
                        "in": "query",
                        "description": "Optional geo for zone-limited promos",
                        "schema": {
                            "type": [
                                "number",
                                "null"
                            ]
                        }
                    },
                    {
                        "name": "pickup_longitude",
                        "in": "query",
                        "schema": {
                            "type": [
                                "number",
                                "null"
                            ]
                        }
                    },
                    {
                        "name": "pickup_lat",
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "pickup_lng",
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "preview": {
                                            "anyOf": [
                                                {
                                                    "type": "object",
                                                    "properties": {
                                                        "applied": {
                                                            "type": "boolean"
                                                        },
                                                        "platform_fee_original": {
                                                            "type": [
                                                                "object",
                                                                "null"
                                                            ]
                                                        },
                                                        "discount_points": {
                                                            "type": "integer"
                                                        },
                                                        "platform_fee_final": {
                                                            "type": "integer"
                                                        },
                                                        "offer": {
                                                            "type": "array",
                                                            "items": {}
                                                        },
                                                        "debug": {
                                                            "type": "null"
                                                        }
                                                    },
                                                    "required": [
                                                        "applied",
                                                        "platform_fee_original",
                                                        "discount_points",
                                                        "platform_fee_final",
                                                        "offer",
                                                        "debug"
                                                    ]
                                                },
                                                {
                                                    "type": "object",
                                                    "properties": {
                                                        "applied": {
                                                            "type": "boolean"
                                                        },
                                                        "platform_fee_original": {
                                                            "type": [
                                                                "object",
                                                                "null"
                                                            ]
                                                        },
                                                        "discount_points": {
                                                            "type": "integer",
                                                            "enum": [
                                                                0
                                                            ]
                                                        },
                                                        "platform_fee_final": {
                                                            "type": [
                                                                "object",
                                                                "null"
                                                            ]
                                                        },
                                                        "offer": {
                                                            "type": "null"
                                                        },
                                                        "debug": {
                                                            "type": "null"
                                                        }
                                                    },
                                                    "required": [
                                                        "applied",
                                                        "platform_fee_original",
                                                        "discount_points",
                                                        "platform_fee_final",
                                                        "offer",
                                                        "debug"
                                                    ]
                                                }
                                            ]
                                        },
                                        "assignments": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/PromoAssignment"
                                            }
                                        },
                                        "interpreted": {
                                            "type": "object",
                                            "description": "(Optional but handy) show what the controller actually interpreted:",
                                            "properties": {
                                                "auto_apply": {
                                                    "type": "boolean"
                                                },
                                                "pickup_latitude": {
                                                    "type": [
                                                        "number",
                                                        "null"
                                                    ]
                                                },
                                                "pickup_longitude": {
                                                    "type": [
                                                        "number",
                                                        "null"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "auto_apply",
                                                "pickup_latitude",
                                                "pickup_longitude"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "preview",
                                        "assignments",
                                        "interpreted"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/admin/receipts/stats": {
            "get": {
                "operationId": "adminReceipt.stats",
                "tags": [
                    "AdminReceipt"
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "pending_receipts": {
                                            "type": "integer",
                                            "minimum": 0
                                        },
                                        "today_approvals": {
                                            "type": "integer",
                                            "minimum": 0
                                        },
                                        "today_rejections": {
                                            "type": "integer",
                                            "minimum": 0
                                        }
                                    },
                                    "required": [
                                        "pending_receipts",
                                        "today_approvals",
                                        "today_rejections"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/admin/receipts": {
            "get": {
                "operationId": "adminReceipt.index",
                "tags": [
                    "AdminReceipt"
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/components/schemas/LengthAwarePaginator"
                                        }
                                    },
                                    "required": [
                                        "data"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/admin/receipts/{receipt}": {
            "get": {
                "operationId": "adminReceipt.show",
                "tags": [
                    "AdminReceipt"
                ],
                "parameters": [
                    {
                        "name": "receipt",
                        "in": "path",
                        "required": true,
                        "description": "The receipt ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "receipt": {
                                            "$ref": "#/components/schemas/PaymentReceipt"
                                        },
                                        "order": {
                                            "type": "string"
                                        },
                                        "receipt_url": {
                                            "type": "string"
                                        },
                                        "receipt_thumb_url": {
                                            "type": "string"
                                        },
                                        "flags": {
                                            "type": "object",
                                            "properties": {
                                                "reference": {
                                                    "type": "boolean"
                                                },
                                                "amount": {
                                                    "type": "boolean"
                                                },
                                                "time": {
                                                    "type": "boolean"
                                                }
                                            },
                                            "required": [
                                                "reference",
                                                "amount",
                                                "time"
                                            ]
                                        },
                                        "highlighted_ocr_html": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "receipt",
                                        "order",
                                        "receipt_url",
                                        "receipt_thumb_url",
                                        "flags",
                                        "highlighted_ocr_html"
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/admin/receipts/{receipt}/approve": {
            "post": {
                "operationId": "adminReceipt.approve",
                "tags": [
                    "AdminReceipt"
                ],
                "parameters": [
                    {
                        "name": "receipt",
                        "in": "path",
                        "required": true,
                        "description": "The receipt ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        },
                                        "receipt": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "ok",
                                        "receipt"
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/admin/receipts/{receipt}/reject": {
            "post": {
                "operationId": "adminReceipt.reject",
                "tags": [
                    "AdminReceipt"
                ],
                "parameters": [
                    {
                        "name": "receipt",
                        "in": "path",
                        "required": true,
                        "description": "The receipt ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "reason": {
                                        "type": "string",
                                        "maxLength": 255
                                    }
                                },
                                "required": [
                                    "reason"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        },
                                        "receipt": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "ok",
                                        "receipt"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/admin/stores/{store}/rules": {
            "post": {
                "operationId": "adminStoreRules.store",
                "tags": [
                    "AdminStoreRules"
                ],
                "parameters": [
                    {
                        "name": "store",
                        "in": "path",
                        "required": true,
                        "description": "The store ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/StoreRulesRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "`StoreRulesResource`",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/components/schemas/StoreRulesResource"
                                        },
                                        "ok": {
                                            "type": "boolean"
                                        }
                                    },
                                    "required": [
                                        "data",
                                        "ok"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/admin/stores/{store}/schedule-overrides": {
            "post": {
                "operationId": "adminStoreScheduleOverride.store",
                "tags": [
                    "AdminStoreScheduleOverride"
                ],
                "parameters": [
                    {
                        "name": "store",
                        "in": "path",
                        "required": true,
                        "description": "The store ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/StoreScheduleOverrideRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Array of `StoreScheduleOverrideResource`",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/StoreScheduleOverrideResource"
                                            }
                                        },
                                        "ok": {
                                            "type": "boolean"
                                        }
                                    },
                                    "required": [
                                        "data",
                                        "ok"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/attestation/nonce": {
            "get": {
                "operationId": "attestation.nonce",
                "tags": [
                    "Attestation"
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "nonce": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "nonce"
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/attestation/verify": {
            "post": {
                "operationId": "attestation.verify",
                "tags": [
                    "Attestation"
                ],
                "responses": {
                    "503": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {}
                                }
                            }
                        }
                    },
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "attestation_token": {
                                            "type": "string"
                                        },
                                        "expires_in": {
                                            "type": "integer",
                                            "enum": [
                                                1800
                                            ]
                                        }
                                    },
                                    "required": [
                                        "attestation_token",
                                        "expires_in"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {}
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {}
                                }
                            }
                        }
                    }
                }
            }
        },
        "/auth/register": {
            "post": {
                "operationId": "auth.register",
                "tags": [
                    "Auth"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/RegisterRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "enum": [
                                                "User registered successfully"
                                            ]
                                        },
                                        "user": {
                                            "$ref": "#/components/schemas/User"
                                        },
                                        "token": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "message",
                                        "user",
                                        "token"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/auth/login": {
            "post": {
                "operationId": "auth.login",
                "tags": [
                    "Auth"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "login": {
                                        "type": "string",
                                        "maxLength": 120
                                    },
                                    "password": {
                                        "type": "string",
                                        "description": "email OR username",
                                        "maxLength": 200
                                    }
                                },
                                "required": [
                                    "login",
                                    "password"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "enum": [
                                                "User login successfully"
                                            ]
                                        },
                                        "user": {
                                            "$ref": "#/components/schemas/User"
                                        },
                                        "token": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "message",
                                        "user",
                                        "token"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/user/password": {
            "patch": {
                "operationId": "auth.updatePassword",
                "tags": [
                    "Auth"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "current_password": {
                                        "type": "string",
                                        "maxLength": 200
                                    },
                                    "password": {
                                        "type": "string",
                                        "minLength": 8,
                                        "maxLength": 200
                                    },
                                    "password_confirmation": {
                                        "type": "string",
                                        "minLength": 8,
                                        "maxLength": 200
                                    }
                                },
                                "required": [
                                    "current_password",
                                    "password",
                                    "password_confirmation"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "enum": [
                                                "Password updated"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "message"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/auth/logout": {
            "post": {
                "operationId": "auth.logout",
                "tags": [
                    "Auth"
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "enum": [
                                                "Logged out"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "message"
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/user/referral": {
            "get": {
                "operationId": "auth.referralInfo",
                "summary": "GET /api/v1/user/referral\nReturns user's ref code + whether already referred/bound",
                "tags": [
                    "Auth"
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ref_code": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "referred_by_user_id": {
                                            "type": [
                                                "integer",
                                                "null"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "ref_code",
                                        "referred_by_user_id"
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/user/referral/bind": {
            "post": {
                "operationId": "auth.bindReferralLater",
                "summary": "POST /api/v1/user/referral/bind\nAllows binding referral after signup (only once).\nPayload: { ref_code: string, role?: string }",
                "tags": [
                    "Auth"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "ref_code": {
                                        "type": "string",
                                        "maxLength": 40
                                    },
                                    "role": {
                                        "type": [
                                            "string",
                                            "null"
                                        ],
                                        "maxLength": 40
                                    }
                                },
                                "required": [
                                    "ref_code"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "anyOf": [
                                        {
                                            "type": "object",
                                            "properties": {
                                                "message": {
                                                    "type": "string",
                                                    "enum": [
                                                        "Referral bound successfully"
                                                    ]
                                                },
                                                "referred_by_user_id": {
                                                    "type": [
                                                        "integer",
                                                        "null"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "message",
                                                "referred_by_user_id"
                                            ]
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "message": {
                                                    "type": "string",
                                                    "enum": [
                                                        "Referral already bound"
                                                    ]
                                                },
                                                "referred_by_user_id": {
                                                    "type": [
                                                        "integer",
                                                        "null"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "message",
                                                "referred_by_user_id"
                                            ]
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/chat/messages": {
            "post": {
                "operationId": "chat.send",
                "description": "Request body should contain:\n- receiver_id (int): the user ID of the recipient\n- message (string): the message body\n- order_id (int|null): optional order ID to scope the message",
                "summary": "Send a chat message to another user. Optionally associate the message\nwith a delivery order. The authenticated user becomes the sender",
                "tags": [
                    "Chat"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "receiver_id": {
                                        "type": "integer"
                                    },
                                    "message": {
                                        "type": "string",
                                        "maxLength": 10000
                                    },
                                    "order_id": {
                                        "type": [
                                            "integer",
                                            "null"
                                        ]
                                    }
                                },
                                "required": [
                                    "receiver_id",
                                    "message"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        },
                                        "message": {
                                            "type": "object",
                                            "properties": {
                                                "id": {
                                                    "type": "integer"
                                                },
                                                "sender_id": {
                                                    "type": "integer"
                                                },
                                                "receiver_id": {
                                                    "type": "integer"
                                                },
                                                "order_id": {
                                                    "type": [
                                                        "integer",
                                                        "null"
                                                    ]
                                                },
                                                "message": {
                                                    "type": "string"
                                                },
                                                "created_at": {
                                                    "type": "string"
                                                }
                                            },
                                            "required": [
                                                "id",
                                                "sender_id",
                                                "receiver_id",
                                                "order_id",
                                                "message",
                                                "created_at"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "ok",
                                        "message"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "anyOf": [
                                        {
                                            "type": "object",
                                            "properties": {
                                                "message": {
                                                    "type": "string",
                                                    "enum": [
                                                        "Direct chat is restricted. Use order chat instead."
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "message"
                                            ]
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "message": {
                                                    "type": "string",
                                                    "enum": [
                                                        "Order chat is restricted to staff and order participants."
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "message"
                                            ]
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/chat/messages/{userId}": {
            "get": {
                "operationId": "chat.history",
                "summary": "Retrieve the chat history between the authenticated user and another\nparticipant. Optionally filter by delivery order. Messages are ordered\nchronologically ascending",
                "tags": [
                    "Chat"
                ],
                "parameters": [
                    {
                        "name": "userId",
                        "in": "path",
                        "required": true,
                        "description": "The other participant in the conversation",
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "order_id",
                        "in": "query",
                        "description": "Order-scoped history: allow (participant<->participant) OR (staff<->participant).\n IMPORTANT: if order_id is absent, this is a direct/DM conversation.",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        },
                                        "messages": {
                                            "type": "array",
                                            "items": {
                                                "type": "object",
                                                "properties": {
                                                    "id": {
                                                        "type": "integer"
                                                    },
                                                    "sender_id": {
                                                        "type": "integer"
                                                    },
                                                    "receiver_id": {
                                                        "type": "integer"
                                                    },
                                                    "order_id": {
                                                        "type": [
                                                            "integer",
                                                            "null"
                                                        ]
                                                    },
                                                    "message": {
                                                        "type": "string"
                                                    },
                                                    "created_at": {
                                                        "type": "string"
                                                    }
                                                },
                                                "required": [
                                                    "id",
                                                    "sender_id",
                                                    "receiver_id",
                                                    "order_id",
                                                    "message",
                                                    "created_at"
                                                ]
                                            }
                                        }
                                    },
                                    "required": [
                                        "ok",
                                        "messages"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "anyOf": [
                                        {
                                            "type": "object",
                                            "properties": {
                                                "message": {
                                                    "type": "string",
                                                    "enum": [
                                                        "Direct chat is restricted. Use order chat instead."
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "message"
                                            ]
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "message": {
                                                    "type": "string",
                                                    "enum": [
                                                        "Not allowed for this order chat"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "message"
                                            ]
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "enum": [
                                                "You cannot fetch chat history with yourself"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "message"
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/chat/conversations": {
            "get": {
                "operationId": "chat.conversations",
                "description": "Endpoint: GET /chat/conversations",
                "summary": "List the authenticated user's chat conversations. Each unique\nconversation is defined by the other participant (partner) and\noptionally an associated order ID. The latest message in each\nconversation is returned along with basic partner information",
                "tags": [
                    "Chat"
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        },
                                        "conversations": {
                                            "type": "array",
                                            "items": {}
                                        }
                                    },
                                    "required": [
                                        "ok",
                                        "conversations"
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/chat/support/agent": {
            "get": {
                "operationId": "chat.supportAgent",
                "description": "Endpoint: GET /chat/support/agent",
                "summary": "Retrieve the support agent (or the first admin) for chat. This allows\ncustomers and drivers to start a conversation with support even if they\nhave not chatted before. If a support role exists, the first user with\nthat role is returned; otherwise, fall back to the first admin user",
                "tags": [
                    "Chat"
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        },
                                        "user": {
                                            "type": "object",
                                            "properties": {
                                                "id": {
                                                    "type": "integer"
                                                },
                                                "name": {
                                                    "type": "string"
                                                }
                                            },
                                            "required": [
                                                "id",
                                                "name"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "ok",
                                        "user"
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "enum": [
                                                "No support agent found"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "message"
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/disputes": {
            "post": {
                "operationId": "customerDispute.storeByOrderId",
                "description": "This is a convenience wrapper around store(), but receives delivery_order_id\nin the request payload instead of using route-model binding.",
                "summary": "Flat route used by mobile + tests: POST /api/v1/disputes",
                "tags": [
                    "CustomerDispute"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "$ref": "#/components/schemas/CustomerCreateDisputeByOrderIdRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "dispute": {
                                            "type": "object",
                                            "properties": {
                                                "id": {
                                                    "type": "integer"
                                                },
                                                "delivery_order_id": {
                                                    "type": "integer"
                                                },
                                                "customer_id": {
                                                    "type": "integer"
                                                },
                                                "status": {
                                                    "type": "string"
                                                },
                                                "reason": {
                                                    "type": "string"
                                                },
                                                "description": {
                                                    "type": "string"
                                                },
                                                "meta": {
                                                    "type": "string"
                                                },
                                                "opened_at": {
                                                    "type": "string"
                                                }
                                            },
                                            "required": [
                                                "id",
                                                "delivery_order_id",
                                                "customer_id",
                                                "status",
                                                "reason",
                                                "description",
                                                "meta",
                                                "opened_at"
                                            ]
                                        },
                                        "evidence": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "dispute",
                                        "evidence"
                                    ]
                                }
                            }
                        }
                    },
                    "409": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "enum": [
                                                "Dispute already opened for this order"
                                            ]
                                        },
                                        "dispute_id": {
                                            "type": "integer"
                                        },
                                        "status": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "message",
                                        "dispute_id",
                                        "status"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/customer/orders/{order}/disputes": {
            "get": {
                "operationId": "customer.customerDispute.indexForOrder_0",
                "tags": [
                    "CustomerDispute"
                ],
                "parameters": [
                    {
                        "name": "order",
                        "in": "path",
                        "required": true,
                        "description": "The order ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "data"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/customer/disputes/{dispute}": {
            "get": {
                "operationId": "customerDispute.show",
                "tags": [
                    "CustomerDispute"
                ],
                "parameters": [
                    {
                        "name": "dispute",
                        "in": "path",
                        "required": true,
                        "description": "The dispute ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "dispute": {
                                            "type": "object",
                                            "properties": {
                                                "id": {
                                                    "type": "integer"
                                                },
                                                "delivery_order_id": {
                                                    "type": "integer"
                                                },
                                                "customer_id": {
                                                    "type": "integer"
                                                },
                                                "status": {
                                                    "type": "string"
                                                },
                                                "reason": {
                                                    "type": "string"
                                                },
                                                "description": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "meta": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "opened_at": {
                                                    "type": "string"
                                                },
                                                "resolved_at": {
                                                    "type": "string"
                                                },
                                                "outcome": {
                                                    "type": "string"
                                                },
                                                "resolution_notes": {
                                                    "type": "string"
                                                },
                                                "refund_points": {
                                                    "type": "integer"
                                                },
                                                "penalty_points": {
                                                    "type": "integer"
                                                }
                                            },
                                            "required": [
                                                "id",
                                                "delivery_order_id",
                                                "customer_id",
                                                "status",
                                                "reason",
                                                "description",
                                                "meta",
                                                "opened_at",
                                                "resolved_at",
                                                "outcome",
                                                "resolution_notes",
                                                "refund_points",
                                                "penalty_points"
                                            ]
                                        },
                                        "evidence": {
                                            "type": "array",
                                            "items": {
                                                "type": "object",
                                                "properties": {
                                                    "id": {
                                                        "type": "integer"
                                                    },
                                                    "kind": {
                                                        "type": "string"
                                                    },
                                                    "note": {
                                                        "type": [
                                                            "string",
                                                            "null"
                                                        ]
                                                    },
                                                    "file_mime": {
                                                        "type": [
                                                            "string",
                                                            "null"
                                                        ]
                                                    },
                                                    "file_size": {
                                                        "type": "integer"
                                                    },
                                                    "meta": {
                                                        "type": [
                                                            "string",
                                                            "null"
                                                        ]
                                                    },
                                                    "file_url": {
                                                        "type": [
                                                            "string",
                                                            "null"
                                                        ]
                                                    },
                                                    "created_at": {
                                                        "type": "string"
                                                    }
                                                },
                                                "required": [
                                                    "id",
                                                    "kind",
                                                    "note",
                                                    "file_mime",
                                                    "file_size",
                                                    "meta",
                                                    "file_url",
                                                    "created_at"
                                                ]
                                            }
                                        }
                                    },
                                    "required": [
                                        "dispute",
                                        "evidence"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/customer/disputes/{dispute}/evidence": {
            "post": {
                "operationId": "customerDispute.addEvidence",
                "tags": [
                    "CustomerDispute"
                ],
                "parameters": [
                    {
                        "name": "dispute",
                        "in": "path",
                        "required": true,
                        "description": "The dispute ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "$ref": "#/components/schemas/CustomerDisputeEvidenceRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        },
                                        "added": {
                                            "type": "integer"
                                        }
                                    },
                                    "required": [
                                        "ok",
                                        "added"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/orders/{order}/disputes": {
            "get": {
                "operationId": "customer.customerDispute.indexForOrder_0",
                "tags": [
                    "CustomerDispute"
                ],
                "parameters": [
                    {
                        "name": "order",
                        "in": "path",
                        "required": true,
                        "description": "The order ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "data"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/customer/promos": {
            "get": {
                "operationId": "customerPromo.index",
                "tags": [
                    "CustomerPromo"
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "vouchers": {
                                            "type": "string"
                                        },
                                        "bundles": {
                                            "type": "string"
                                        },
                                        "recommended": {
                                            "type": "object",
                                            "properties": {
                                                "mode": {
                                                    "type": "string",
                                                    "enum": [
                                                        "code"
                                                    ]
                                                },
                                                "promo_code": {
                                                    "type": "string"
                                                },
                                                "bundle_key": {
                                                    "type": "null"
                                                },
                                                "title": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "label": {
                                                    "type": "string"
                                                }
                                            },
                                            "required": [
                                                "mode",
                                                "promo_code",
                                                "bundle_key",
                                                "title",
                                                "label"
                                            ]
                                        },
                                        "campaigns": {
                                            "type": "array",
                                            "description": "keep these if you still need them elsewhere:",
                                            "items": {
                                                "$ref": "#/components/schemas/PromoCampaign"
                                            }
                                        }
                                    },
                                    "required": [
                                        "vouchers",
                                        "bundles",
                                        "recommended",
                                        "campaigns"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/customer/promos/preview": {
            "post": {
                "operationId": "customerPromo.preview",
                "tags": [
                    "CustomerPromo"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "flow_type": {
                                        "type": "string",
                                        "enum": [
                                            "transport",
                                            "parcel",
                                            "store"
                                        ]
                                    },
                                    "platform_fee_points": {
                                        "type": "integer",
                                        "minimum": 0
                                    },
                                    "promo_code": {
                                        "type": [
                                            "string",
                                            "null"
                                        ],
                                        "maxLength": 40
                                    },
                                    "bundle_key": {
                                        "type": [
                                            "string",
                                            "null"
                                        ],
                                        "maxLength": 40
                                    },
                                    "auto_apply": {
                                        "type": [
                                            "boolean",
                                            "null"
                                        ]
                                    },
                                    "debug": {
                                        "type": [
                                            "boolean",
                                            "null"
                                        ],
                                        "description": "When true, include a \"debug\" payload explaining eligibility and selection."
                                    },
                                    "pickup_latitude": {
                                        "type": [
                                            "number",
                                            "null"
                                        ],
                                        "description": "Optional geo for zone-limited promos"
                                    },
                                    "pickup_longitude": {
                                        "type": [
                                            "number",
                                            "null"
                                        ]
                                    }
                                },
                                "required": [
                                    "flow_type",
                                    "platform_fee_points"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "anyOf": [
                                        {
                                            "type": "object",
                                            "properties": {
                                                "applied": {
                                                    "type": "boolean"
                                                },
                                                "platform_fee_original": {
                                                    "type": [
                                                        "object",
                                                        "null"
                                                    ]
                                                },
                                                "discount_points": {
                                                    "type": "integer"
                                                },
                                                "platform_fee_final": {
                                                    "type": "integer"
                                                },
                                                "offer": {
                                                    "type": "array",
                                                    "items": {}
                                                },
                                                "debug": {
                                                    "type": "null"
                                                }
                                            },
                                            "required": [
                                                "applied",
                                                "platform_fee_original",
                                                "discount_points",
                                                "platform_fee_final",
                                                "offer",
                                                "debug"
                                            ]
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "applied": {
                                                    "type": "boolean"
                                                },
                                                "platform_fee_original": {
                                                    "type": [
                                                        "object",
                                                        "null"
                                                    ]
                                                },
                                                "discount_points": {
                                                    "type": "integer",
                                                    "enum": [
                                                        0
                                                    ]
                                                },
                                                "platform_fee_final": {
                                                    "type": [
                                                        "object",
                                                        "null"
                                                    ]
                                                },
                                                "offer": {
                                                    "type": "null"
                                                },
                                                "debug": {
                                                    "type": "null"
                                                }
                                            },
                                            "required": [
                                                "applied",
                                                "platform_fee_original",
                                                "discount_points",
                                                "platform_fee_final",
                                                "offer",
                                                "debug"
                                            ]
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/customer/promos/bundles/purchase": {
            "post": {
                "operationId": "customer.customerPromo.purchaseBundle_0",
                "tags": [
                    "CustomerPromo"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "bundle_key": {
                                        "type": "string",
                                        "maxLength": 40
                                    },
                                    "idempotency_key": {
                                        "type": "string",
                                        "maxLength": 80
                                    }
                                },
                                "required": [
                                    "bundle_key",
                                    "idempotency_key"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/customer/promos/purchase-bundle": {
            "post": {
                "operationId": "customer.customerPromo.purchaseBundle_0",
                "tags": [
                    "CustomerPromo"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "bundle_key": {
                                        "type": "string",
                                        "maxLength": 40
                                    },
                                    "idempotency_key": {
                                        "type": "string",
                                        "maxLength": 80
                                    }
                                },
                                "required": [
                                    "bundle_key",
                                    "idempotency_key"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/customer/promos/redeem-code": {
            "post": {
                "operationId": "customerPromo.redeemCode",
                "tags": [
                    "CustomerPromo"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/PromoRedeemCodeRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "voucher": {
                                            "type": "array",
                                            "items": {}
                                        }
                                    },
                                    "required": [
                                        "voucher"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/customer/stores/featured": {
            "get": {
                "operationId": "customerStoreDiscovery.featured",
                "tags": [
                    "CustomerStoreDiscovery"
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "anyOf": [
                                        {
                                            "type": "array",
                                            "prefixItems": [
                                                {
                                                    "type": "object",
                                                    "properties": {
                                                        "id": {
                                                            "type": "integer"
                                                        },
                                                        "name": {
                                                            "type": "string"
                                                        },
                                                        "logo_url": {
                                                            "type": "string"
                                                        },
                                                        "is_open": {
                                                            "type": "boolean"
                                                        },
                                                        "distance_km": {
                                                            "type": [
                                                                "number",
                                                                "null"
                                                            ]
                                                        },
                                                        "eta_min": {
                                                            "type": [
                                                                "integer",
                                                                "null"
                                                            ]
                                                        },
                                                        "zone": {
                                                            "type": "object",
                                                            "properties": {
                                                                "id": {
                                                                    "type": "integer"
                                                                },
                                                                "slug": {
                                                                    "type": "string"
                                                                },
                                                                "name": {
                                                                    "type": "string"
                                                                }
                                                            },
                                                            "required": [
                                                                "id",
                                                                "slug",
                                                                "name"
                                                            ]
                                                        },
                                                        "top_item": {}
                                                    },
                                                    "required": [
                                                        "id",
                                                        "name",
                                                        "logo_url",
                                                        "is_open",
                                                        "distance_km",
                                                        "eta_min",
                                                        "zone",
                                                        "top_item"
                                                    ]
                                                },
                                                {
                                                    "type": "object",
                                                    "properties": {
                                                        "id": {
                                                            "type": "integer"
                                                        },
                                                        "name": {
                                                            "type": "string"
                                                        },
                                                        "logo_url": {
                                                            "type": "string"
                                                        },
                                                        "is_open": {
                                                            "type": "boolean"
                                                        },
                                                        "distance_km": {
                                                            "type": [
                                                                "number",
                                                                "null"
                                                            ]
                                                        },
                                                        "eta_min": {
                                                            "type": [
                                                                "integer",
                                                                "null"
                                                            ]
                                                        },
                                                        "zone": {
                                                            "type": "object",
                                                            "properties": {
                                                                "id": {
                                                                    "type": "integer"
                                                                },
                                                                "slug": {
                                                                    "type": "string"
                                                                },
                                                                "name": {
                                                                    "type": "string"
                                                                }
                                                            },
                                                            "required": [
                                                                "id",
                                                                "slug",
                                                                "name"
                                                            ]
                                                        },
                                                        "top_item": {}
                                                    },
                                                    "required": [
                                                        "id",
                                                        "name",
                                                        "logo_url",
                                                        "is_open",
                                                        "distance_km",
                                                        "eta_min",
                                                        "zone",
                                                        "top_item"
                                                    ]
                                                }
                                            ],
                                            "minItems": 2,
                                            "maxItems": 2,
                                            "additionalItems": false
                                        },
                                        {
                                            "type": "array",
                                            "items": {
                                                "type": "string"
                                            },
                                            "minItems": 0,
                                            "maxItems": 0,
                                            "additionalItems": false
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/customer/stores/resolve-nearby": {
            "post": {
                "operationId": "customerStoreDiscovery.resolveNearby",
                "tags": [
                    "CustomerStoreDiscovery"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "latitude": {
                                        "type": "number",
                                        "minimum": -90,
                                        "maximum": 90
                                    },
                                    "longitude": {
                                        "type": "number",
                                        "minimum": -180,
                                        "maximum": 180
                                    },
                                    "radius_m": {
                                        "type": [
                                            "integer",
                                            "null"
                                        ],
                                        "minimum": 50,
                                        "maximum": 20000
                                    }
                                },
                                "required": [
                                    "latitude",
                                    "longitude"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "anyOf": [
                                        {
                                            "type": "object",
                                            "properties": {
                                                "in_range": {
                                                    "type": "boolean"
                                                },
                                                "radius_m": {
                                                    "type": "integer"
                                                },
                                                "store": {
                                                    "type": [
                                                        "object",
                                                        "null"
                                                    ],
                                                    "properties": {
                                                        "id": {
                                                            "type": "integer"
                                                        },
                                                        "name": {
                                                            "type": "string"
                                                        },
                                                        "address": {
                                                            "type": "string"
                                                        },
                                                        "latitude": {
                                                            "type": [
                                                                "number",
                                                                "null"
                                                            ]
                                                        },
                                                        "longitude": {
                                                            "type": [
                                                                "number",
                                                                "null"
                                                            ]
                                                        },
                                                        "distance_m": {
                                                            "type": "integer"
                                                        },
                                                        "distance_km": {
                                                            "type": "number"
                                                        },
                                                        "is_open": {
                                                            "type": "boolean"
                                                        },
                                                        "zone": {
                                                            "type": [
                                                                "object",
                                                                "null"
                                                            ],
                                                            "properties": {
                                                                "id": {
                                                                    "type": "integer"
                                                                },
                                                                "slug": {
                                                                    "type": "string"
                                                                },
                                                                "name": {
                                                                    "type": "string"
                                                                }
                                                            },
                                                            "required": [
                                                                "id",
                                                                "slug",
                                                                "name"
                                                            ]
                                                        }
                                                    },
                                                    "required": [
                                                        "id",
                                                        "name",
                                                        "address",
                                                        "latitude",
                                                        "longitude",
                                                        "distance_m",
                                                        "distance_km",
                                                        "is_open",
                                                        "zone"
                                                    ]
                                                },
                                                "nearest": {
                                                    "type": "object",
                                                    "properties": {
                                                        "id": {
                                                            "type": "integer"
                                                        },
                                                        "name": {
                                                            "type": "string"
                                                        },
                                                        "address": {
                                                            "type": "string"
                                                        },
                                                        "latitude": {
                                                            "type": [
                                                                "number",
                                                                "null"
                                                            ]
                                                        },
                                                        "longitude": {
                                                            "type": [
                                                                "number",
                                                                "null"
                                                            ]
                                                        },
                                                        "distance_m": {
                                                            "type": "integer"
                                                        },
                                                        "distance_km": {
                                                            "type": "number"
                                                        },
                                                        "is_open": {
                                                            "type": "boolean"
                                                        },
                                                        "zone": {
                                                            "type": [
                                                                "object",
                                                                "null"
                                                            ],
                                                            "properties": {
                                                                "id": {
                                                                    "type": "integer"
                                                                },
                                                                "slug": {
                                                                    "type": "string"
                                                                },
                                                                "name": {
                                                                    "type": "string"
                                                                }
                                                            },
                                                            "required": [
                                                                "id",
                                                                "slug",
                                                                "name"
                                                            ]
                                                        }
                                                    },
                                                    "required": [
                                                        "id",
                                                        "name",
                                                        "address",
                                                        "latitude",
                                                        "longitude",
                                                        "distance_m",
                                                        "distance_km",
                                                        "is_open",
                                                        "zone"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "in_range",
                                                "radius_m",
                                                "store",
                                                "nearest"
                                            ]
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "in_range": {
                                                    "type": "boolean"
                                                },
                                                "radius_m": {
                                                    "type": "integer"
                                                },
                                                "store": {
                                                    "type": "null"
                                                },
                                                "nearest": {
                                                    "type": "null"
                                                }
                                            },
                                            "required": [
                                                "in_range",
                                                "radius_m",
                                                "store",
                                                "nearest"
                                            ]
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/delivery-orders": {
            "get": {
                "operationId": "delivery-orders.index",
                "tags": [
                    "DeliveryOrder"
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "type": "string"
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            },
            "post": {
                "operationId": "delivery-orders.store",
                "tags": [
                    "DeliveryOrder"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/DeliveryOrderRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "enum": [
                                                "Failed to create order"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "message"
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/delivery-orders/{id}": {
            "get": {
                "operationId": "delivery-orders.show",
                "tags": [
                    "DeliveryOrder"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "id": {
                                            "type": "integer"
                                        },
                                        "reference_no": {
                                            "type": "string"
                                        },
                                        "customer_id": {
                                            "type": "integer"
                                        },
                                        "store_id": {
                                            "type": [
                                                "integer",
                                                "null"
                                            ]
                                        },
                                        "vehicle_type_id": {
                                            "anyOf": [
                                                {
                                                    "type": "integer"
                                                },
                                                {
                                                    "type": "integer",
                                                    "enum": [
                                                        0
                                                    ]
                                                }
                                            ]
                                        },
                                        "passenger_count": {
                                            "type": "integer",
                                            "enum": [
                                                1
                                            ]
                                        },
                                        "service_level": {
                                            "type": "string",
                                            "description": "Optional"
                                        },
                                        "speed_multiplier": {
                                            "type": [
                                                "number",
                                                "null"
                                            ]
                                        },
                                        "pickup_address": {
                                            "type": "string"
                                        },
                                        "pickup_latitude": {
                                            "type": [
                                                "number",
                                                "null"
                                            ]
                                        },
                                        "pickup_longitude": {
                                            "type": [
                                                "number",
                                                "null"
                                            ]
                                        },
                                        "dropoff_address": {
                                            "type": "string"
                                        },
                                        "dropoff_latitude": {
                                            "type": [
                                                "number",
                                                "null"
                                            ]
                                        },
                                        "dropoff_longitude": {
                                            "type": [
                                                "number",
                                                "null"
                                            ]
                                        },
                                        "distance": {
                                            "type": "string"
                                        },
                                        "trip_type": {
                                            "type": "string"
                                        },
                                        "payment_type_id": {
                                            "type": "integer"
                                        },
                                        "flow_type": {
                                            "type": "string"
                                        },
                                        "dispatch_status": {
                                            "type": "string"
                                        },
                                        "dispatch_at": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "status": {
                                            "type": "string"
                                        },
                                        "driver_id": {
                                            "type": [
                                                "integer",
                                                "null"
                                            ]
                                        },
                                        "store_status": {
                                            "type": "string"
                                        },
                                        "prep_status": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "fulfillment_label": {
                                            "type": "string",
                                            "enum": [
                                                "Rider en route"
                                            ]
                                        },
                                        "requires_quote_confirmation": {
                                            "type": "boolean",
                                            "description": "Paper/pharmacy request metadata (safe to add fields)"
                                        },
                                        "request_kind": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "request_attachments": {
                                            "anyOf": [
                                                {
                                                    "type": "array",
                                                    "items": {}
                                                },
                                                {
                                                    "type": "null"
                                                },
                                                {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    },
                                                    "minItems": 0,
                                                    "maxItems": 0,
                                                    "additionalItems": false
                                                }
                                            ]
                                        },
                                        "patient_name": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "patient_birthdate": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "request_notes": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "quote_status": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "quote_ready_at": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "quote_accepted_at": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "quote_payload": {
                                            "type": [
                                                "array",
                                                "null"
                                            ],
                                            "items": {}
                                        },
                                        "quote_accept_payload": {
                                            "type": [
                                                "array",
                                                "null"
                                            ],
                                            "items": {}
                                        },
                                        "totals": {
                                            "type": "object",
                                            "properties": {
                                                "items_subtotal": {
                                                    "type": "number"
                                                },
                                                "delivery_fee": {
                                                    "type": "number"
                                                },
                                                "driver_fare": {
                                                    "type": "number"
                                                },
                                                "platform_fee": {
                                                    "type": "number"
                                                },
                                                "payable_total": {
                                                    "type": "number"
                                                }
                                            },
                                            "required": [
                                                "items_subtotal",
                                                "delivery_fee",
                                                "driver_fare",
                                                "platform_fee",
                                                "payable_total"
                                            ]
                                        },
                                        "items": {
                                            "type": "array",
                                            "description": "Normal items",
                                            "items": {
                                                "type": "object",
                                                "properties": {
                                                    "id": {
                                                        "type": "integer"
                                                    },
                                                    "product_id": {
                                                        "type": "integer"
                                                    },
                                                    "name": {
                                                        "type": "string"
                                                    },
                                                    "qty": {
                                                        "type": "integer"
                                                    },
                                                    "price": {
                                                        "type": "number"
                                                    },
                                                    "line_total": {
                                                        "type": "number"
                                                    },
                                                    "notes": {
                                                        "type": "string"
                                                    },
                                                    "state_label": {
                                                        "type": "string",
                                                        "enum": [
                                                            "Rider en route"
                                                        ]
                                                    }
                                                },
                                                "required": [
                                                    "id",
                                                    "product_id",
                                                    "name",
                                                    "qty",
                                                    "price",
                                                    "line_total",
                                                    "notes",
                                                    "state_label"
                                                ]
                                            }
                                        },
                                        "custom_items": {
                                            "type": "string",
                                            "description": "Custom items (paper/pharmacy confirmed list)"
                                        },
                                        "quote_items": {
                                            "type": "array",
                                            "description": "Quote preview (paper/pharmacy) before customer confirms",
                                            "prefixItems": [
                                                {
                                                    "type": "object",
                                                    "properties": {
                                                        "name": {
                                                            "type": "string"
                                                        },
                                                        "qty": {
                                                            "type": "integer"
                                                        },
                                                        "price": {
                                                            "type": "number"
                                                        },
                                                        "line_total": {
                                                            "type": "number"
                                                        },
                                                        "notes": {
                                                            "type": [
                                                                "string",
                                                                "null"
                                                            ]
                                                        },
                                                        "substitutions": {
                                                            "anyOf": [
                                                                {
                                                                    "type": "string"
                                                                },
                                                                {
                                                                    "type": "array",
                                                                    "items": {
                                                                        "type": "string"
                                                                    },
                                                                    "minItems": 0,
                                                                    "maxItems": 0,
                                                                    "additionalItems": false
                                                                }
                                                            ]
                                                        }
                                                    },
                                                    "required": [
                                                        "name",
                                                        "qty",
                                                        "price",
                                                        "line_total",
                                                        "notes",
                                                        "substitutions"
                                                    ]
                                                }
                                            ],
                                            "minItems": 1,
                                            "maxItems": 1,
                                            "additionalItems": false
                                        },
                                        "driver": {
                                            "type": [
                                                "object",
                                                "null"
                                            ],
                                            "properties": {
                                                "id": {
                                                    "type": "integer"
                                                },
                                                "name": {
                                                    "type": "string"
                                                },
                                                "phone": {
                                                    "type": "string"
                                                },
                                                "plate_number": {
                                                    "type": "string"
                                                },
                                                "location": {
                                                    "type": [
                                                        "object",
                                                        "null"
                                                    ],
                                                    "description": "\u2705 GPS + freshness for live map UI",
                                                    "properties": {
                                                        "latitude": {
                                                            "type": "number"
                                                        },
                                                        "longitude": {
                                                            "type": "number"
                                                        },
                                                        "updated_at": {
                                                            "type": [
                                                                "string",
                                                                "null"
                                                            ]
                                                        },
                                                        "last_seen_at": {
                                                            "type": [
                                                                "string",
                                                                "null"
                                                            ]
                                                        }
                                                    },
                                                    "required": [
                                                        "latitude",
                                                        "longitude",
                                                        "updated_at",
                                                        "last_seen_at"
                                                    ]
                                                },
                                                "location_stale": {
                                                    "type": [
                                                        "boolean",
                                                        "null"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "id",
                                                "name",
                                                "phone",
                                                "plate_number",
                                                "location",
                                                "location_stale"
                                            ]
                                        },
                                        "store": {
                                            "type": [
                                                "object",
                                                "null"
                                            ],
                                            "properties": {
                                                "id": {
                                                    "type": "integer"
                                                },
                                                "name": {
                                                    "type": "string"
                                                },
                                                "address": {
                                                    "type": "string"
                                                }
                                            },
                                            "required": [
                                                "id",
                                                "name",
                                                "address"
                                            ]
                                        },
                                        "parcel": {
                                            "type": [
                                                "object",
                                                "null"
                                            ],
                                            "properties": {
                                                "sender_name": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "sender_phone": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "recipient_name": {
                                                    "type": "string"
                                                },
                                                "recipient_phone": {
                                                    "type": "string"
                                                },
                                                "item_category": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "item_weight_kg": {
                                                    "type": [
                                                        "number",
                                                        "null"
                                                    ]
                                                },
                                                "item_description": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "declared_value": {
                                                    "type": [
                                                        "number",
                                                        "null"
                                                    ]
                                                },
                                                "pickup_note": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "dropoff_note": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "cod_amount": {
                                                    "type": [
                                                        "number",
                                                        "null"
                                                    ]
                                                },
                                                "cod_status": {
                                                    "type": "string"
                                                },
                                                "cod_collected_at": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "cod_remitted_at": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "cod_settled_at": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "cod_receiver_name": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "cod_notes": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "cod_proof_url": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "cod_proof_thumb_url": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "sender_name",
                                                "sender_phone",
                                                "recipient_name",
                                                "recipient_phone",
                                                "item_category",
                                                "item_weight_kg",
                                                "item_description",
                                                "declared_value",
                                                "pickup_note",
                                                "dropoff_note",
                                                "cod_amount",
                                                "cod_status",
                                                "cod_collected_at",
                                                "cod_remitted_at",
                                                "cod_settled_at",
                                                "cod_receiver_name",
                                                "cod_notes",
                                                "cod_proof_url",
                                                "cod_proof_thumb_url"
                                            ]
                                        },
                                        "payment_method": {
                                            "type": "string"
                                        },
                                        "payment_status": {
                                            "type": "string"
                                        },
                                        "payment_reference": {
                                            "type": "string"
                                        },
                                        "cod_confirmation_pending": {
                                            "type": "boolean",
                                            "description": "Phase 4: COD OTP confirmation hints (for UI)."
                                        },
                                        "cod_confirmation_expires_at": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "payment_receipt_path": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "payment_receipt_url": {
                                            "type": "string"
                                        },
                                        "payment_receipt_thumb_url": {
                                            "type": "string"
                                        },
                                        "delivery_fee_prepaid_points": {
                                            "anyOf": [
                                                {
                                                    "type": "integer"
                                                },
                                                {
                                                    "type": "integer",
                                                    "enum": [
                                                        0
                                                    ]
                                                }
                                            ]
                                        },
                                        "delivery_fee_prepaid_at": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "payment_submitted_at": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "payment_verified_at": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "payment_expires_at": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "payment_rejection_reason": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "id",
                                        "reference_no",
                                        "customer_id",
                                        "store_id",
                                        "vehicle_type_id",
                                        "passenger_count",
                                        "service_level",
                                        "speed_multiplier",
                                        "pickup_address",
                                        "pickup_latitude",
                                        "pickup_longitude",
                                        "dropoff_address",
                                        "dropoff_latitude",
                                        "dropoff_longitude",
                                        "distance",
                                        "trip_type",
                                        "payment_type_id",
                                        "flow_type",
                                        "dispatch_status",
                                        "dispatch_at",
                                        "status",
                                        "driver_id",
                                        "store_status",
                                        "prep_status",
                                        "fulfillment_label",
                                        "requires_quote_confirmation",
                                        "request_kind",
                                        "request_attachments",
                                        "patient_name",
                                        "patient_birthdate",
                                        "request_notes",
                                        "quote_status",
                                        "quote_ready_at",
                                        "quote_accepted_at",
                                        "quote_payload",
                                        "quote_accept_payload",
                                        "totals",
                                        "items",
                                        "custom_items",
                                        "quote_items",
                                        "driver",
                                        "store",
                                        "parcel",
                                        "payment_method",
                                        "payment_status",
                                        "payment_reference",
                                        "cod_confirmation_pending",
                                        "cod_confirmation_expires_at",
                                        "payment_receipt_path",
                                        "payment_receipt_url",
                                        "payment_receipt_thumb_url",
                                        "delivery_fee_prepaid_points",
                                        "delivery_fee_prepaid_at",
                                        "payment_submitted_at",
                                        "payment_verified_at",
                                        "payment_expires_at",
                                        "payment_rejection_reason"
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "enum": [
                                                "Order not found"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "message"
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            },
            "put": {
                "operationId": "delivery-orders.update",
                "tags": [
                    "DeliveryOrder"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/DeliveryOrderRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            },
            "delete": {
                "operationId": "delivery-orders.destroy",
                "tags": [
                    "DeliveryOrder"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "deleted": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "deleted"
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/quote": {
            "post": {
                "operationId": "deliveryOrder.quote",
                "tags": [
                    "DeliveryOrder"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "store_id": {
                                        "type": [
                                            "integer",
                                            "null"
                                        ]
                                    },
                                    "pickup_place_id": {
                                        "type": "integer"
                                    },
                                    "dropoff_place_id": {
                                        "type": "integer"
                                    },
                                    "trip_type": {
                                        "type": "string"
                                    },
                                    "waiting_time": {
                                        "type": "integer",
                                        "minimum": 0
                                    },
                                    "passenger_count": {
                                        "type": [
                                            "integer",
                                            "null"
                                        ],
                                        "minimum": 0,
                                        "maximum": 10
                                    },
                                    "store_cart_total_points": {
                                        "type": [
                                            "integer",
                                            "null"
                                        ],
                                        "minimum": 0,
                                        "maximum": 10000000
                                    },
                                    "service_level": {
                                        "type": [
                                            "string",
                                            "null"
                                        ],
                                        "description": "service speed tier (transport)",
                                        "enum": [
                                            "economy",
                                            "standard",
                                            "express"
                                        ]
                                    },
                                    "parcel": {
                                        "type": "object",
                                        "description": "parcel-aware quote inputs (optional)",
                                        "properties": {
                                            "service_level": {
                                                "type": [
                                                    "string",
                                                    "null"
                                                ]
                                            },
                                            "item_weight_kg": {
                                                "type": [
                                                    "number",
                                                    "null"
                                                ],
                                                "minimum": 0,
                                                "maximum": 200
                                            },
                                            "declared_value": {
                                                "type": [
                                                    "number",
                                                    "null"
                                                ],
                                                "minimum": 0,
                                                "maximum": 500000
                                            }
                                        }
                                    }
                                },
                                "required": [
                                    "dropoff_place_id",
                                    "trip_type",
                                    "waiting_time"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "ok"
                                            ]
                                        },
                                        "store_id": {
                                            "type": [
                                                "integer",
                                                "null"
                                            ]
                                        },
                                        "pickup_place_id": {
                                            "type": "integer"
                                        },
                                        "dropoff_place_id": {
                                            "type": "integer"
                                        },
                                        "trip_type": {
                                            "type": "string",
                                            "enum": [
                                                "roundtrip"
                                            ]
                                        },
                                        "waiting_time": {
                                            "type": "integer"
                                        },
                                        "passenger_count": {
                                            "type": "integer",
                                            "enum": [
                                                1
                                            ]
                                        },
                                        "service_level": {
                                            "type": "string"
                                        },
                                        "requested_service_level": {
                                            "type": "string"
                                        },
                                        "parcel": {
                                            "type": [
                                                "object",
                                                "null"
                                            ],
                                            "properties": {
                                                "requested_service_level": {
                                                    "type": "string"
                                                },
                                                "service_level": {
                                                    "type": "string"
                                                },
                                                "item_weight_kg": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "declared_value": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "requested_service_level",
                                                "service_level",
                                                "item_weight_kg",
                                                "declared_value"
                                            ]
                                        },
                                        "results": {
                                            "type": "array",
                                            "items": {
                                                "type": "string"
                                            },
                                            "minItems": 0,
                                            "maxItems": 0,
                                            "additionalItems": false
                                        }
                                    },
                                    "required": [
                                        "status",
                                        "store_id",
                                        "pickup_place_id",
                                        "dropoff_place_id",
                                        "trip_type",
                                        "waiting_time",
                                        "passenger_count",
                                        "service_level",
                                        "requested_service_level",
                                        "parcel",
                                        "results"
                                    ]
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "anyOf": [
                                        {
                                            "type": "object",
                                            "properties": {
                                                "message": {
                                                    "type": "string",
                                                    "enum": [
                                                        "Sorry, we are unable to provide a fare estimate for this route at the moment."
                                                    ]
                                                },
                                                "status": {
                                                    "type": "string",
                                                    "enum": [
                                                        "error"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "message",
                                                "status"
                                            ]
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "message": {
                                                    "type": "string",
                                                    "enum": [
                                                        "Invalid pickup or dropoff place."
                                                    ]
                                                },
                                                "status": {
                                                    "type": "string",
                                                    "enum": [
                                                        "error"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "message",
                                                "status"
                                            ]
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/delivery-orders/book-from-quote": {
            "post": {
                "operationId": "deliveryOrder.bookFromQuote",
                "summary": "\u2705 BOOK FROM QUOTE (STRICT flow_type + STRICT payment_method + WALLET rules + IDEMPOTENCY)",
                "tags": [
                    "DeliveryOrder"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "quote_id": {
                                        "type": "string"
                                    },
                                    "payment_type_id": {
                                        "type": "string"
                                    },
                                    "flow_type": {
                                        "type": "string",
                                        "enum": [
                                            "store",
                                            "transport",
                                            "parcel"
                                        ]
                                    },
                                    "service_tier": {
                                        "type": [
                                            "string",
                                            "null"
                                        ],
                                        "description": "Phase 3 \u2014 Premium Reliability (MVP)",
                                        "enum": [
                                            "standard",
                                            "guaranteed"
                                        ]
                                    },
                                    "special_instructions": {
                                        "type": [
                                            "string",
                                            "null"
                                        ]
                                    },
                                    "promo_code": {
                                        "type": [
                                            "string",
                                            "null"
                                        ],
                                        "description": "Promotions (platform fee only)",
                                        "maxLength": 40
                                    },
                                    "bundle_key": {
                                        "type": [
                                            "string",
                                            "null"
                                        ],
                                        "maxLength": 40
                                    },
                                    "auto_apply_promo": {
                                        "type": [
                                            "boolean",
                                            "null"
                                        ]
                                    },
                                    "items": {
                                        "type": "string"
                                    },
                                    "idempotency_key": {
                                        "type": "string",
                                        "maxLength": 120
                                    },
                                    "parcel": {
                                        "type": "object",
                                        "properties": {
                                            "sender_name": {
                                                "type": [
                                                    "string",
                                                    "null"
                                                ],
                                                "maxLength": 80
                                            },
                                            "sender_phone": {
                                                "type": [
                                                    "string",
                                                    "null"
                                                ],
                                                "maxLength": 40
                                            },
                                            "recipient_name": {
                                                "type": "string",
                                                "maxLength": 80
                                            },
                                            "recipient_phone": {
                                                "type": "string",
                                                "maxLength": 40
                                            },
                                            "item_category": {
                                                "type": [
                                                    "string",
                                                    "null"
                                                ],
                                                "maxLength": 30
                                            },
                                            "item_weight_kg": {
                                                "type": [
                                                    "number",
                                                    "null"
                                                ],
                                                "minimum": 0,
                                                "maximum": 50
                                            },
                                            "item_description": {
                                                "type": [
                                                    "string",
                                                    "null"
                                                ],
                                                "maxLength": 200
                                            },
                                            "declared_value": {
                                                "type": [
                                                    "number",
                                                    "null"
                                                ],
                                                "minimum": 0,
                                                "maximum": 100000
                                            },
                                            "pickup_note": {
                                                "type": [
                                                    "string",
                                                    "null"
                                                ],
                                                "maxLength": 200
                                            },
                                            "dropoff_note": {
                                                "type": [
                                                    "string",
                                                    "null"
                                                ],
                                                "maxLength": 200
                                            },
                                            "cod_amount": {
                                                "type": [
                                                    "number",
                                                    "null"
                                                ],
                                                "minimum": 0,
                                                "maximum": 100000
                                            }
                                        }
                                    }
                                },
                                "required": [
                                    "quote_id",
                                    "payment_type_id",
                                    "flow_type",
                                    "idempotency_key"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "id": {
                                            "type": "integer"
                                        },
                                        "reference_no": {
                                            "type": "string"
                                        },
                                        "customer_id": {
                                            "type": "integer"
                                        },
                                        "store_id": {
                                            "type": [
                                                "integer",
                                                "null"
                                            ]
                                        },
                                        "vehicle_type_id": {
                                            "anyOf": [
                                                {
                                                    "type": "integer"
                                                },
                                                {
                                                    "type": "integer",
                                                    "enum": [
                                                        0
                                                    ]
                                                }
                                            ]
                                        },
                                        "passenger_count": {
                                            "type": "integer",
                                            "enum": [
                                                1
                                            ]
                                        },
                                        "service_level": {
                                            "type": "string",
                                            "description": "Optional"
                                        },
                                        "speed_multiplier": {
                                            "type": [
                                                "number",
                                                "null"
                                            ]
                                        },
                                        "pickup_address": {
                                            "type": "string"
                                        },
                                        "pickup_latitude": {
                                            "type": [
                                                "number",
                                                "null"
                                            ]
                                        },
                                        "pickup_longitude": {
                                            "type": [
                                                "number",
                                                "null"
                                            ]
                                        },
                                        "dropoff_address": {
                                            "type": "string"
                                        },
                                        "dropoff_latitude": {
                                            "type": [
                                                "number",
                                                "null"
                                            ]
                                        },
                                        "dropoff_longitude": {
                                            "type": [
                                                "number",
                                                "null"
                                            ]
                                        },
                                        "distance": {
                                            "type": "string"
                                        },
                                        "trip_type": {
                                            "type": "string"
                                        },
                                        "payment_type_id": {
                                            "type": "integer"
                                        },
                                        "flow_type": {
                                            "type": "string"
                                        },
                                        "dispatch_status": {
                                            "type": "string"
                                        },
                                        "dispatch_at": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "status": {
                                            "type": "string"
                                        },
                                        "driver_id": {
                                            "type": [
                                                "integer",
                                                "null"
                                            ]
                                        },
                                        "store_status": {
                                            "type": "string"
                                        },
                                        "prep_status": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "fulfillment_label": {
                                            "type": "string",
                                            "enum": [
                                                "Rider en route"
                                            ]
                                        },
                                        "requires_quote_confirmation": {
                                            "type": "boolean",
                                            "description": "Paper/pharmacy request metadata (safe to add fields)"
                                        },
                                        "request_kind": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "request_attachments": {
                                            "anyOf": [
                                                {
                                                    "type": "array",
                                                    "items": {}
                                                },
                                                {
                                                    "type": "null"
                                                },
                                                {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    },
                                                    "minItems": 0,
                                                    "maxItems": 0,
                                                    "additionalItems": false
                                                }
                                            ]
                                        },
                                        "patient_name": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "patient_birthdate": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "request_notes": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "quote_status": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "quote_ready_at": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "quote_accepted_at": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "quote_payload": {
                                            "type": [
                                                "array",
                                                "null"
                                            ],
                                            "items": {}
                                        },
                                        "quote_accept_payload": {
                                            "type": [
                                                "array",
                                                "null"
                                            ],
                                            "items": {}
                                        },
                                        "totals": {
                                            "type": "object",
                                            "properties": {
                                                "items_subtotal": {
                                                    "type": "number"
                                                },
                                                "delivery_fee": {
                                                    "type": "number"
                                                },
                                                "driver_fare": {
                                                    "type": "number"
                                                },
                                                "platform_fee": {
                                                    "type": "number"
                                                },
                                                "payable_total": {
                                                    "type": "number"
                                                }
                                            },
                                            "required": [
                                                "items_subtotal",
                                                "delivery_fee",
                                                "driver_fare",
                                                "platform_fee",
                                                "payable_total"
                                            ]
                                        },
                                        "items": {
                                            "type": "array",
                                            "description": "Normal items",
                                            "items": {
                                                "type": "object",
                                                "properties": {
                                                    "id": {
                                                        "type": "integer"
                                                    },
                                                    "product_id": {
                                                        "type": "integer"
                                                    },
                                                    "name": {
                                                        "type": "string"
                                                    },
                                                    "qty": {
                                                        "type": "integer"
                                                    },
                                                    "price": {
                                                        "type": "number"
                                                    },
                                                    "line_total": {
                                                        "type": "number"
                                                    },
                                                    "notes": {
                                                        "type": "string"
                                                    },
                                                    "state_label": {
                                                        "type": "string",
                                                        "enum": [
                                                            "Rider en route"
                                                        ]
                                                    }
                                                },
                                                "required": [
                                                    "id",
                                                    "product_id",
                                                    "name",
                                                    "qty",
                                                    "price",
                                                    "line_total",
                                                    "notes",
                                                    "state_label"
                                                ]
                                            }
                                        },
                                        "custom_items": {
                                            "type": "string",
                                            "description": "Custom items (paper/pharmacy confirmed list)"
                                        },
                                        "quote_items": {
                                            "type": "array",
                                            "description": "Quote preview (paper/pharmacy) before customer confirms",
                                            "prefixItems": [
                                                {
                                                    "type": "object",
                                                    "properties": {
                                                        "name": {
                                                            "type": "string"
                                                        },
                                                        "qty": {
                                                            "type": "integer"
                                                        },
                                                        "price": {
                                                            "type": "number"
                                                        },
                                                        "line_total": {
                                                            "type": "number"
                                                        },
                                                        "notes": {
                                                            "type": [
                                                                "string",
                                                                "null"
                                                            ]
                                                        },
                                                        "substitutions": {
                                                            "anyOf": [
                                                                {
                                                                    "type": "string"
                                                                },
                                                                {
                                                                    "type": "array",
                                                                    "items": {
                                                                        "type": "string"
                                                                    },
                                                                    "minItems": 0,
                                                                    "maxItems": 0,
                                                                    "additionalItems": false
                                                                }
                                                            ]
                                                        }
                                                    },
                                                    "required": [
                                                        "name",
                                                        "qty",
                                                        "price",
                                                        "line_total",
                                                        "notes",
                                                        "substitutions"
                                                    ]
                                                }
                                            ],
                                            "minItems": 1,
                                            "maxItems": 1,
                                            "additionalItems": false
                                        },
                                        "driver": {
                                            "type": [
                                                "object",
                                                "null"
                                            ],
                                            "properties": {
                                                "id": {
                                                    "type": "integer"
                                                },
                                                "name": {
                                                    "type": "string"
                                                },
                                                "phone": {
                                                    "type": "string"
                                                },
                                                "plate_number": {
                                                    "type": "string"
                                                },
                                                "location": {
                                                    "type": [
                                                        "object",
                                                        "null"
                                                    ],
                                                    "description": "\u2705 GPS + freshness for live map UI",
                                                    "properties": {
                                                        "latitude": {
                                                            "type": "number"
                                                        },
                                                        "longitude": {
                                                            "type": "number"
                                                        },
                                                        "updated_at": {
                                                            "type": [
                                                                "string",
                                                                "null"
                                                            ]
                                                        },
                                                        "last_seen_at": {
                                                            "type": [
                                                                "string",
                                                                "null"
                                                            ]
                                                        }
                                                    },
                                                    "required": [
                                                        "latitude",
                                                        "longitude",
                                                        "updated_at",
                                                        "last_seen_at"
                                                    ]
                                                },
                                                "location_stale": {
                                                    "type": [
                                                        "boolean",
                                                        "null"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "id",
                                                "name",
                                                "phone",
                                                "plate_number",
                                                "location",
                                                "location_stale"
                                            ]
                                        },
                                        "store": {
                                            "type": [
                                                "object",
                                                "null"
                                            ],
                                            "properties": {
                                                "id": {
                                                    "type": "integer"
                                                },
                                                "name": {
                                                    "type": "string"
                                                },
                                                "address": {
                                                    "type": "string"
                                                }
                                            },
                                            "required": [
                                                "id",
                                                "name",
                                                "address"
                                            ]
                                        },
                                        "parcel": {
                                            "type": [
                                                "object",
                                                "null"
                                            ],
                                            "properties": {
                                                "sender_name": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "sender_phone": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "recipient_name": {
                                                    "type": "string"
                                                },
                                                "recipient_phone": {
                                                    "type": "string"
                                                },
                                                "item_category": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "item_weight_kg": {
                                                    "type": [
                                                        "number",
                                                        "null"
                                                    ]
                                                },
                                                "item_description": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "declared_value": {
                                                    "type": [
                                                        "number",
                                                        "null"
                                                    ]
                                                },
                                                "pickup_note": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "dropoff_note": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "cod_amount": {
                                                    "type": [
                                                        "number",
                                                        "null"
                                                    ]
                                                },
                                                "cod_status": {
                                                    "type": "string"
                                                },
                                                "cod_collected_at": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "cod_remitted_at": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "cod_settled_at": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "cod_receiver_name": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "cod_notes": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "cod_proof_url": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "cod_proof_thumb_url": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "sender_name",
                                                "sender_phone",
                                                "recipient_name",
                                                "recipient_phone",
                                                "item_category",
                                                "item_weight_kg",
                                                "item_description",
                                                "declared_value",
                                                "pickup_note",
                                                "dropoff_note",
                                                "cod_amount",
                                                "cod_status",
                                                "cod_collected_at",
                                                "cod_remitted_at",
                                                "cod_settled_at",
                                                "cod_receiver_name",
                                                "cod_notes",
                                                "cod_proof_url",
                                                "cod_proof_thumb_url"
                                            ]
                                        },
                                        "payment_method": {
                                            "type": "string"
                                        },
                                        "payment_status": {
                                            "type": "string"
                                        },
                                        "payment_reference": {
                                            "type": "string"
                                        },
                                        "cod_confirmation_pending": {
                                            "type": "boolean",
                                            "description": "Phase 4: COD OTP confirmation hints (for UI)."
                                        },
                                        "cod_confirmation_expires_at": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "payment_receipt_path": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "payment_receipt_url": {
                                            "type": "string"
                                        },
                                        "payment_receipt_thumb_url": {
                                            "type": "string"
                                        },
                                        "delivery_fee_prepaid_points": {
                                            "anyOf": [
                                                {
                                                    "type": "integer"
                                                },
                                                {
                                                    "type": "integer",
                                                    "enum": [
                                                        0
                                                    ]
                                                }
                                            ]
                                        },
                                        "delivery_fee_prepaid_at": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "payment_submitted_at": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "payment_verified_at": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "payment_expires_at": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "payment_rejection_reason": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "id",
                                        "reference_no",
                                        "customer_id",
                                        "store_id",
                                        "vehicle_type_id",
                                        "passenger_count",
                                        "service_level",
                                        "speed_multiplier",
                                        "pickup_address",
                                        "pickup_latitude",
                                        "pickup_longitude",
                                        "dropoff_address",
                                        "dropoff_latitude",
                                        "dropoff_longitude",
                                        "distance",
                                        "trip_type",
                                        "payment_type_id",
                                        "flow_type",
                                        "dispatch_status",
                                        "dispatch_at",
                                        "status",
                                        "driver_id",
                                        "store_status",
                                        "prep_status",
                                        "fulfillment_label",
                                        "requires_quote_confirmation",
                                        "request_kind",
                                        "request_attachments",
                                        "patient_name",
                                        "patient_birthdate",
                                        "request_notes",
                                        "quote_status",
                                        "quote_ready_at",
                                        "quote_accepted_at",
                                        "quote_payload",
                                        "quote_accept_payload",
                                        "totals",
                                        "items",
                                        "custom_items",
                                        "quote_items",
                                        "driver",
                                        "store",
                                        "parcel",
                                        "payment_method",
                                        "payment_status",
                                        "payment_reference",
                                        "cod_confirmation_pending",
                                        "cod_confirmation_expires_at",
                                        "payment_receipt_path",
                                        "payment_receipt_url",
                                        "payment_receipt_thumb_url",
                                        "delivery_fee_prepaid_points",
                                        "delivery_fee_prepaid_at",
                                        "payment_submitted_at",
                                        "payment_verified_at",
                                        "payment_expires_at",
                                        "payment_rejection_reason"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "200": {
                        "description": "When replaying an idempotent booking request, respond with the\nsame shape as other endpoints that wrap the order inside an\n`order` key.  This allows callers to inspect the existing\norder via `order.id` without changing the default shape for\nbrand new bookings (which return fields at the root).",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "order": {
                                            "type": "object",
                                            "properties": {
                                                "id": {
                                                    "type": "integer"
                                                },
                                                "reference_no": {
                                                    "type": "string"
                                                },
                                                "customer_id": {
                                                    "type": "integer"
                                                },
                                                "store_id": {
                                                    "type": [
                                                        "integer",
                                                        "null"
                                                    ]
                                                },
                                                "vehicle_type_id": {
                                                    "anyOf": [
                                                        {
                                                            "type": "integer"
                                                        },
                                                        {
                                                            "type": "integer",
                                                            "enum": [
                                                                0
                                                            ]
                                                        }
                                                    ]
                                                },
                                                "passenger_count": {
                                                    "type": "integer",
                                                    "enum": [
                                                        1
                                                    ]
                                                },
                                                "service_level": {
                                                    "type": "string",
                                                    "description": "Optional"
                                                },
                                                "speed_multiplier": {
                                                    "type": [
                                                        "number",
                                                        "null"
                                                    ]
                                                },
                                                "pickup_address": {
                                                    "type": "string"
                                                },
                                                "pickup_latitude": {
                                                    "type": [
                                                        "number",
                                                        "null"
                                                    ]
                                                },
                                                "pickup_longitude": {
                                                    "type": [
                                                        "number",
                                                        "null"
                                                    ]
                                                },
                                                "dropoff_address": {
                                                    "type": "string"
                                                },
                                                "dropoff_latitude": {
                                                    "type": [
                                                        "number",
                                                        "null"
                                                    ]
                                                },
                                                "dropoff_longitude": {
                                                    "type": [
                                                        "number",
                                                        "null"
                                                    ]
                                                },
                                                "distance": {
                                                    "type": "string"
                                                },
                                                "trip_type": {
                                                    "type": "string"
                                                },
                                                "payment_type_id": {
                                                    "type": "integer"
                                                },
                                                "flow_type": {
                                                    "type": "string"
                                                },
                                                "dispatch_status": {
                                                    "type": "string"
                                                },
                                                "dispatch_at": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "status": {
                                                    "type": "string"
                                                },
                                                "driver_id": {
                                                    "type": [
                                                        "integer",
                                                        "null"
                                                    ]
                                                },
                                                "store_status": {
                                                    "type": "string"
                                                },
                                                "prep_status": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "fulfillment_label": {
                                                    "type": "string",
                                                    "enum": [
                                                        "Rider en route"
                                                    ]
                                                },
                                                "requires_quote_confirmation": {
                                                    "type": "boolean",
                                                    "description": "Paper/pharmacy request metadata (safe to add fields)"
                                                },
                                                "request_kind": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "request_attachments": {
                                                    "anyOf": [
                                                        {
                                                            "type": "array",
                                                            "items": {}
                                                        },
                                                        {
                                                            "type": "null"
                                                        },
                                                        {
                                                            "type": "array",
                                                            "items": {
                                                                "type": "string"
                                                            },
                                                            "minItems": 0,
                                                            "maxItems": 0,
                                                            "additionalItems": false
                                                        }
                                                    ]
                                                },
                                                "patient_name": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "patient_birthdate": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "request_notes": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "quote_status": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "quote_ready_at": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "quote_accepted_at": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "quote_payload": {
                                                    "type": [
                                                        "array",
                                                        "null"
                                                    ],
                                                    "items": {}
                                                },
                                                "quote_accept_payload": {
                                                    "type": [
                                                        "array",
                                                        "null"
                                                    ],
                                                    "items": {}
                                                },
                                                "totals": {
                                                    "type": "object",
                                                    "properties": {
                                                        "items_subtotal": {
                                                            "type": "number"
                                                        },
                                                        "delivery_fee": {
                                                            "type": "number"
                                                        },
                                                        "driver_fare": {
                                                            "type": "number"
                                                        },
                                                        "platform_fee": {
                                                            "type": "number"
                                                        },
                                                        "payable_total": {
                                                            "type": "number"
                                                        }
                                                    },
                                                    "required": [
                                                        "items_subtotal",
                                                        "delivery_fee",
                                                        "driver_fare",
                                                        "platform_fee",
                                                        "payable_total"
                                                    ]
                                                },
                                                "items": {
                                                    "type": "array",
                                                    "description": "Normal items",
                                                    "items": {
                                                        "type": "object",
                                                        "properties": {
                                                            "id": {
                                                                "type": "integer"
                                                            },
                                                            "product_id": {
                                                                "type": "integer"
                                                            },
                                                            "name": {
                                                                "type": "string"
                                                            },
                                                            "qty": {
                                                                "type": "integer"
                                                            },
                                                            "price": {
                                                                "type": "number"
                                                            },
                                                            "line_total": {
                                                                "type": "number"
                                                            },
                                                            "notes": {
                                                                "type": "string"
                                                            },
                                                            "state_label": {
                                                                "type": "string",
                                                                "enum": [
                                                                    "Rider en route"
                                                                ]
                                                            }
                                                        },
                                                        "required": [
                                                            "id",
                                                            "product_id",
                                                            "name",
                                                            "qty",
                                                            "price",
                                                            "line_total",
                                                            "notes",
                                                            "state_label"
                                                        ]
                                                    }
                                                },
                                                "custom_items": {
                                                    "type": "string",
                                                    "description": "Custom items (paper/pharmacy confirmed list)"
                                                },
                                                "quote_items": {
                                                    "type": "array",
                                                    "description": "Quote preview (paper/pharmacy) before customer confirms",
                                                    "prefixItems": [
                                                        {
                                                            "type": "object",
                                                            "properties": {
                                                                "name": {
                                                                    "type": "string"
                                                                },
                                                                "qty": {
                                                                    "type": "integer"
                                                                },
                                                                "price": {
                                                                    "type": "number"
                                                                },
                                                                "line_total": {
                                                                    "type": "number"
                                                                },
                                                                "notes": {
                                                                    "type": [
                                                                        "string",
                                                                        "null"
                                                                    ]
                                                                },
                                                                "substitutions": {
                                                                    "anyOf": [
                                                                        {
                                                                            "type": "string"
                                                                        },
                                                                        {
                                                                            "type": "array",
                                                                            "items": {
                                                                                "type": "string"
                                                                            },
                                                                            "minItems": 0,
                                                                            "maxItems": 0,
                                                                            "additionalItems": false
                                                                        }
                                                                    ]
                                                                }
                                                            },
                                                            "required": [
                                                                "name",
                                                                "qty",
                                                                "price",
                                                                "line_total",
                                                                "notes",
                                                                "substitutions"
                                                            ]
                                                        }
                                                    ],
                                                    "minItems": 1,
                                                    "maxItems": 1,
                                                    "additionalItems": false
                                                },
                                                "driver": {
                                                    "type": [
                                                        "object",
                                                        "null"
                                                    ],
                                                    "properties": {
                                                        "id": {
                                                            "type": "integer"
                                                        },
                                                        "name": {
                                                            "type": "string"
                                                        },
                                                        "phone": {
                                                            "type": "string"
                                                        },
                                                        "plate_number": {
                                                            "type": "string"
                                                        },
                                                        "location": {
                                                            "type": [
                                                                "object",
                                                                "null"
                                                            ],
                                                            "description": "\u2705 GPS + freshness for live map UI",
                                                            "properties": {
                                                                "latitude": {
                                                                    "type": "number"
                                                                },
                                                                "longitude": {
                                                                    "type": "number"
                                                                },
                                                                "updated_at": {
                                                                    "type": [
                                                                        "string",
                                                                        "null"
                                                                    ]
                                                                },
                                                                "last_seen_at": {
                                                                    "type": [
                                                                        "string",
                                                                        "null"
                                                                    ]
                                                                }
                                                            },
                                                            "required": [
                                                                "latitude",
                                                                "longitude",
                                                                "updated_at",
                                                                "last_seen_at"
                                                            ]
                                                        },
                                                        "location_stale": {
                                                            "type": [
                                                                "boolean",
                                                                "null"
                                                            ]
                                                        }
                                                    },
                                                    "required": [
                                                        "id",
                                                        "name",
                                                        "phone",
                                                        "plate_number",
                                                        "location",
                                                        "location_stale"
                                                    ]
                                                },
                                                "store": {
                                                    "type": [
                                                        "object",
                                                        "null"
                                                    ],
                                                    "properties": {
                                                        "id": {
                                                            "type": "integer"
                                                        },
                                                        "name": {
                                                            "type": "string"
                                                        },
                                                        "address": {
                                                            "type": "string"
                                                        }
                                                    },
                                                    "required": [
                                                        "id",
                                                        "name",
                                                        "address"
                                                    ]
                                                },
                                                "parcel": {
                                                    "type": [
                                                        "object",
                                                        "null"
                                                    ],
                                                    "properties": {
                                                        "sender_name": {
                                                            "type": [
                                                                "string",
                                                                "null"
                                                            ]
                                                        },
                                                        "sender_phone": {
                                                            "type": [
                                                                "string",
                                                                "null"
                                                            ]
                                                        },
                                                        "recipient_name": {
                                                            "type": "string"
                                                        },
                                                        "recipient_phone": {
                                                            "type": "string"
                                                        },
                                                        "item_category": {
                                                            "type": [
                                                                "string",
                                                                "null"
                                                            ]
                                                        },
                                                        "item_weight_kg": {
                                                            "type": [
                                                                "number",
                                                                "null"
                                                            ]
                                                        },
                                                        "item_description": {
                                                            "type": [
                                                                "string",
                                                                "null"
                                                            ]
                                                        },
                                                        "declared_value": {
                                                            "type": [
                                                                "number",
                                                                "null"
                                                            ]
                                                        },
                                                        "pickup_note": {
                                                            "type": [
                                                                "string",
                                                                "null"
                                                            ]
                                                        },
                                                        "dropoff_note": {
                                                            "type": [
                                                                "string",
                                                                "null"
                                                            ]
                                                        },
                                                        "cod_amount": {
                                                            "type": [
                                                                "number",
                                                                "null"
                                                            ]
                                                        },
                                                        "cod_status": {
                                                            "type": "string"
                                                        },
                                                        "cod_collected_at": {
                                                            "type": [
                                                                "string",
                                                                "null"
                                                            ]
                                                        },
                                                        "cod_remitted_at": {
                                                            "type": [
                                                                "string",
                                                                "null"
                                                            ]
                                                        },
                                                        "cod_settled_at": {
                                                            "type": [
                                                                "string",
                                                                "null"
                                                            ]
                                                        },
                                                        "cod_receiver_name": {
                                                            "type": [
                                                                "string",
                                                                "null"
                                                            ]
                                                        },
                                                        "cod_notes": {
                                                            "type": [
                                                                "string",
                                                                "null"
                                                            ]
                                                        },
                                                        "cod_proof_url": {
                                                            "type": [
                                                                "string",
                                                                "null"
                                                            ]
                                                        },
                                                        "cod_proof_thumb_url": {
                                                            "type": [
                                                                "string",
                                                                "null"
                                                            ]
                                                        }
                                                    },
                                                    "required": [
                                                        "sender_name",
                                                        "sender_phone",
                                                        "recipient_name",
                                                        "recipient_phone",
                                                        "item_category",
                                                        "item_weight_kg",
                                                        "item_description",
                                                        "declared_value",
                                                        "pickup_note",
                                                        "dropoff_note",
                                                        "cod_amount",
                                                        "cod_status",
                                                        "cod_collected_at",
                                                        "cod_remitted_at",
                                                        "cod_settled_at",
                                                        "cod_receiver_name",
                                                        "cod_notes",
                                                        "cod_proof_url",
                                                        "cod_proof_thumb_url"
                                                    ]
                                                },
                                                "payment_method": {
                                                    "type": "string"
                                                },
                                                "payment_status": {
                                                    "type": "string"
                                                },
                                                "payment_reference": {
                                                    "type": "string"
                                                },
                                                "cod_confirmation_pending": {
                                                    "type": "boolean",
                                                    "description": "Phase 4: COD OTP confirmation hints (for UI)."
                                                },
                                                "cod_confirmation_expires_at": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "payment_receipt_path": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "payment_receipt_url": {
                                                    "type": "string"
                                                },
                                                "payment_receipt_thumb_url": {
                                                    "type": "string"
                                                },
                                                "delivery_fee_prepaid_points": {
                                                    "anyOf": [
                                                        {
                                                            "type": "integer"
                                                        },
                                                        {
                                                            "type": "integer",
                                                            "enum": [
                                                                0
                                                            ]
                                                        }
                                                    ]
                                                },
                                                "delivery_fee_prepaid_at": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "payment_submitted_at": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "payment_verified_at": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "payment_expires_at": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "payment_rejection_reason": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "id",
                                                "reference_no",
                                                "customer_id",
                                                "store_id",
                                                "vehicle_type_id",
                                                "passenger_count",
                                                "service_level",
                                                "speed_multiplier",
                                                "pickup_address",
                                                "pickup_latitude",
                                                "pickup_longitude",
                                                "dropoff_address",
                                                "dropoff_latitude",
                                                "dropoff_longitude",
                                                "distance",
                                                "trip_type",
                                                "payment_type_id",
                                                "flow_type",
                                                "dispatch_status",
                                                "dispatch_at",
                                                "status",
                                                "driver_id",
                                                "store_status",
                                                "prep_status",
                                                "fulfillment_label",
                                                "requires_quote_confirmation",
                                                "request_kind",
                                                "request_attachments",
                                                "patient_name",
                                                "patient_birthdate",
                                                "request_notes",
                                                "quote_status",
                                                "quote_ready_at",
                                                "quote_accepted_at",
                                                "quote_payload",
                                                "quote_accept_payload",
                                                "totals",
                                                "items",
                                                "custom_items",
                                                "quote_items",
                                                "driver",
                                                "store",
                                                "parcel",
                                                "payment_method",
                                                "payment_status",
                                                "payment_reference",
                                                "cod_confirmation_pending",
                                                "cod_confirmation_expires_at",
                                                "payment_receipt_path",
                                                "payment_receipt_url",
                                                "payment_receipt_thumb_url",
                                                "delivery_fee_prepaid_points",
                                                "delivery_fee_prepaid_at",
                                                "payment_submitted_at",
                                                "payment_verified_at",
                                                "payment_expires_at",
                                                "payment_rejection_reason"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "order"
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/delivery-orders/book-paper-from-quote": {
            "post": {
                "operationId": "deliveryOrder.bookPaperFromQuote",
                "description": "Creates a store flow order WITHOUT cart items. Merchant will prepare a quote, then customer confirms + pays.",
                "summary": "Customer books a store order where the item list comes from a paper/request (Rx photo, receipt, handwritten list)",
                "tags": [
                    "DeliveryOrder"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "quote_id": {
                                        "type": "string"
                                    },
                                    "payment_type_id": {
                                        "type": "string"
                                    },
                                    "kind": {
                                        "type": "string",
                                        "enum": [
                                            "pharmacy_rx",
                                            "pharmacy_otc",
                                            "paper_receipt",
                                            "paper_list"
                                        ]
                                    },
                                    "patient_name": {
                                        "type": [
                                            "string",
                                            "null"
                                        ],
                                        "maxLength": 120
                                    },
                                    "patient_birthdate": {
                                        "type": [
                                            "string",
                                            "null"
                                        ],
                                        "format": "date-time"
                                    },
                                    "notes": {
                                        "type": [
                                            "string",
                                            "null"
                                        ],
                                        "maxLength": 1000
                                    },
                                    "special_instructions": {
                                        "type": [
                                            "string",
                                            "null"
                                        ],
                                        "maxLength": 1000
                                    },
                                    "idempotency_key": {
                                        "type": "string",
                                        "description": "idempotency",
                                        "maxLength": 120
                                    },
                                    "attachments": {
                                        "type": [
                                            "array",
                                            "null"
                                        ],
                                        "description": "uploads (multipart)",
                                        "items": {
                                            "type": "string",
                                            "format": "binary",
                                            "contentMediaType": "application/octet-stream",
                                            "maxLength": 8192
                                        }
                                    }
                                },
                                "required": [
                                    "quote_id",
                                    "payment_type_id",
                                    "kind",
                                    "idempotency_key"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "id": {
                                            "type": "integer"
                                        },
                                        "reference_no": {
                                            "type": "string"
                                        },
                                        "customer_id": {
                                            "type": "integer"
                                        },
                                        "store_id": {
                                            "type": [
                                                "integer",
                                                "null"
                                            ]
                                        },
                                        "vehicle_type_id": {
                                            "anyOf": [
                                                {
                                                    "type": "integer"
                                                },
                                                {
                                                    "type": "integer",
                                                    "enum": [
                                                        0
                                                    ]
                                                }
                                            ]
                                        },
                                        "passenger_count": {
                                            "type": "integer",
                                            "enum": [
                                                1
                                            ]
                                        },
                                        "service_level": {
                                            "type": "string",
                                            "description": "Optional"
                                        },
                                        "speed_multiplier": {
                                            "type": [
                                                "number",
                                                "null"
                                            ]
                                        },
                                        "pickup_address": {
                                            "type": "string"
                                        },
                                        "pickup_latitude": {
                                            "type": [
                                                "number",
                                                "null"
                                            ]
                                        },
                                        "pickup_longitude": {
                                            "type": [
                                                "number",
                                                "null"
                                            ]
                                        },
                                        "dropoff_address": {
                                            "type": "string"
                                        },
                                        "dropoff_latitude": {
                                            "type": [
                                                "number",
                                                "null"
                                            ]
                                        },
                                        "dropoff_longitude": {
                                            "type": [
                                                "number",
                                                "null"
                                            ]
                                        },
                                        "distance": {
                                            "type": "string"
                                        },
                                        "trip_type": {
                                            "type": "string"
                                        },
                                        "payment_type_id": {
                                            "type": "integer"
                                        },
                                        "flow_type": {
                                            "type": "string"
                                        },
                                        "dispatch_status": {
                                            "type": "string"
                                        },
                                        "dispatch_at": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "status": {
                                            "type": "string"
                                        },
                                        "driver_id": {
                                            "type": [
                                                "integer",
                                                "null"
                                            ]
                                        },
                                        "store_status": {
                                            "type": "string"
                                        },
                                        "prep_status": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "fulfillment_label": {
                                            "type": "string",
                                            "enum": [
                                                "Rider en route"
                                            ]
                                        },
                                        "requires_quote_confirmation": {
                                            "type": "boolean",
                                            "description": "Paper/pharmacy request metadata (safe to add fields)"
                                        },
                                        "request_kind": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "request_attachments": {
                                            "anyOf": [
                                                {
                                                    "type": "array",
                                                    "items": {}
                                                },
                                                {
                                                    "type": "null"
                                                },
                                                {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    },
                                                    "minItems": 0,
                                                    "maxItems": 0,
                                                    "additionalItems": false
                                                }
                                            ]
                                        },
                                        "patient_name": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "patient_birthdate": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "request_notes": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "quote_status": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "quote_ready_at": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "quote_accepted_at": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "quote_payload": {
                                            "type": [
                                                "array",
                                                "null"
                                            ],
                                            "items": {}
                                        },
                                        "quote_accept_payload": {
                                            "type": [
                                                "array",
                                                "null"
                                            ],
                                            "items": {}
                                        },
                                        "totals": {
                                            "type": "object",
                                            "properties": {
                                                "items_subtotal": {
                                                    "type": "number"
                                                },
                                                "delivery_fee": {
                                                    "type": "number"
                                                },
                                                "driver_fare": {
                                                    "type": "number"
                                                },
                                                "platform_fee": {
                                                    "type": "number"
                                                },
                                                "payable_total": {
                                                    "type": "number"
                                                }
                                            },
                                            "required": [
                                                "items_subtotal",
                                                "delivery_fee",
                                                "driver_fare",
                                                "platform_fee",
                                                "payable_total"
                                            ]
                                        },
                                        "items": {
                                            "type": "array",
                                            "description": "Normal items",
                                            "items": {
                                                "type": "object",
                                                "properties": {
                                                    "id": {
                                                        "type": "integer"
                                                    },
                                                    "product_id": {
                                                        "type": "integer"
                                                    },
                                                    "name": {
                                                        "type": "string"
                                                    },
                                                    "qty": {
                                                        "type": "integer"
                                                    },
                                                    "price": {
                                                        "type": "number"
                                                    },
                                                    "line_total": {
                                                        "type": "number"
                                                    },
                                                    "notes": {
                                                        "type": "string"
                                                    },
                                                    "state_label": {
                                                        "type": "string",
                                                        "enum": [
                                                            "Rider en route"
                                                        ]
                                                    }
                                                },
                                                "required": [
                                                    "id",
                                                    "product_id",
                                                    "name",
                                                    "qty",
                                                    "price",
                                                    "line_total",
                                                    "notes",
                                                    "state_label"
                                                ]
                                            }
                                        },
                                        "custom_items": {
                                            "type": "string",
                                            "description": "Custom items (paper/pharmacy confirmed list)"
                                        },
                                        "quote_items": {
                                            "type": "array",
                                            "description": "Quote preview (paper/pharmacy) before customer confirms",
                                            "prefixItems": [
                                                {
                                                    "type": "object",
                                                    "properties": {
                                                        "name": {
                                                            "type": "string"
                                                        },
                                                        "qty": {
                                                            "type": "integer"
                                                        },
                                                        "price": {
                                                            "type": "number"
                                                        },
                                                        "line_total": {
                                                            "type": "number"
                                                        },
                                                        "notes": {
                                                            "type": [
                                                                "string",
                                                                "null"
                                                            ]
                                                        },
                                                        "substitutions": {
                                                            "anyOf": [
                                                                {
                                                                    "type": "string"
                                                                },
                                                                {
                                                                    "type": "array",
                                                                    "items": {
                                                                        "type": "string"
                                                                    },
                                                                    "minItems": 0,
                                                                    "maxItems": 0,
                                                                    "additionalItems": false
                                                                }
                                                            ]
                                                        }
                                                    },
                                                    "required": [
                                                        "name",
                                                        "qty",
                                                        "price",
                                                        "line_total",
                                                        "notes",
                                                        "substitutions"
                                                    ]
                                                }
                                            ],
                                            "minItems": 1,
                                            "maxItems": 1,
                                            "additionalItems": false
                                        },
                                        "driver": {
                                            "type": [
                                                "object",
                                                "null"
                                            ],
                                            "properties": {
                                                "id": {
                                                    "type": "integer"
                                                },
                                                "name": {
                                                    "type": "string"
                                                },
                                                "phone": {
                                                    "type": "string"
                                                },
                                                "plate_number": {
                                                    "type": "string"
                                                },
                                                "location": {
                                                    "type": [
                                                        "object",
                                                        "null"
                                                    ],
                                                    "description": "\u2705 GPS + freshness for live map UI",
                                                    "properties": {
                                                        "latitude": {
                                                            "type": "number"
                                                        },
                                                        "longitude": {
                                                            "type": "number"
                                                        },
                                                        "updated_at": {
                                                            "type": [
                                                                "string",
                                                                "null"
                                                            ]
                                                        },
                                                        "last_seen_at": {
                                                            "type": [
                                                                "string",
                                                                "null"
                                                            ]
                                                        }
                                                    },
                                                    "required": [
                                                        "latitude",
                                                        "longitude",
                                                        "updated_at",
                                                        "last_seen_at"
                                                    ]
                                                },
                                                "location_stale": {
                                                    "type": [
                                                        "boolean",
                                                        "null"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "id",
                                                "name",
                                                "phone",
                                                "plate_number",
                                                "location",
                                                "location_stale"
                                            ]
                                        },
                                        "store": {
                                            "type": [
                                                "object",
                                                "null"
                                            ],
                                            "properties": {
                                                "id": {
                                                    "type": "integer"
                                                },
                                                "name": {
                                                    "type": "string"
                                                },
                                                "address": {
                                                    "type": "string"
                                                }
                                            },
                                            "required": [
                                                "id",
                                                "name",
                                                "address"
                                            ]
                                        },
                                        "parcel": {
                                            "type": [
                                                "object",
                                                "null"
                                            ],
                                            "properties": {
                                                "sender_name": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "sender_phone": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "recipient_name": {
                                                    "type": "string"
                                                },
                                                "recipient_phone": {
                                                    "type": "string"
                                                },
                                                "item_category": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "item_weight_kg": {
                                                    "type": [
                                                        "number",
                                                        "null"
                                                    ]
                                                },
                                                "item_description": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "declared_value": {
                                                    "type": [
                                                        "number",
                                                        "null"
                                                    ]
                                                },
                                                "pickup_note": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "dropoff_note": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "cod_amount": {
                                                    "type": [
                                                        "number",
                                                        "null"
                                                    ]
                                                },
                                                "cod_status": {
                                                    "type": "string"
                                                },
                                                "cod_collected_at": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "cod_remitted_at": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "cod_settled_at": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "cod_receiver_name": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "cod_notes": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "cod_proof_url": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "cod_proof_thumb_url": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "sender_name",
                                                "sender_phone",
                                                "recipient_name",
                                                "recipient_phone",
                                                "item_category",
                                                "item_weight_kg",
                                                "item_description",
                                                "declared_value",
                                                "pickup_note",
                                                "dropoff_note",
                                                "cod_amount",
                                                "cod_status",
                                                "cod_collected_at",
                                                "cod_remitted_at",
                                                "cod_settled_at",
                                                "cod_receiver_name",
                                                "cod_notes",
                                                "cod_proof_url",
                                                "cod_proof_thumb_url"
                                            ]
                                        },
                                        "payment_method": {
                                            "type": "string"
                                        },
                                        "payment_status": {
                                            "type": "string"
                                        },
                                        "payment_reference": {
                                            "type": "string"
                                        },
                                        "cod_confirmation_pending": {
                                            "type": "boolean",
                                            "description": "Phase 4: COD OTP confirmation hints (for UI)."
                                        },
                                        "cod_confirmation_expires_at": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "payment_receipt_path": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "payment_receipt_url": {
                                            "type": "string"
                                        },
                                        "payment_receipt_thumb_url": {
                                            "type": "string"
                                        },
                                        "delivery_fee_prepaid_points": {
                                            "anyOf": [
                                                {
                                                    "type": "integer"
                                                },
                                                {
                                                    "type": "integer",
                                                    "enum": [
                                                        0
                                                    ]
                                                }
                                            ]
                                        },
                                        "delivery_fee_prepaid_at": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "payment_submitted_at": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "payment_verified_at": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "payment_expires_at": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "payment_rejection_reason": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "id",
                                        "reference_no",
                                        "customer_id",
                                        "store_id",
                                        "vehicle_type_id",
                                        "passenger_count",
                                        "service_level",
                                        "speed_multiplier",
                                        "pickup_address",
                                        "pickup_latitude",
                                        "pickup_longitude",
                                        "dropoff_address",
                                        "dropoff_latitude",
                                        "dropoff_longitude",
                                        "distance",
                                        "trip_type",
                                        "payment_type_id",
                                        "flow_type",
                                        "dispatch_status",
                                        "dispatch_at",
                                        "status",
                                        "driver_id",
                                        "store_status",
                                        "prep_status",
                                        "fulfillment_label",
                                        "requires_quote_confirmation",
                                        "request_kind",
                                        "request_attachments",
                                        "patient_name",
                                        "patient_birthdate",
                                        "request_notes",
                                        "quote_status",
                                        "quote_ready_at",
                                        "quote_accepted_at",
                                        "quote_payload",
                                        "quote_accept_payload",
                                        "totals",
                                        "items",
                                        "custom_items",
                                        "quote_items",
                                        "driver",
                                        "store",
                                        "parcel",
                                        "payment_method",
                                        "payment_status",
                                        "payment_reference",
                                        "cod_confirmation_pending",
                                        "cod_confirmation_expires_at",
                                        "payment_receipt_path",
                                        "payment_receipt_url",
                                        "payment_receipt_thumb_url",
                                        "delivery_fee_prepaid_points",
                                        "delivery_fee_prepaid_at",
                                        "payment_submitted_at",
                                        "payment_verified_at",
                                        "payment_expires_at",
                                        "payment_rejection_reason"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/delivery-orders/{delivery_order}/paper/confirm": {
            "post": {
                "operationId": "deliveryOrder.confirmPaperQuote",
                "summary": "Customer approves the pharmacist/merchant quote and pays (wallet-only). Dispatch is not allowed before this",
                "tags": [
                    "DeliveryOrder"
                ],
                "parameters": [
                    {
                        "name": "delivery_order",
                        "in": "path",
                        "required": true,
                        "description": "The delivery order ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "accept": {
                                        "type": "boolean"
                                    },
                                    "selected_substitutions": {
                                        "type": "array",
                                        "items": {
                                            "type": "object",
                                            "properties": {
                                                "item_index": {
                                                    "type": "integer",
                                                    "minimum": 0
                                                },
                                                "option_index": {
                                                    "type": "integer",
                                                    "minimum": 0
                                                }
                                            }
                                        }
                                    }
                                },
                                "required": [
                                    "accept"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "id": {
                                            "type": "integer"
                                        },
                                        "reference_no": {
                                            "type": "string"
                                        },
                                        "customer_id": {
                                            "type": "integer"
                                        },
                                        "store_id": {
                                            "type": [
                                                "integer",
                                                "null"
                                            ]
                                        },
                                        "vehicle_type_id": {
                                            "anyOf": [
                                                {
                                                    "type": "integer"
                                                },
                                                {
                                                    "type": "integer",
                                                    "enum": [
                                                        0
                                                    ]
                                                }
                                            ]
                                        },
                                        "passenger_count": {
                                            "type": "integer",
                                            "enum": [
                                                1
                                            ]
                                        },
                                        "service_level": {
                                            "type": "string",
                                            "description": "Optional"
                                        },
                                        "speed_multiplier": {
                                            "type": [
                                                "number",
                                                "null"
                                            ]
                                        },
                                        "pickup_address": {
                                            "type": "string"
                                        },
                                        "pickup_latitude": {
                                            "type": [
                                                "number",
                                                "null"
                                            ]
                                        },
                                        "pickup_longitude": {
                                            "type": [
                                                "number",
                                                "null"
                                            ]
                                        },
                                        "dropoff_address": {
                                            "type": "string"
                                        },
                                        "dropoff_latitude": {
                                            "type": [
                                                "number",
                                                "null"
                                            ]
                                        },
                                        "dropoff_longitude": {
                                            "type": [
                                                "number",
                                                "null"
                                            ]
                                        },
                                        "distance": {
                                            "type": "string"
                                        },
                                        "trip_type": {
                                            "type": "string"
                                        },
                                        "payment_type_id": {
                                            "type": "integer"
                                        },
                                        "flow_type": {
                                            "type": "string"
                                        },
                                        "dispatch_status": {
                                            "type": "string"
                                        },
                                        "dispatch_at": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "status": {
                                            "type": "string"
                                        },
                                        "driver_id": {
                                            "type": [
                                                "integer",
                                                "null"
                                            ]
                                        },
                                        "store_status": {
                                            "type": "string"
                                        },
                                        "prep_status": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "fulfillment_label": {
                                            "type": "string",
                                            "enum": [
                                                "Rider en route"
                                            ]
                                        },
                                        "requires_quote_confirmation": {
                                            "type": "boolean",
                                            "description": "Paper/pharmacy request metadata (safe to add fields)"
                                        },
                                        "request_kind": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "request_attachments": {
                                            "anyOf": [
                                                {
                                                    "type": "array",
                                                    "items": {}
                                                },
                                                {
                                                    "type": "null"
                                                },
                                                {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    },
                                                    "minItems": 0,
                                                    "maxItems": 0,
                                                    "additionalItems": false
                                                }
                                            ]
                                        },
                                        "patient_name": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "patient_birthdate": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "request_notes": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "quote_status": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "quote_ready_at": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "quote_accepted_at": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "quote_payload": {
                                            "type": [
                                                "array",
                                                "null"
                                            ],
                                            "items": {}
                                        },
                                        "quote_accept_payload": {
                                            "type": [
                                                "array",
                                                "null"
                                            ],
                                            "items": {}
                                        },
                                        "totals": {
                                            "type": "object",
                                            "properties": {
                                                "items_subtotal": {
                                                    "type": "number"
                                                },
                                                "delivery_fee": {
                                                    "type": "number"
                                                },
                                                "driver_fare": {
                                                    "type": "number"
                                                },
                                                "platform_fee": {
                                                    "type": "number"
                                                },
                                                "payable_total": {
                                                    "type": "number"
                                                }
                                            },
                                            "required": [
                                                "items_subtotal",
                                                "delivery_fee",
                                                "driver_fare",
                                                "platform_fee",
                                                "payable_total"
                                            ]
                                        },
                                        "items": {
                                            "type": "array",
                                            "description": "Normal items",
                                            "items": {
                                                "type": "object",
                                                "properties": {
                                                    "id": {
                                                        "type": "integer"
                                                    },
                                                    "product_id": {
                                                        "type": "integer"
                                                    },
                                                    "name": {
                                                        "type": "string"
                                                    },
                                                    "qty": {
                                                        "type": "integer"
                                                    },
                                                    "price": {
                                                        "type": "number"
                                                    },
                                                    "line_total": {
                                                        "type": "number"
                                                    },
                                                    "notes": {
                                                        "type": "string"
                                                    },
                                                    "state_label": {
                                                        "type": "string",
                                                        "enum": [
                                                            "Rider en route"
                                                        ]
                                                    }
                                                },
                                                "required": [
                                                    "id",
                                                    "product_id",
                                                    "name",
                                                    "qty",
                                                    "price",
                                                    "line_total",
                                                    "notes",
                                                    "state_label"
                                                ]
                                            }
                                        },
                                        "custom_items": {
                                            "type": "string",
                                            "description": "Custom items (paper/pharmacy confirmed list)"
                                        },
                                        "quote_items": {
                                            "type": "array",
                                            "description": "Quote preview (paper/pharmacy) before customer confirms",
                                            "prefixItems": [
                                                {
                                                    "type": "object",
                                                    "properties": {
                                                        "name": {
                                                            "type": "string"
                                                        },
                                                        "qty": {
                                                            "type": "integer"
                                                        },
                                                        "price": {
                                                            "type": "number"
                                                        },
                                                        "line_total": {
                                                            "type": "number"
                                                        },
                                                        "notes": {
                                                            "type": [
                                                                "string",
                                                                "null"
                                                            ]
                                                        },
                                                        "substitutions": {
                                                            "anyOf": [
                                                                {
                                                                    "type": "string"
                                                                },
                                                                {
                                                                    "type": "array",
                                                                    "items": {
                                                                        "type": "string"
                                                                    },
                                                                    "minItems": 0,
                                                                    "maxItems": 0,
                                                                    "additionalItems": false
                                                                }
                                                            ]
                                                        }
                                                    },
                                                    "required": [
                                                        "name",
                                                        "qty",
                                                        "price",
                                                        "line_total",
                                                        "notes",
                                                        "substitutions"
                                                    ]
                                                }
                                            ],
                                            "minItems": 1,
                                            "maxItems": 1,
                                            "additionalItems": false
                                        },
                                        "driver": {
                                            "type": [
                                                "object",
                                                "null"
                                            ],
                                            "properties": {
                                                "id": {
                                                    "type": "integer"
                                                },
                                                "name": {
                                                    "type": "string"
                                                },
                                                "phone": {
                                                    "type": "string"
                                                },
                                                "plate_number": {
                                                    "type": "string"
                                                },
                                                "location": {
                                                    "type": [
                                                        "object",
                                                        "null"
                                                    ],
                                                    "description": "\u2705 GPS + freshness for live map UI",
                                                    "properties": {
                                                        "latitude": {
                                                            "type": "number"
                                                        },
                                                        "longitude": {
                                                            "type": "number"
                                                        },
                                                        "updated_at": {
                                                            "type": [
                                                                "string",
                                                                "null"
                                                            ]
                                                        },
                                                        "last_seen_at": {
                                                            "type": [
                                                                "string",
                                                                "null"
                                                            ]
                                                        }
                                                    },
                                                    "required": [
                                                        "latitude",
                                                        "longitude",
                                                        "updated_at",
                                                        "last_seen_at"
                                                    ]
                                                },
                                                "location_stale": {
                                                    "type": [
                                                        "boolean",
                                                        "null"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "id",
                                                "name",
                                                "phone",
                                                "plate_number",
                                                "location",
                                                "location_stale"
                                            ]
                                        },
                                        "store": {
                                            "type": [
                                                "object",
                                                "null"
                                            ],
                                            "properties": {
                                                "id": {
                                                    "type": "integer"
                                                },
                                                "name": {
                                                    "type": "string"
                                                },
                                                "address": {
                                                    "type": "string"
                                                }
                                            },
                                            "required": [
                                                "id",
                                                "name",
                                                "address"
                                            ]
                                        },
                                        "parcel": {
                                            "type": [
                                                "object",
                                                "null"
                                            ],
                                            "properties": {
                                                "sender_name": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "sender_phone": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "recipient_name": {
                                                    "type": "string"
                                                },
                                                "recipient_phone": {
                                                    "type": "string"
                                                },
                                                "item_category": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "item_weight_kg": {
                                                    "type": [
                                                        "number",
                                                        "null"
                                                    ]
                                                },
                                                "item_description": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "declared_value": {
                                                    "type": [
                                                        "number",
                                                        "null"
                                                    ]
                                                },
                                                "pickup_note": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "dropoff_note": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "cod_amount": {
                                                    "type": [
                                                        "number",
                                                        "null"
                                                    ]
                                                },
                                                "cod_status": {
                                                    "type": "string"
                                                },
                                                "cod_collected_at": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "cod_remitted_at": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "cod_settled_at": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "cod_receiver_name": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "cod_notes": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "cod_proof_url": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "cod_proof_thumb_url": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "sender_name",
                                                "sender_phone",
                                                "recipient_name",
                                                "recipient_phone",
                                                "item_category",
                                                "item_weight_kg",
                                                "item_description",
                                                "declared_value",
                                                "pickup_note",
                                                "dropoff_note",
                                                "cod_amount",
                                                "cod_status",
                                                "cod_collected_at",
                                                "cod_remitted_at",
                                                "cod_settled_at",
                                                "cod_receiver_name",
                                                "cod_notes",
                                                "cod_proof_url",
                                                "cod_proof_thumb_url"
                                            ]
                                        },
                                        "payment_method": {
                                            "type": "string"
                                        },
                                        "payment_status": {
                                            "type": "string"
                                        },
                                        "payment_reference": {
                                            "type": "string"
                                        },
                                        "cod_confirmation_pending": {
                                            "type": "boolean",
                                            "description": "Phase 4: COD OTP confirmation hints (for UI)."
                                        },
                                        "cod_confirmation_expires_at": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "payment_receipt_path": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "payment_receipt_url": {
                                            "type": "string"
                                        },
                                        "payment_receipt_thumb_url": {
                                            "type": "string"
                                        },
                                        "delivery_fee_prepaid_points": {
                                            "anyOf": [
                                                {
                                                    "type": "integer"
                                                },
                                                {
                                                    "type": "integer",
                                                    "enum": [
                                                        0
                                                    ]
                                                }
                                            ]
                                        },
                                        "delivery_fee_prepaid_at": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "payment_submitted_at": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "payment_verified_at": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "payment_expires_at": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "payment_rejection_reason": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "id",
                                        "reference_no",
                                        "customer_id",
                                        "store_id",
                                        "vehicle_type_id",
                                        "passenger_count",
                                        "service_level",
                                        "speed_multiplier",
                                        "pickup_address",
                                        "pickup_latitude",
                                        "pickup_longitude",
                                        "dropoff_address",
                                        "dropoff_latitude",
                                        "dropoff_longitude",
                                        "distance",
                                        "trip_type",
                                        "payment_type_id",
                                        "flow_type",
                                        "dispatch_status",
                                        "dispatch_at",
                                        "status",
                                        "driver_id",
                                        "store_status",
                                        "prep_status",
                                        "fulfillment_label",
                                        "requires_quote_confirmation",
                                        "request_kind",
                                        "request_attachments",
                                        "patient_name",
                                        "patient_birthdate",
                                        "request_notes",
                                        "quote_status",
                                        "quote_ready_at",
                                        "quote_accepted_at",
                                        "quote_payload",
                                        "quote_accept_payload",
                                        "totals",
                                        "items",
                                        "custom_items",
                                        "quote_items",
                                        "driver",
                                        "store",
                                        "parcel",
                                        "payment_method",
                                        "payment_status",
                                        "payment_reference",
                                        "cod_confirmation_pending",
                                        "cod_confirmation_expires_at",
                                        "payment_receipt_path",
                                        "payment_receipt_url",
                                        "payment_receipt_thumb_url",
                                        "delivery_fee_prepaid_points",
                                        "delivery_fee_prepaid_at",
                                        "payment_submitted_at",
                                        "payment_verified_at",
                                        "payment_expires_at",
                                        "payment_rejection_reason"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "enum": [
                                                "Not your order"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "message"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/delivery-orders/{delivery_order}/cod/confirm": {
            "post": {
                "operationId": "deliveryOrder.confirmCodOtp",
                "tags": [
                    "DeliveryOrder"
                ],
                "parameters": [
                    {
                        "name": "delivery_order",
                        "in": "path",
                        "required": true,
                        "description": "The delivery order ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/ConfirmCodOtpRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "id": {
                                            "type": "integer"
                                        },
                                        "reference_no": {
                                            "type": "string"
                                        },
                                        "customer_id": {
                                            "type": "integer"
                                        },
                                        "store_id": {
                                            "type": [
                                                "integer",
                                                "null"
                                            ]
                                        },
                                        "vehicle_type_id": {
                                            "anyOf": [
                                                {
                                                    "type": "integer"
                                                },
                                                {
                                                    "type": "integer",
                                                    "enum": [
                                                        0
                                                    ]
                                                }
                                            ]
                                        },
                                        "passenger_count": {
                                            "type": "integer",
                                            "enum": [
                                                1
                                            ]
                                        },
                                        "service_level": {
                                            "type": "string",
                                            "description": "Optional"
                                        },
                                        "speed_multiplier": {
                                            "type": [
                                                "number",
                                                "null"
                                            ]
                                        },
                                        "pickup_address": {
                                            "type": "string"
                                        },
                                        "pickup_latitude": {
                                            "type": [
                                                "number",
                                                "null"
                                            ]
                                        },
                                        "pickup_longitude": {
                                            "type": [
                                                "number",
                                                "null"
                                            ]
                                        },
                                        "dropoff_address": {
                                            "type": "string"
                                        },
                                        "dropoff_latitude": {
                                            "type": [
                                                "number",
                                                "null"
                                            ]
                                        },
                                        "dropoff_longitude": {
                                            "type": [
                                                "number",
                                                "null"
                                            ]
                                        },
                                        "distance": {
                                            "type": "string"
                                        },
                                        "trip_type": {
                                            "type": "string"
                                        },
                                        "payment_type_id": {
                                            "type": "integer"
                                        },
                                        "flow_type": {
                                            "type": "string"
                                        },
                                        "dispatch_status": {
                                            "type": "string"
                                        },
                                        "dispatch_at": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "status": {
                                            "type": "string"
                                        },
                                        "driver_id": {
                                            "type": [
                                                "integer",
                                                "null"
                                            ]
                                        },
                                        "store_status": {
                                            "type": "string"
                                        },
                                        "prep_status": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "fulfillment_label": {
                                            "type": "string",
                                            "enum": [
                                                "Rider en route"
                                            ]
                                        },
                                        "requires_quote_confirmation": {
                                            "type": "boolean",
                                            "description": "Paper/pharmacy request metadata (safe to add fields)"
                                        },
                                        "request_kind": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "request_attachments": {
                                            "anyOf": [
                                                {
                                                    "type": "array",
                                                    "items": {}
                                                },
                                                {
                                                    "type": "null"
                                                },
                                                {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    },
                                                    "minItems": 0,
                                                    "maxItems": 0,
                                                    "additionalItems": false
                                                }
                                            ]
                                        },
                                        "patient_name": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "patient_birthdate": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "request_notes": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "quote_status": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "quote_ready_at": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "quote_accepted_at": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "quote_payload": {
                                            "type": [
                                                "array",
                                                "null"
                                            ],
                                            "items": {}
                                        },
                                        "quote_accept_payload": {
                                            "type": [
                                                "array",
                                                "null"
                                            ],
                                            "items": {}
                                        },
                                        "totals": {
                                            "type": "object",
                                            "properties": {
                                                "items_subtotal": {
                                                    "type": "number"
                                                },
                                                "delivery_fee": {
                                                    "type": "number"
                                                },
                                                "driver_fare": {
                                                    "type": "number"
                                                },
                                                "platform_fee": {
                                                    "type": "number"
                                                },
                                                "payable_total": {
                                                    "type": "number"
                                                }
                                            },
                                            "required": [
                                                "items_subtotal",
                                                "delivery_fee",
                                                "driver_fare",
                                                "platform_fee",
                                                "payable_total"
                                            ]
                                        },
                                        "items": {
                                            "type": "array",
                                            "description": "Normal items",
                                            "items": {
                                                "type": "object",
                                                "properties": {
                                                    "id": {
                                                        "type": "integer"
                                                    },
                                                    "product_id": {
                                                        "type": "integer"
                                                    },
                                                    "name": {
                                                        "type": "string"
                                                    },
                                                    "qty": {
                                                        "type": "integer"
                                                    },
                                                    "price": {
                                                        "type": "number"
                                                    },
                                                    "line_total": {
                                                        "type": "number"
                                                    },
                                                    "notes": {
                                                        "type": "string"
                                                    },
                                                    "state_label": {
                                                        "type": "string",
                                                        "enum": [
                                                            "Rider en route"
                                                        ]
                                                    }
                                                },
                                                "required": [
                                                    "id",
                                                    "product_id",
                                                    "name",
                                                    "qty",
                                                    "price",
                                                    "line_total",
                                                    "notes",
                                                    "state_label"
                                                ]
                                            }
                                        },
                                        "custom_items": {
                                            "type": "string",
                                            "description": "Custom items (paper/pharmacy confirmed list)"
                                        },
                                        "quote_items": {
                                            "type": "array",
                                            "description": "Quote preview (paper/pharmacy) before customer confirms",
                                            "prefixItems": [
                                                {
                                                    "type": "object",
                                                    "properties": {
                                                        "name": {
                                                            "type": "string"
                                                        },
                                                        "qty": {
                                                            "type": "integer"
                                                        },
                                                        "price": {
                                                            "type": "number"
                                                        },
                                                        "line_total": {
                                                            "type": "number"
                                                        },
                                                        "notes": {
                                                            "type": [
                                                                "string",
                                                                "null"
                                                            ]
                                                        },
                                                        "substitutions": {
                                                            "anyOf": [
                                                                {
                                                                    "type": "string"
                                                                },
                                                                {
                                                                    "type": "array",
                                                                    "items": {
                                                                        "type": "string"
                                                                    },
                                                                    "minItems": 0,
                                                                    "maxItems": 0,
                                                                    "additionalItems": false
                                                                }
                                                            ]
                                                        }
                                                    },
                                                    "required": [
                                                        "name",
                                                        "qty",
                                                        "price",
                                                        "line_total",
                                                        "notes",
                                                        "substitutions"
                                                    ]
                                                }
                                            ],
                                            "minItems": 1,
                                            "maxItems": 1,
                                            "additionalItems": false
                                        },
                                        "driver": {
                                            "type": [
                                                "object",
                                                "null"
                                            ],
                                            "properties": {
                                                "id": {
                                                    "type": "integer"
                                                },
                                                "name": {
                                                    "type": "string"
                                                },
                                                "phone": {
                                                    "type": "string"
                                                },
                                                "plate_number": {
                                                    "type": "string"
                                                },
                                                "location": {
                                                    "type": [
                                                        "object",
                                                        "null"
                                                    ],
                                                    "description": "\u2705 GPS + freshness for live map UI",
                                                    "properties": {
                                                        "latitude": {
                                                            "type": "number"
                                                        },
                                                        "longitude": {
                                                            "type": "number"
                                                        },
                                                        "updated_at": {
                                                            "type": [
                                                                "string",
                                                                "null"
                                                            ]
                                                        },
                                                        "last_seen_at": {
                                                            "type": [
                                                                "string",
                                                                "null"
                                                            ]
                                                        }
                                                    },
                                                    "required": [
                                                        "latitude",
                                                        "longitude",
                                                        "updated_at",
                                                        "last_seen_at"
                                                    ]
                                                },
                                                "location_stale": {
                                                    "type": [
                                                        "boolean",
                                                        "null"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "id",
                                                "name",
                                                "phone",
                                                "plate_number",
                                                "location",
                                                "location_stale"
                                            ]
                                        },
                                        "store": {
                                            "type": [
                                                "object",
                                                "null"
                                            ],
                                            "properties": {
                                                "id": {
                                                    "type": "integer"
                                                },
                                                "name": {
                                                    "type": "string"
                                                },
                                                "address": {
                                                    "type": "string"
                                                }
                                            },
                                            "required": [
                                                "id",
                                                "name",
                                                "address"
                                            ]
                                        },
                                        "parcel": {
                                            "type": [
                                                "object",
                                                "null"
                                            ],
                                            "properties": {
                                                "sender_name": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "sender_phone": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "recipient_name": {
                                                    "type": "string"
                                                },
                                                "recipient_phone": {
                                                    "type": "string"
                                                },
                                                "item_category": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "item_weight_kg": {
                                                    "type": [
                                                        "number",
                                                        "null"
                                                    ]
                                                },
                                                "item_description": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "declared_value": {
                                                    "type": [
                                                        "number",
                                                        "null"
                                                    ]
                                                },
                                                "pickup_note": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "dropoff_note": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "cod_amount": {
                                                    "type": [
                                                        "number",
                                                        "null"
                                                    ]
                                                },
                                                "cod_status": {
                                                    "type": "string"
                                                },
                                                "cod_collected_at": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "cod_remitted_at": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "cod_settled_at": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "cod_receiver_name": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "cod_notes": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "cod_proof_url": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "cod_proof_thumb_url": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "sender_name",
                                                "sender_phone",
                                                "recipient_name",
                                                "recipient_phone",
                                                "item_category",
                                                "item_weight_kg",
                                                "item_description",
                                                "declared_value",
                                                "pickup_note",
                                                "dropoff_note",
                                                "cod_amount",
                                                "cod_status",
                                                "cod_collected_at",
                                                "cod_remitted_at",
                                                "cod_settled_at",
                                                "cod_receiver_name",
                                                "cod_notes",
                                                "cod_proof_url",
                                                "cod_proof_thumb_url"
                                            ]
                                        },
                                        "payment_method": {
                                            "type": "string"
                                        },
                                        "payment_status": {
                                            "type": "string"
                                        },
                                        "payment_reference": {
                                            "type": "string"
                                        },
                                        "cod_confirmation_pending": {
                                            "type": "boolean",
                                            "description": "Phase 4: COD OTP confirmation hints (for UI)."
                                        },
                                        "cod_confirmation_expires_at": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "payment_receipt_path": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "payment_receipt_url": {
                                            "type": "string"
                                        },
                                        "payment_receipt_thumb_url": {
                                            "type": "string"
                                        },
                                        "delivery_fee_prepaid_points": {
                                            "anyOf": [
                                                {
                                                    "type": "integer"
                                                },
                                                {
                                                    "type": "integer",
                                                    "enum": [
                                                        0
                                                    ]
                                                }
                                            ]
                                        },
                                        "delivery_fee_prepaid_at": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "payment_submitted_at": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "payment_verified_at": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "payment_expires_at": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "payment_rejection_reason": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "id",
                                        "reference_no",
                                        "customer_id",
                                        "store_id",
                                        "vehicle_type_id",
                                        "passenger_count",
                                        "service_level",
                                        "speed_multiplier",
                                        "pickup_address",
                                        "pickup_latitude",
                                        "pickup_longitude",
                                        "dropoff_address",
                                        "dropoff_latitude",
                                        "dropoff_longitude",
                                        "distance",
                                        "trip_type",
                                        "payment_type_id",
                                        "flow_type",
                                        "dispatch_status",
                                        "dispatch_at",
                                        "status",
                                        "driver_id",
                                        "store_status",
                                        "prep_status",
                                        "fulfillment_label",
                                        "requires_quote_confirmation",
                                        "request_kind",
                                        "request_attachments",
                                        "patient_name",
                                        "patient_birthdate",
                                        "request_notes",
                                        "quote_status",
                                        "quote_ready_at",
                                        "quote_accepted_at",
                                        "quote_payload",
                                        "quote_accept_payload",
                                        "totals",
                                        "items",
                                        "custom_items",
                                        "quote_items",
                                        "driver",
                                        "store",
                                        "parcel",
                                        "payment_method",
                                        "payment_status",
                                        "payment_reference",
                                        "cod_confirmation_pending",
                                        "cod_confirmation_expires_at",
                                        "payment_receipt_path",
                                        "payment_receipt_url",
                                        "payment_receipt_thumb_url",
                                        "delivery_fee_prepaid_points",
                                        "delivery_fee_prepaid_at",
                                        "payment_submitted_at",
                                        "payment_verified_at",
                                        "payment_expires_at",
                                        "payment_rejection_reason"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "enum": [
                                                "Not your order"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "message"
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/orders/{order}/cancel-search": {
            "post": {
                "operationId": "deliveryOrder.cancelSearch",
                "tags": [
                    "DeliveryOrder"
                ],
                "parameters": [
                    {
                        "name": "order",
                        "in": "path",
                        "required": true,
                        "description": "The order ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "id": {
                                            "type": "integer"
                                        },
                                        "reference_no": {
                                            "type": "string"
                                        },
                                        "customer_id": {
                                            "type": "integer"
                                        },
                                        "store_id": {
                                            "type": [
                                                "integer",
                                                "null"
                                            ]
                                        },
                                        "vehicle_type_id": {
                                            "anyOf": [
                                                {
                                                    "type": "integer"
                                                },
                                                {
                                                    "type": "integer",
                                                    "enum": [
                                                        0
                                                    ]
                                                }
                                            ]
                                        },
                                        "passenger_count": {
                                            "type": "integer",
                                            "enum": [
                                                1
                                            ]
                                        },
                                        "service_level": {
                                            "type": "string",
                                            "description": "Optional"
                                        },
                                        "speed_multiplier": {
                                            "type": [
                                                "number",
                                                "null"
                                            ]
                                        },
                                        "pickup_address": {
                                            "type": "string"
                                        },
                                        "pickup_latitude": {
                                            "type": [
                                                "number",
                                                "null"
                                            ]
                                        },
                                        "pickup_longitude": {
                                            "type": [
                                                "number",
                                                "null"
                                            ]
                                        },
                                        "dropoff_address": {
                                            "type": "string"
                                        },
                                        "dropoff_latitude": {
                                            "type": [
                                                "number",
                                                "null"
                                            ]
                                        },
                                        "dropoff_longitude": {
                                            "type": [
                                                "number",
                                                "null"
                                            ]
                                        },
                                        "distance": {
                                            "type": "string"
                                        },
                                        "trip_type": {
                                            "type": "string"
                                        },
                                        "payment_type_id": {
                                            "type": "integer"
                                        },
                                        "flow_type": {
                                            "type": "string"
                                        },
                                        "dispatch_status": {
                                            "type": "string"
                                        },
                                        "dispatch_at": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "status": {
                                            "type": "string"
                                        },
                                        "driver_id": {
                                            "type": [
                                                "integer",
                                                "null"
                                            ]
                                        },
                                        "store_status": {
                                            "type": "string"
                                        },
                                        "prep_status": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "fulfillment_label": {
                                            "type": "string",
                                            "enum": [
                                                "Rider en route"
                                            ]
                                        },
                                        "requires_quote_confirmation": {
                                            "type": "boolean",
                                            "description": "Paper/pharmacy request metadata (safe to add fields)"
                                        },
                                        "request_kind": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "request_attachments": {
                                            "anyOf": [
                                                {
                                                    "type": "array",
                                                    "items": {}
                                                },
                                                {
                                                    "type": "null"
                                                },
                                                {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    },
                                                    "minItems": 0,
                                                    "maxItems": 0,
                                                    "additionalItems": false
                                                }
                                            ]
                                        },
                                        "patient_name": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "patient_birthdate": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "request_notes": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "quote_status": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "quote_ready_at": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "quote_accepted_at": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "quote_payload": {
                                            "type": [
                                                "array",
                                                "null"
                                            ],
                                            "items": {}
                                        },
                                        "quote_accept_payload": {
                                            "type": [
                                                "array",
                                                "null"
                                            ],
                                            "items": {}
                                        },
                                        "totals": {
                                            "type": "object",
                                            "properties": {
                                                "items_subtotal": {
                                                    "type": "number"
                                                },
                                                "delivery_fee": {
                                                    "type": "number"
                                                },
                                                "driver_fare": {
                                                    "type": "number"
                                                },
                                                "platform_fee": {
                                                    "type": "number"
                                                },
                                                "payable_total": {
                                                    "type": "number"
                                                }
                                            },
                                            "required": [
                                                "items_subtotal",
                                                "delivery_fee",
                                                "driver_fare",
                                                "platform_fee",
                                                "payable_total"
                                            ]
                                        },
                                        "items": {
                                            "type": "array",
                                            "description": "Normal items",
                                            "items": {
                                                "type": "object",
                                                "properties": {
                                                    "id": {
                                                        "type": "integer"
                                                    },
                                                    "product_id": {
                                                        "type": "integer"
                                                    },
                                                    "name": {
                                                        "type": "string"
                                                    },
                                                    "qty": {
                                                        "type": "integer"
                                                    },
                                                    "price": {
                                                        "type": "number"
                                                    },
                                                    "line_total": {
                                                        "type": "number"
                                                    },
                                                    "notes": {
                                                        "type": "string"
                                                    },
                                                    "state_label": {
                                                        "type": "string",
                                                        "enum": [
                                                            "Rider en route"
                                                        ]
                                                    }
                                                },
                                                "required": [
                                                    "id",
                                                    "product_id",
                                                    "name",
                                                    "qty",
                                                    "price",
                                                    "line_total",
                                                    "notes",
                                                    "state_label"
                                                ]
                                            }
                                        },
                                        "custom_items": {
                                            "type": "string",
                                            "description": "Custom items (paper/pharmacy confirmed list)"
                                        },
                                        "quote_items": {
                                            "type": "array",
                                            "description": "Quote preview (paper/pharmacy) before customer confirms",
                                            "prefixItems": [
                                                {
                                                    "type": "object",
                                                    "properties": {
                                                        "name": {
                                                            "type": "string"
                                                        },
                                                        "qty": {
                                                            "type": "integer"
                                                        },
                                                        "price": {
                                                            "type": "number"
                                                        },
                                                        "line_total": {
                                                            "type": "number"
                                                        },
                                                        "notes": {
                                                            "type": [
                                                                "string",
                                                                "null"
                                                            ]
                                                        },
                                                        "substitutions": {
                                                            "anyOf": [
                                                                {
                                                                    "type": "string"
                                                                },
                                                                {
                                                                    "type": "array",
                                                                    "items": {
                                                                        "type": "string"
                                                                    },
                                                                    "minItems": 0,
                                                                    "maxItems": 0,
                                                                    "additionalItems": false
                                                                }
                                                            ]
                                                        }
                                                    },
                                                    "required": [
                                                        "name",
                                                        "qty",
                                                        "price",
                                                        "line_total",
                                                        "notes",
                                                        "substitutions"
                                                    ]
                                                }
                                            ],
                                            "minItems": 1,
                                            "maxItems": 1,
                                            "additionalItems": false
                                        },
                                        "driver": {
                                            "type": [
                                                "object",
                                                "null"
                                            ],
                                            "properties": {
                                                "id": {
                                                    "type": "integer"
                                                },
                                                "name": {
                                                    "type": "string"
                                                },
                                                "phone": {
                                                    "type": "string"
                                                },
                                                "plate_number": {
                                                    "type": "string"
                                                },
                                                "location": {
                                                    "type": [
                                                        "object",
                                                        "null"
                                                    ],
                                                    "description": "\u2705 GPS + freshness for live map UI",
                                                    "properties": {
                                                        "latitude": {
                                                            "type": "number"
                                                        },
                                                        "longitude": {
                                                            "type": "number"
                                                        },
                                                        "updated_at": {
                                                            "type": [
                                                                "string",
                                                                "null"
                                                            ]
                                                        },
                                                        "last_seen_at": {
                                                            "type": [
                                                                "string",
                                                                "null"
                                                            ]
                                                        }
                                                    },
                                                    "required": [
                                                        "latitude",
                                                        "longitude",
                                                        "updated_at",
                                                        "last_seen_at"
                                                    ]
                                                },
                                                "location_stale": {
                                                    "type": [
                                                        "boolean",
                                                        "null"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "id",
                                                "name",
                                                "phone",
                                                "plate_number",
                                                "location",
                                                "location_stale"
                                            ]
                                        },
                                        "store": {
                                            "type": [
                                                "object",
                                                "null"
                                            ],
                                            "properties": {
                                                "id": {
                                                    "type": "integer"
                                                },
                                                "name": {
                                                    "type": "string"
                                                },
                                                "address": {
                                                    "type": "string"
                                                }
                                            },
                                            "required": [
                                                "id",
                                                "name",
                                                "address"
                                            ]
                                        },
                                        "parcel": {
                                            "type": [
                                                "object",
                                                "null"
                                            ],
                                            "properties": {
                                                "sender_name": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "sender_phone": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "recipient_name": {
                                                    "type": "string"
                                                },
                                                "recipient_phone": {
                                                    "type": "string"
                                                },
                                                "item_category": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "item_weight_kg": {
                                                    "type": [
                                                        "number",
                                                        "null"
                                                    ]
                                                },
                                                "item_description": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "declared_value": {
                                                    "type": [
                                                        "number",
                                                        "null"
                                                    ]
                                                },
                                                "pickup_note": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "dropoff_note": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "cod_amount": {
                                                    "type": [
                                                        "number",
                                                        "null"
                                                    ]
                                                },
                                                "cod_status": {
                                                    "type": "string"
                                                },
                                                "cod_collected_at": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "cod_remitted_at": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "cod_settled_at": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "cod_receiver_name": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "cod_notes": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "cod_proof_url": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "cod_proof_thumb_url": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "sender_name",
                                                "sender_phone",
                                                "recipient_name",
                                                "recipient_phone",
                                                "item_category",
                                                "item_weight_kg",
                                                "item_description",
                                                "declared_value",
                                                "pickup_note",
                                                "dropoff_note",
                                                "cod_amount",
                                                "cod_status",
                                                "cod_collected_at",
                                                "cod_remitted_at",
                                                "cod_settled_at",
                                                "cod_receiver_name",
                                                "cod_notes",
                                                "cod_proof_url",
                                                "cod_proof_thumb_url"
                                            ]
                                        },
                                        "payment_method": {
                                            "type": "string"
                                        },
                                        "payment_status": {
                                            "type": "string"
                                        },
                                        "payment_reference": {
                                            "type": "string"
                                        },
                                        "cod_confirmation_pending": {
                                            "type": "boolean",
                                            "description": "Phase 4: COD OTP confirmation hints (for UI)."
                                        },
                                        "cod_confirmation_expires_at": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "payment_receipt_path": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "payment_receipt_url": {
                                            "type": "string"
                                        },
                                        "payment_receipt_thumb_url": {
                                            "type": "string"
                                        },
                                        "delivery_fee_prepaid_points": {
                                            "anyOf": [
                                                {
                                                    "type": "integer"
                                                },
                                                {
                                                    "type": "integer",
                                                    "enum": [
                                                        0
                                                    ]
                                                }
                                            ]
                                        },
                                        "delivery_fee_prepaid_at": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "payment_submitted_at": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "payment_verified_at": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "payment_expires_at": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "payment_rejection_reason": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "id",
                                        "reference_no",
                                        "customer_id",
                                        "store_id",
                                        "vehicle_type_id",
                                        "passenger_count",
                                        "service_level",
                                        "speed_multiplier",
                                        "pickup_address",
                                        "pickup_latitude",
                                        "pickup_longitude",
                                        "dropoff_address",
                                        "dropoff_latitude",
                                        "dropoff_longitude",
                                        "distance",
                                        "trip_type",
                                        "payment_type_id",
                                        "flow_type",
                                        "dispatch_status",
                                        "dispatch_at",
                                        "status",
                                        "driver_id",
                                        "store_status",
                                        "prep_status",
                                        "fulfillment_label",
                                        "requires_quote_confirmation",
                                        "request_kind",
                                        "request_attachments",
                                        "patient_name",
                                        "patient_birthdate",
                                        "request_notes",
                                        "quote_status",
                                        "quote_ready_at",
                                        "quote_accepted_at",
                                        "quote_payload",
                                        "quote_accept_payload",
                                        "totals",
                                        "items",
                                        "custom_items",
                                        "quote_items",
                                        "driver",
                                        "store",
                                        "parcel",
                                        "payment_method",
                                        "payment_status",
                                        "payment_reference",
                                        "cod_confirmation_pending",
                                        "cod_confirmation_expires_at",
                                        "payment_receipt_path",
                                        "payment_receipt_url",
                                        "payment_receipt_thumb_url",
                                        "delivery_fee_prepaid_points",
                                        "delivery_fee_prepaid_at",
                                        "payment_submitted_at",
                                        "payment_verified_at",
                                        "payment_expires_at",
                                        "payment_rejection_reason"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "enum": [
                                                "Not your order"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "message"
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/admin/orders/{order}/refund": {
            "post": {
                "operationId": "deliveryOrder.refundOrder",
                "tags": [
                    "DeliveryOrder"
                ],
                "parameters": [
                    {
                        "name": "order",
                        "in": "path",
                        "required": true,
                        "description": "The order ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/AdminRefundOrderRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/driver/jobs/active": {
            "get": {
                "operationId": "deliveryOrder.activeJobsForDriver",
                "tags": [
                    "DeliveryOrder"
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "type": "string"
                                    }
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/driver/jobs/history": {
            "get": {
                "operationId": "deliveryOrder.jobHistoryForDriver",
                "tags": [
                    "DeliveryOrder"
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "anyOf": [
                                        {
                                            "type": "array",
                                            "items": {
                                                "type": "string"
                                            }
                                        },
                                        {
                                            "type": "array",
                                            "items": {
                                                "type": "string"
                                            },
                                            "minItems": 0,
                                            "maxItems": 0,
                                            "additionalItems": false
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/driver/earnings/summary": {
            "get": {
                "operationId": "deliveryOrder.earningsSummaryForDriver",
                "tags": [
                    "DeliveryOrder"
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "today_total": {
                                            "type": "number"
                                        },
                                        "week_total": {
                                            "type": "number"
                                        },
                                        "month_total": {
                                            "type": "number"
                                        },
                                        "lifetime_total": {
                                            "type": "number"
                                        },
                                        "trip_count": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "today_total",
                                        "week_total",
                                        "month_total",
                                        "lifetime_total",
                                        "trip_count"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/customer/orders/active": {
            "get": {
                "operationId": "deliveryOrder.activeOrdersForCustomer",
                "tags": [
                    "DeliveryOrder"
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "type": "string"
                                    }
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/customer/orders/history": {
            "get": {
                "operationId": "deliveryOrder.orderHistoryForCustomer",
                "tags": [
                    "DeliveryOrder"
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "type": "string"
                                    }
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/customer/orders/{order}/confirm-delivery": {
            "post": {
                "operationId": "deliveryOrder.confirmDelivery",
                "tags": [
                    "DeliveryOrder"
                ],
                "parameters": [
                    {
                        "name": "order",
                        "in": "path",
                        "required": true,
                        "description": "The order ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "422": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "anyOf": [
                                        {
                                            "type": "object",
                                            "properties": {
                                                "message": {
                                                    "type": "string",
                                                    "enum": [
                                                        "Unable to complete order."
                                                    ]
                                                },
                                                "errors": {
                                                    "type": "string"
                                                }
                                            },
                                            "required": [
                                                "message",
                                                "errors"
                                            ]
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "message": {
                                                    "type": "string",
                                                    "enum": [
                                                        "No driver assigned to this order."
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "message"
                                            ]
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "message": {
                                                    "type": "string",
                                                    "enum": [
                                                        "Order must be delivered before it can be completed."
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "message"
                                            ]
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "order": {
                                            "type": "object",
                                            "properties": {
                                                "id": {
                                                    "type": "integer"
                                                },
                                                "reference_no": {
                                                    "type": "string"
                                                },
                                                "customer_id": {
                                                    "type": "integer"
                                                },
                                                "store_id": {
                                                    "type": [
                                                        "integer",
                                                        "null"
                                                    ]
                                                },
                                                "vehicle_type_id": {
                                                    "anyOf": [
                                                        {
                                                            "type": "integer"
                                                        },
                                                        {
                                                            "type": "integer",
                                                            "enum": [
                                                                0
                                                            ]
                                                        }
                                                    ]
                                                },
                                                "passenger_count": {
                                                    "type": "integer",
                                                    "enum": [
                                                        1
                                                    ]
                                                },
                                                "service_level": {
                                                    "type": "string",
                                                    "description": "Optional"
                                                },
                                                "speed_multiplier": {
                                                    "type": [
                                                        "number",
                                                        "null"
                                                    ]
                                                },
                                                "pickup_address": {
                                                    "type": "string"
                                                },
                                                "pickup_latitude": {
                                                    "type": [
                                                        "number",
                                                        "null"
                                                    ]
                                                },
                                                "pickup_longitude": {
                                                    "type": [
                                                        "number",
                                                        "null"
                                                    ]
                                                },
                                                "dropoff_address": {
                                                    "type": "string"
                                                },
                                                "dropoff_latitude": {
                                                    "type": [
                                                        "number",
                                                        "null"
                                                    ]
                                                },
                                                "dropoff_longitude": {
                                                    "type": [
                                                        "number",
                                                        "null"
                                                    ]
                                                },
                                                "distance": {
                                                    "type": "string"
                                                },
                                                "trip_type": {
                                                    "type": "string"
                                                },
                                                "payment_type_id": {
                                                    "type": "integer"
                                                },
                                                "flow_type": {
                                                    "type": "string"
                                                },
                                                "dispatch_status": {
                                                    "type": "string"
                                                },
                                                "dispatch_at": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "status": {
                                                    "type": "string"
                                                },
                                                "driver_id": {
                                                    "type": [
                                                        "integer",
                                                        "null"
                                                    ]
                                                },
                                                "store_status": {
                                                    "type": "string"
                                                },
                                                "prep_status": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "fulfillment_label": {
                                                    "type": "string",
                                                    "enum": [
                                                        "Rider en route"
                                                    ]
                                                },
                                                "requires_quote_confirmation": {
                                                    "type": "boolean",
                                                    "description": "Paper/pharmacy request metadata (safe to add fields)"
                                                },
                                                "request_kind": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "request_attachments": {
                                                    "anyOf": [
                                                        {
                                                            "type": "array",
                                                            "items": {}
                                                        },
                                                        {
                                                            "type": "null"
                                                        },
                                                        {
                                                            "type": "array",
                                                            "items": {
                                                                "type": "string"
                                                            },
                                                            "minItems": 0,
                                                            "maxItems": 0,
                                                            "additionalItems": false
                                                        }
                                                    ]
                                                },
                                                "patient_name": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "patient_birthdate": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "request_notes": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "quote_status": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "quote_ready_at": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "quote_accepted_at": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "quote_payload": {
                                                    "type": [
                                                        "array",
                                                        "null"
                                                    ],
                                                    "items": {}
                                                },
                                                "quote_accept_payload": {
                                                    "type": [
                                                        "array",
                                                        "null"
                                                    ],
                                                    "items": {}
                                                },
                                                "totals": {
                                                    "type": "object",
                                                    "properties": {
                                                        "items_subtotal": {
                                                            "type": "number"
                                                        },
                                                        "delivery_fee": {
                                                            "type": "number"
                                                        },
                                                        "driver_fare": {
                                                            "type": "number"
                                                        },
                                                        "platform_fee": {
                                                            "type": "number"
                                                        },
                                                        "payable_total": {
                                                            "type": "number"
                                                        }
                                                    },
                                                    "required": [
                                                        "items_subtotal",
                                                        "delivery_fee",
                                                        "driver_fare",
                                                        "platform_fee",
                                                        "payable_total"
                                                    ]
                                                },
                                                "items": {
                                                    "type": "array",
                                                    "description": "Normal items",
                                                    "items": {
                                                        "type": "object",
                                                        "properties": {
                                                            "id": {
                                                                "type": "integer"
                                                            },
                                                            "product_id": {
                                                                "type": "integer"
                                                            },
                                                            "name": {
                                                                "type": "string"
                                                            },
                                                            "qty": {
                                                                "type": "integer"
                                                            },
                                                            "price": {
                                                                "type": "number"
                                                            },
                                                            "line_total": {
                                                                "type": "number"
                                                            },
                                                            "notes": {
                                                                "type": "string"
                                                            },
                                                            "state_label": {
                                                                "type": "string",
                                                                "enum": [
                                                                    "Rider en route"
                                                                ]
                                                            }
                                                        },
                                                        "required": [
                                                            "id",
                                                            "product_id",
                                                            "name",
                                                            "qty",
                                                            "price",
                                                            "line_total",
                                                            "notes",
                                                            "state_label"
                                                        ]
                                                    }
                                                },
                                                "custom_items": {
                                                    "type": "string",
                                                    "description": "Custom items (paper/pharmacy confirmed list)"
                                                },
                                                "quote_items": {
                                                    "type": "array",
                                                    "description": "Quote preview (paper/pharmacy) before customer confirms",
                                                    "prefixItems": [
                                                        {
                                                            "type": "object",
                                                            "properties": {
                                                                "name": {
                                                                    "type": "string"
                                                                },
                                                                "qty": {
                                                                    "type": "integer"
                                                                },
                                                                "price": {
                                                                    "type": "number"
                                                                },
                                                                "line_total": {
                                                                    "type": "number"
                                                                },
                                                                "notes": {
                                                                    "type": [
                                                                        "string",
                                                                        "null"
                                                                    ]
                                                                },
                                                                "substitutions": {
                                                                    "anyOf": [
                                                                        {
                                                                            "type": "string"
                                                                        },
                                                                        {
                                                                            "type": "array",
                                                                            "items": {
                                                                                "type": "string"
                                                                            },
                                                                            "minItems": 0,
                                                                            "maxItems": 0,
                                                                            "additionalItems": false
                                                                        }
                                                                    ]
                                                                }
                                                            },
                                                            "required": [
                                                                "name",
                                                                "qty",
                                                                "price",
                                                                "line_total",
                                                                "notes",
                                                                "substitutions"
                                                            ]
                                                        }
                                                    ],
                                                    "minItems": 1,
                                                    "maxItems": 1,
                                                    "additionalItems": false
                                                },
                                                "driver": {
                                                    "type": [
                                                        "object",
                                                        "null"
                                                    ],
                                                    "properties": {
                                                        "id": {
                                                            "type": "integer"
                                                        },
                                                        "name": {
                                                            "type": "string"
                                                        },
                                                        "phone": {
                                                            "type": "string"
                                                        },
                                                        "plate_number": {
                                                            "type": "string"
                                                        },
                                                        "location": {
                                                            "type": [
                                                                "object",
                                                                "null"
                                                            ],
                                                            "description": "\u2705 GPS + freshness for live map UI",
                                                            "properties": {
                                                                "latitude": {
                                                                    "type": "number"
                                                                },
                                                                "longitude": {
                                                                    "type": "number"
                                                                },
                                                                "updated_at": {
                                                                    "type": [
                                                                        "string",
                                                                        "null"
                                                                    ]
                                                                },
                                                                "last_seen_at": {
                                                                    "type": [
                                                                        "string",
                                                                        "null"
                                                                    ]
                                                                }
                                                            },
                                                            "required": [
                                                                "latitude",
                                                                "longitude",
                                                                "updated_at",
                                                                "last_seen_at"
                                                            ]
                                                        },
                                                        "location_stale": {
                                                            "type": [
                                                                "boolean",
                                                                "null"
                                                            ]
                                                        }
                                                    },
                                                    "required": [
                                                        "id",
                                                        "name",
                                                        "phone",
                                                        "plate_number",
                                                        "location",
                                                        "location_stale"
                                                    ]
                                                },
                                                "store": {
                                                    "type": [
                                                        "object",
                                                        "null"
                                                    ],
                                                    "properties": {
                                                        "id": {
                                                            "type": "integer"
                                                        },
                                                        "name": {
                                                            "type": "string"
                                                        },
                                                        "address": {
                                                            "type": "string"
                                                        }
                                                    },
                                                    "required": [
                                                        "id",
                                                        "name",
                                                        "address"
                                                    ]
                                                },
                                                "parcel": {
                                                    "type": [
                                                        "object",
                                                        "null"
                                                    ],
                                                    "properties": {
                                                        "sender_name": {
                                                            "type": [
                                                                "string",
                                                                "null"
                                                            ]
                                                        },
                                                        "sender_phone": {
                                                            "type": [
                                                                "string",
                                                                "null"
                                                            ]
                                                        },
                                                        "recipient_name": {
                                                            "type": "string"
                                                        },
                                                        "recipient_phone": {
                                                            "type": "string"
                                                        },
                                                        "item_category": {
                                                            "type": [
                                                                "string",
                                                                "null"
                                                            ]
                                                        },
                                                        "item_weight_kg": {
                                                            "type": [
                                                                "number",
                                                                "null"
                                                            ]
                                                        },
                                                        "item_description": {
                                                            "type": [
                                                                "string",
                                                                "null"
                                                            ]
                                                        },
                                                        "declared_value": {
                                                            "type": [
                                                                "number",
                                                                "null"
                                                            ]
                                                        },
                                                        "pickup_note": {
                                                            "type": [
                                                                "string",
                                                                "null"
                                                            ]
                                                        },
                                                        "dropoff_note": {
                                                            "type": [
                                                                "string",
                                                                "null"
                                                            ]
                                                        },
                                                        "cod_amount": {
                                                            "type": [
                                                                "number",
                                                                "null"
                                                            ]
                                                        },
                                                        "cod_status": {
                                                            "type": "string"
                                                        },
                                                        "cod_collected_at": {
                                                            "type": [
                                                                "string",
                                                                "null"
                                                            ]
                                                        },
                                                        "cod_remitted_at": {
                                                            "type": [
                                                                "string",
                                                                "null"
                                                            ]
                                                        },
                                                        "cod_settled_at": {
                                                            "type": [
                                                                "string",
                                                                "null"
                                                            ]
                                                        },
                                                        "cod_receiver_name": {
                                                            "type": [
                                                                "string",
                                                                "null"
                                                            ]
                                                        },
                                                        "cod_notes": {
                                                            "type": [
                                                                "string",
                                                                "null"
                                                            ]
                                                        },
                                                        "cod_proof_url": {
                                                            "type": [
                                                                "string",
                                                                "null"
                                                            ]
                                                        },
                                                        "cod_proof_thumb_url": {
                                                            "type": [
                                                                "string",
                                                                "null"
                                                            ]
                                                        }
                                                    },
                                                    "required": [
                                                        "sender_name",
                                                        "sender_phone",
                                                        "recipient_name",
                                                        "recipient_phone",
                                                        "item_category",
                                                        "item_weight_kg",
                                                        "item_description",
                                                        "declared_value",
                                                        "pickup_note",
                                                        "dropoff_note",
                                                        "cod_amount",
                                                        "cod_status",
                                                        "cod_collected_at",
                                                        "cod_remitted_at",
                                                        "cod_settled_at",
                                                        "cod_receiver_name",
                                                        "cod_notes",
                                                        "cod_proof_url",
                                                        "cod_proof_thumb_url"
                                                    ]
                                                },
                                                "payment_method": {
                                                    "type": "string"
                                                },
                                                "payment_status": {
                                                    "type": "string"
                                                },
                                                "payment_reference": {
                                                    "type": "string"
                                                },
                                                "cod_confirmation_pending": {
                                                    "type": "boolean",
                                                    "description": "Phase 4: COD OTP confirmation hints (for UI)."
                                                },
                                                "cod_confirmation_expires_at": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "payment_receipt_path": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "payment_receipt_url": {
                                                    "type": "string"
                                                },
                                                "payment_receipt_thumb_url": {
                                                    "type": "string"
                                                },
                                                "delivery_fee_prepaid_points": {
                                                    "anyOf": [
                                                        {
                                                            "type": "integer"
                                                        },
                                                        {
                                                            "type": "integer",
                                                            "enum": [
                                                                0
                                                            ]
                                                        }
                                                    ]
                                                },
                                                "delivery_fee_prepaid_at": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "payment_submitted_at": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "payment_verified_at": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "payment_expires_at": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "payment_rejection_reason": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "id",
                                                "reference_no",
                                                "customer_id",
                                                "store_id",
                                                "vehicle_type_id",
                                                "passenger_count",
                                                "service_level",
                                                "speed_multiplier",
                                                "pickup_address",
                                                "pickup_latitude",
                                                "pickup_longitude",
                                                "dropoff_address",
                                                "dropoff_latitude",
                                                "dropoff_longitude",
                                                "distance",
                                                "trip_type",
                                                "payment_type_id",
                                                "flow_type",
                                                "dispatch_status",
                                                "dispatch_at",
                                                "status",
                                                "driver_id",
                                                "store_status",
                                                "prep_status",
                                                "fulfillment_label",
                                                "requires_quote_confirmation",
                                                "request_kind",
                                                "request_attachments",
                                                "patient_name",
                                                "patient_birthdate",
                                                "request_notes",
                                                "quote_status",
                                                "quote_ready_at",
                                                "quote_accepted_at",
                                                "quote_payload",
                                                "quote_accept_payload",
                                                "totals",
                                                "items",
                                                "custom_items",
                                                "quote_items",
                                                "driver",
                                                "store",
                                                "parcel",
                                                "payment_method",
                                                "payment_status",
                                                "payment_reference",
                                                "cod_confirmation_pending",
                                                "cod_confirmation_expires_at",
                                                "payment_receipt_path",
                                                "payment_receipt_url",
                                                "payment_receipt_thumb_url",
                                                "delivery_fee_prepaid_points",
                                                "delivery_fee_prepaid_at",
                                                "payment_submitted_at",
                                                "payment_verified_at",
                                                "payment_expires_at",
                                                "payment_rejection_reason"
                                            ]
                                        },
                                        "id": {
                                            "type": "integer"
                                        },
                                        "reference_no": {
                                            "type": "string"
                                        },
                                        "customer_id": {
                                            "type": "integer"
                                        },
                                        "store_id": {
                                            "type": [
                                                "integer",
                                                "null"
                                            ]
                                        },
                                        "vehicle_type_id": {
                                            "anyOf": [
                                                {
                                                    "type": "integer"
                                                },
                                                {
                                                    "type": "integer",
                                                    "enum": [
                                                        0
                                                    ]
                                                }
                                            ]
                                        },
                                        "passenger_count": {
                                            "type": "integer",
                                            "enum": [
                                                1
                                            ]
                                        },
                                        "service_level": {
                                            "type": "string",
                                            "description": "Optional"
                                        },
                                        "speed_multiplier": {
                                            "type": [
                                                "number",
                                                "null"
                                            ]
                                        },
                                        "pickup_address": {
                                            "type": "string"
                                        },
                                        "pickup_latitude": {
                                            "type": [
                                                "number",
                                                "null"
                                            ]
                                        },
                                        "pickup_longitude": {
                                            "type": [
                                                "number",
                                                "null"
                                            ]
                                        },
                                        "dropoff_address": {
                                            "type": "string"
                                        },
                                        "dropoff_latitude": {
                                            "type": [
                                                "number",
                                                "null"
                                            ]
                                        },
                                        "dropoff_longitude": {
                                            "type": [
                                                "number",
                                                "null"
                                            ]
                                        },
                                        "distance": {
                                            "type": "string"
                                        },
                                        "trip_type": {
                                            "type": "string"
                                        },
                                        "payment_type_id": {
                                            "type": "integer"
                                        },
                                        "flow_type": {
                                            "type": "string"
                                        },
                                        "dispatch_status": {
                                            "type": "string"
                                        },
                                        "dispatch_at": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "status": {
                                            "type": "string"
                                        },
                                        "driver_id": {
                                            "type": [
                                                "integer",
                                                "null"
                                            ]
                                        },
                                        "store_status": {
                                            "type": "string"
                                        },
                                        "prep_status": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "fulfillment_label": {
                                            "type": "string",
                                            "enum": [
                                                "Rider en route"
                                            ]
                                        },
                                        "requires_quote_confirmation": {
                                            "type": "boolean",
                                            "description": "Paper/pharmacy request metadata (safe to add fields)"
                                        },
                                        "request_kind": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "request_attachments": {
                                            "anyOf": [
                                                {
                                                    "type": "array",
                                                    "items": {}
                                                },
                                                {
                                                    "type": "null"
                                                },
                                                {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    },
                                                    "minItems": 0,
                                                    "maxItems": 0,
                                                    "additionalItems": false
                                                }
                                            ]
                                        },
                                        "patient_name": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "patient_birthdate": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "request_notes": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "quote_status": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "quote_ready_at": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "quote_accepted_at": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "quote_payload": {
                                            "type": [
                                                "array",
                                                "null"
                                            ],
                                            "items": {}
                                        },
                                        "quote_accept_payload": {
                                            "type": [
                                                "array",
                                                "null"
                                            ],
                                            "items": {}
                                        },
                                        "totals": {
                                            "type": "object",
                                            "properties": {
                                                "items_subtotal": {
                                                    "type": "number"
                                                },
                                                "delivery_fee": {
                                                    "type": "number"
                                                },
                                                "driver_fare": {
                                                    "type": "number"
                                                },
                                                "platform_fee": {
                                                    "type": "number"
                                                },
                                                "payable_total": {
                                                    "type": "number"
                                                }
                                            },
                                            "required": [
                                                "items_subtotal",
                                                "delivery_fee",
                                                "driver_fare",
                                                "platform_fee",
                                                "payable_total"
                                            ]
                                        },
                                        "items": {
                                            "type": "array",
                                            "description": "Normal items",
                                            "items": {
                                                "type": "object",
                                                "properties": {
                                                    "id": {
                                                        "type": "integer"
                                                    },
                                                    "product_id": {
                                                        "type": "integer"
                                                    },
                                                    "name": {
                                                        "type": "string"
                                                    },
                                                    "qty": {
                                                        "type": "integer"
                                                    },
                                                    "price": {
                                                        "type": "number"
                                                    },
                                                    "line_total": {
                                                        "type": "number"
                                                    },
                                                    "notes": {
                                                        "type": "string"
                                                    },
                                                    "state_label": {
                                                        "type": "string",
                                                        "enum": [
                                                            "Rider en route"
                                                        ]
                                                    }
                                                },
                                                "required": [
                                                    "id",
                                                    "product_id",
                                                    "name",
                                                    "qty",
                                                    "price",
                                                    "line_total",
                                                    "notes",
                                                    "state_label"
                                                ]
                                            }
                                        },
                                        "custom_items": {
                                            "type": "string",
                                            "description": "Custom items (paper/pharmacy confirmed list)"
                                        },
                                        "quote_items": {
                                            "type": "array",
                                            "description": "Quote preview (paper/pharmacy) before customer confirms",
                                            "prefixItems": [
                                                {
                                                    "type": "object",
                                                    "properties": {
                                                        "name": {
                                                            "type": "string"
                                                        },
                                                        "qty": {
                                                            "type": "integer"
                                                        },
                                                        "price": {
                                                            "type": "number"
                                                        },
                                                        "line_total": {
                                                            "type": "number"
                                                        },
                                                        "notes": {
                                                            "type": [
                                                                "string",
                                                                "null"
                                                            ]
                                                        },
                                                        "substitutions": {
                                                            "anyOf": [
                                                                {
                                                                    "type": "string"
                                                                },
                                                                {
                                                                    "type": "array",
                                                                    "items": {
                                                                        "type": "string"
                                                                    },
                                                                    "minItems": 0,
                                                                    "maxItems": 0,
                                                                    "additionalItems": false
                                                                }
                                                            ]
                                                        }
                                                    },
                                                    "required": [
                                                        "name",
                                                        "qty",
                                                        "price",
                                                        "line_total",
                                                        "notes",
                                                        "substitutions"
                                                    ]
                                                }
                                            ],
                                            "minItems": 1,
                                            "maxItems": 1,
                                            "additionalItems": false
                                        },
                                        "driver": {
                                            "type": [
                                                "object",
                                                "null"
                                            ],
                                            "properties": {
                                                "id": {
                                                    "type": "integer"
                                                },
                                                "name": {
                                                    "type": "string"
                                                },
                                                "phone": {
                                                    "type": "string"
                                                },
                                                "plate_number": {
                                                    "type": "string"
                                                },
                                                "location": {
                                                    "type": [
                                                        "object",
                                                        "null"
                                                    ],
                                                    "description": "\u2705 GPS + freshness for live map UI",
                                                    "properties": {
                                                        "latitude": {
                                                            "type": "number"
                                                        },
                                                        "longitude": {
                                                            "type": "number"
                                                        },
                                                        "updated_at": {
                                                            "type": [
                                                                "string",
                                                                "null"
                                                            ]
                                                        },
                                                        "last_seen_at": {
                                                            "type": [
                                                                "string",
                                                                "null"
                                                            ]
                                                        }
                                                    },
                                                    "required": [
                                                        "latitude",
                                                        "longitude",
                                                        "updated_at",
                                                        "last_seen_at"
                                                    ]
                                                },
                                                "location_stale": {
                                                    "type": [
                                                        "boolean",
                                                        "null"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "id",
                                                "name",
                                                "phone",
                                                "plate_number",
                                                "location",
                                                "location_stale"
                                            ]
                                        },
                                        "store": {
                                            "type": [
                                                "object",
                                                "null"
                                            ],
                                            "properties": {
                                                "id": {
                                                    "type": "integer"
                                                },
                                                "name": {
                                                    "type": "string"
                                                },
                                                "address": {
                                                    "type": "string"
                                                }
                                            },
                                            "required": [
                                                "id",
                                                "name",
                                                "address"
                                            ]
                                        },
                                        "parcel": {
                                            "type": [
                                                "object",
                                                "null"
                                            ],
                                            "properties": {
                                                "sender_name": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "sender_phone": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "recipient_name": {
                                                    "type": "string"
                                                },
                                                "recipient_phone": {
                                                    "type": "string"
                                                },
                                                "item_category": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "item_weight_kg": {
                                                    "type": [
                                                        "number",
                                                        "null"
                                                    ]
                                                },
                                                "item_description": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "declared_value": {
                                                    "type": [
                                                        "number",
                                                        "null"
                                                    ]
                                                },
                                                "pickup_note": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "dropoff_note": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "cod_amount": {
                                                    "type": [
                                                        "number",
                                                        "null"
                                                    ]
                                                },
                                                "cod_status": {
                                                    "type": "string"
                                                },
                                                "cod_collected_at": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "cod_remitted_at": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "cod_settled_at": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "cod_receiver_name": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "cod_notes": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "cod_proof_url": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "cod_proof_thumb_url": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "sender_name",
                                                "sender_phone",
                                                "recipient_name",
                                                "recipient_phone",
                                                "item_category",
                                                "item_weight_kg",
                                                "item_description",
                                                "declared_value",
                                                "pickup_note",
                                                "dropoff_note",
                                                "cod_amount",
                                                "cod_status",
                                                "cod_collected_at",
                                                "cod_remitted_at",
                                                "cod_settled_at",
                                                "cod_receiver_name",
                                                "cod_notes",
                                                "cod_proof_url",
                                                "cod_proof_thumb_url"
                                            ]
                                        },
                                        "payment_method": {
                                            "type": "string"
                                        },
                                        "payment_status": {
                                            "type": "string"
                                        },
                                        "payment_reference": {
                                            "type": "string"
                                        },
                                        "cod_confirmation_pending": {
                                            "type": "boolean",
                                            "description": "Phase 4: COD OTP confirmation hints (for UI)."
                                        },
                                        "cod_confirmation_expires_at": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "payment_receipt_path": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "payment_receipt_url": {
                                            "type": "string"
                                        },
                                        "payment_receipt_thumb_url": {
                                            "type": "string"
                                        },
                                        "delivery_fee_prepaid_points": {
                                            "anyOf": [
                                                {
                                                    "type": "integer"
                                                },
                                                {
                                                    "type": "integer",
                                                    "enum": [
                                                        0
                                                    ]
                                                }
                                            ]
                                        },
                                        "delivery_fee_prepaid_at": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "payment_submitted_at": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "payment_verified_at": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "payment_expires_at": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "payment_rejection_reason": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "platform_fee_points": {
                                            "type": "integer"
                                        },
                                        "driver_balance_points": {
                                            "type": "integer"
                                        }
                                    },
                                    "required": [
                                        "order",
                                        "id",
                                        "reference_no",
                                        "customer_id",
                                        "store_id",
                                        "vehicle_type_id",
                                        "passenger_count",
                                        "service_level",
                                        "speed_multiplier",
                                        "pickup_address",
                                        "pickup_latitude",
                                        "pickup_longitude",
                                        "dropoff_address",
                                        "dropoff_latitude",
                                        "dropoff_longitude",
                                        "distance",
                                        "trip_type",
                                        "payment_type_id",
                                        "flow_type",
                                        "dispatch_status",
                                        "dispatch_at",
                                        "status",
                                        "driver_id",
                                        "store_status",
                                        "prep_status",
                                        "fulfillment_label",
                                        "requires_quote_confirmation",
                                        "request_kind",
                                        "request_attachments",
                                        "patient_name",
                                        "patient_birthdate",
                                        "request_notes",
                                        "quote_status",
                                        "quote_ready_at",
                                        "quote_accepted_at",
                                        "quote_payload",
                                        "quote_accept_payload",
                                        "totals",
                                        "items",
                                        "custom_items",
                                        "quote_items",
                                        "driver",
                                        "store",
                                        "parcel",
                                        "payment_method",
                                        "payment_status",
                                        "payment_reference",
                                        "cod_confirmation_pending",
                                        "cod_confirmation_expires_at",
                                        "payment_receipt_path",
                                        "payment_receipt_url",
                                        "payment_receipt_thumb_url",
                                        "delivery_fee_prepaid_points",
                                        "delivery_fee_prepaid_at",
                                        "payment_submitted_at",
                                        "payment_verified_at",
                                        "payment_expires_at",
                                        "payment_rejection_reason",
                                        "platform_fee_points",
                                        "driver_balance_points"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/customer/orders/{order}/rating": {
            "post": {
                "operationId": "deliveryOrder.submitRating",
                "tags": [
                    "DeliveryOrder"
                ],
                "parameters": [
                    {
                        "name": "order",
                        "in": "path",
                        "required": true,
                        "description": "The order ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "stars": {
                                        "type": [
                                            "integer",
                                            "null"
                                        ],
                                        "minimum": 1,
                                        "maximum": 5
                                    },
                                    "rating": {
                                        "type": [
                                            "integer",
                                            "null"
                                        ],
                                        "minimum": 1,
                                        "maximum": 5
                                    },
                                    "comment": {
                                        "type": [
                                            "string",
                                            "null"
                                        ],
                                        "maxLength": 1000
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "enum": [
                                                "Rating submitted."
                                            ]
                                        },
                                        "order": {
                                            "anyOf": [
                                                {
                                                    "$ref": "#/components/schemas/DeliveryOrder"
                                                },
                                                {
                                                    "type": "null"
                                                }
                                            ]
                                        }
                                    },
                                    "required": [
                                        "message",
                                        "order"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/customer/orders/{order}/issue": {
            "post": {
                "operationId": "deliveryOrder.submitIssue",
                "tags": [
                    "DeliveryOrder"
                ],
                "parameters": [
                    {
                        "name": "order",
                        "in": "path",
                        "required": true,
                        "description": "The order ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "message": {
                                        "type": "string",
                                        "minLength": 3,
                                        "maxLength": 2000
                                    }
                                },
                                "required": [
                                    "message"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "enum": [
                                                "Issue received."
                                            ]
                                        },
                                        "order": {
                                            "anyOf": [
                                                {
                                                    "$ref": "#/components/schemas/DeliveryOrder"
                                                },
                                                {
                                                    "type": "null"
                                                }
                                            ]
                                        }
                                    },
                                    "required": [
                                        "message",
                                        "order"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/driver/jobs/pending-offer": {
            "get": {
                "operationId": "driver.pendingOffer",
                "summary": "\u2705 Preferred endpoint for the app.\n- Always returns a live, unexpired offer OR null.\n- Never returns offers that are already expired (prevents \"attempt_expired\" UX)",
                "tags": [
                    "Driver"
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "type": {
                                            "type": "string",
                                            "enum": [
                                                "NEW_JOB_OFFER"
                                            ]
                                        },
                                        "attempt_id": {
                                            "type": "string"
                                        },
                                        "order_id": {
                                            "type": "string"
                                        },
                                        "pickup_address": {
                                            "type": "string"
                                        },
                                        "dropoff_address": {
                                            "type": "string"
                                        },
                                        "distance": {
                                            "type": "string"
                                        },
                                        "payable_total": {
                                            "type": "string"
                                        },
                                        "eta": {
                                            "type": "string",
                                            "description": "Phase 2: ETA range + confidence (heuristic)"
                                        },
                                        "batch_group_id": {
                                            "type": "string",
                                            "description": "Phase 2: batching primitive (present if part of a batch)"
                                        },
                                        "batch_sibling_order_id": {
                                            "type": "string"
                                        },
                                        "offer_expires_at": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "server_time": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "type",
                                        "attempt_id",
                                        "order_id",
                                        "pickup_address",
                                        "dropoff_address",
                                        "distance",
                                        "payable_total",
                                        "eta",
                                        "batch_group_id",
                                        "batch_sibling_order_id",
                                        "offer_expires_at",
                                        "server_time"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/driver/jobs/offer-ack": {
            "post": {
                "operationId": "driver.ackOffer",
                "tags": [
                    "Driver"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "attempt_id": {
                                        "type": "string"
                                    },
                                    "order_id": {
                                        "type": [
                                            "string",
                                            "null"
                                        ]
                                    }
                                },
                                "required": [
                                    "attempt_id"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "anyOf": [
                                        {
                                            "type": "object",
                                            "properties": {
                                                "ok": {
                                                    "type": "boolean"
                                                },
                                                "acked": {
                                                    "type": "boolean"
                                                },
                                                "ack_at": {
                                                    "type": "string"
                                                }
                                            },
                                            "required": [
                                                "ok",
                                                "acked",
                                                "ack_at"
                                            ]
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "ok": {
                                                    "type": "boolean"
                                                },
                                                "acked": {
                                                    "type": "boolean"
                                                }
                                            },
                                            "required": [
                                                "ok",
                                                "acked"
                                            ]
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/driver/jobs/pending": {
            "get": {
                "operationId": "driver.pendingJob",
                "summary": "Backwards-compat endpoint: still supported but aligned to the same logic.\nIf your app can, use pendingOffer() only",
                "tags": [
                    "Driver"
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "attempt_id": {
                                            "type": "string"
                                        },
                                        "order": {
                                            "anyOf": [
                                                {
                                                    "$ref": "#/components/schemas/DeliveryOrder"
                                                },
                                                {
                                                    "type": "null"
                                                }
                                            ]
                                        },
                                        "offer_expires_at": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "server_time": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "attempt_id",
                                        "order",
                                        "offer_expires_at",
                                        "server_time"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/driver/jobs/{order}/batch": {
            "get": {
                "operationId": "driver.batch",
                "summary": "GET /v1/driver/jobs/{order}/batch\nBatching visibility endpoint for drivers",
                "tags": [
                    "Driver"
                ],
                "parameters": [
                    {
                        "name": "order",
                        "in": "path",
                        "required": true,
                        "description": "The order ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "data"
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/driver/jobs/{order}": {
            "get": {
                "operationId": "driver.showJob",
                "tags": [
                    "Driver"
                ],
                "parameters": [
                    {
                        "name": "order",
                        "in": "path",
                        "required": true,
                        "description": "The order ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/DeliveryOrder"
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/driver/wallet": {
            "get": {
                "operationId": "driver.wallet",
                "tags": [
                    "Driver"
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "balance_points": {
                                            "type": "integer"
                                        },
                                        "status": {
                                            "type": "string"
                                        },
                                        "min_required_to_work": {
                                            "type": "integer"
                                        }
                                    },
                                    "required": [
                                        "balance_points",
                                        "status",
                                        "min_required_to_work"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/driver/wallet/ledger": {
            "get": {
                "operationId": "driver.walletLedger",
                "tags": [
                    "Driver"
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "balance_points": {
                                            "type": "integer"
                                        },
                                        "transactions": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/DriverWalletTransaction"
                                            }
                                        }
                                    },
                                    "required": [
                                        "balance_points",
                                        "transactions"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/driver/register-fcm-token": {
            "post": {
                "operationId": "driver.registerFcmToken_0",
                "tags": [
                    "Driver"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "token": {
                                        "type": "string"
                                    },
                                    "platform": {
                                        "type": [
                                            "string",
                                            "null"
                                        ]
                                    }
                                },
                                "required": [
                                    "token"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "enum": [
                                                "FCM token registered successfully"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "message"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/driver/heartbeat": {
            "post": {
                "operationId": "driver.heartbeat",
                "tags": [
                    "Driver"
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "lat": {
                                        "type": [
                                            "number",
                                            "null"
                                        ],
                                        "minimum": -90,
                                        "maximum": 90
                                    },
                                    "lng": {
                                        "type": [
                                            "number",
                                            "null"
                                        ],
                                        "minimum": -180,
                                        "maximum": 180
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        },
                                        "server_time": {
                                            "type": "string"
                                        },
                                        "last_seen_at": {
                                            "type": "string"
                                        },
                                        "status": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "ok",
                                        "server_time",
                                        "last_seen_at",
                                        "status"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/driver/jobs/{order}/accept": {
            "post": {
                "operationId": "driver.acceptJob",
                "tags": [
                    "Driver"
                ],
                "parameters": [
                    {
                        "name": "order",
                        "in": "path",
                        "required": true,
                        "description": "The order ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "attempt_id": {
                                        "type": "string"
                                    }
                                },
                                "required": [
                                    "attempt_id"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/driver/jobs/{order}/reject": {
            "post": {
                "operationId": "driver.rejectJob",
                "tags": [
                    "Driver"
                ],
                "parameters": [
                    {
                        "name": "order",
                        "in": "path",
                        "required": true,
                        "description": "The order ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "attempt_id": {
                                        "type": "string"
                                    }
                                },
                                "required": [
                                    "attempt_id"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "anyOf": [
                                        {
                                            "type": "object",
                                            "properties": {
                                                "ok": {
                                                    "type": "boolean"
                                                },
                                                "order": {
                                                    "type": "string"
                                                }
                                            },
                                            "required": [
                                                "ok",
                                                "order"
                                            ]
                                        },
                                        {
                                            "type": "string"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/driver/jobs/{order}/status": {
            "post": {
                "operationId": "driver.updateJobStatus",
                "tags": [
                    "Driver"
                ],
                "parameters": [
                    {
                        "name": "order",
                        "in": "path",
                        "required": true,
                        "description": "The order ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "status": {
                                        "type": "string",
                                        "enum": [
                                            "accepted",
                                            "arrived",
                                            "picked_up",
                                            "in_transit",
                                            "delivered",
                                            "cancelled"
                                        ]
                                    }
                                },
                                "required": [
                                    "status"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/DeliveryOrder"
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "409": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "anyOf": [
                                        {
                                            "type": "object",
                                            "properties": {
                                                "message": {
                                                    "type": "string",
                                                    "enum": [
                                                        "Driver cannot progress job until payment verified."
                                                    ]
                                                },
                                                "payment_status": {
                                                    "type": "string"
                                                },
                                                "status_attempted": {
                                                    "type": "string"
                                                }
                                            },
                                            "required": [
                                                "message",
                                                "payment_status",
                                                "status_attempted"
                                            ]
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "message": {
                                                    "type": "string",
                                                    "enum": [
                                                        "COD must be collected before completing this parcel."
                                                    ]
                                                },
                                                "cod_status": {
                                                    "type": "string"
                                                }
                                            },
                                            "required": [
                                                "message",
                                                "cod_status"
                                            ]
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "message": {
                                                    "type": "string",
                                                    "enum": [
                                                        "Dropoff PIN verification required before marking delivered."
                                                    ]
                                                },
                                                "code": {
                                                    "type": "string",
                                                    "enum": [
                                                        "DROP_OFF_PIN_REQUIRED"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "message",
                                                "code"
                                            ]
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/driver/jobs/{order}/incident": {
            "post": {
                "operationId": "driver.reportCustomerIncident",
                "summary": "Phase 5: Driver-reported customer delivery incidents.\nThese events feed into customer trust penalties (COD disabled windows, eventual block)",
                "tags": [
                    "Driver"
                ],
                "parameters": [
                    {
                        "name": "order",
                        "in": "path",
                        "required": true,
                        "description": "The order ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "incident_type": {
                                        "type": "string",
                                        "enum": [
                                            "no_show",
                                            "unreachable",
                                            "fake_address",
                                            "refused_cod"
                                        ]
                                    },
                                    "notes": {
                                        "type": [
                                            "string",
                                            "null"
                                        ],
                                        "maxLength": 2000
                                    }
                                },
                                "required": [
                                    "incident_type"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "enum": [
                                                "Incident recorded."
                                            ]
                                        },
                                        "customer_id": {
                                            "type": "integer"
                                        },
                                        "profile": {
                                            "anyOf": [
                                                {
                                                    "$ref": "#/components/schemas/CustomerTrustProfile"
                                                },
                                                {
                                                    "type": "null"
                                                }
                                            ]
                                        }
                                    },
                                    "required": [
                                        "message",
                                        "customer_id",
                                        "profile"
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/driver/status": {
            "post": {
                "operationId": "driver.updateStatus",
                "tags": [
                    "Driver"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "status": {
                                        "type": "string",
                                        "enum": [
                                            "available",
                                            "busy",
                                            "away",
                                            "offline",
                                            "notified",
                                            "inactive"
                                        ]
                                    }
                                },
                                "required": [
                                    "status"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "status": {
                                            "type": "string"
                                        },
                                        "status_stored": {
                                            "type": "string"
                                        },
                                        "wallet_balance_points": {
                                            "type": "integer"
                                        }
                                    },
                                    "required": [
                                        "status",
                                        "status_stored",
                                        "wallet_balance_points"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/customer/register-fcm-token": {
            "post": {
                "operationId": "driver.registerFcmToken_0",
                "tags": [
                    "Driver"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "token": {
                                        "type": "string"
                                    },
                                    "platform": {
                                        "type": [
                                            "string",
                                            "null"
                                        ]
                                    }
                                },
                                "required": [
                                    "token"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "enum": [
                                                "FCM token registered successfully"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "message"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/customer/wallet": {
            "get": {
                "operationId": "driver.customerWallet",
                "tags": [
                    "Driver"
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "balance_points": {
                                            "type": "integer"
                                        },
                                        "status": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "balance_points",
                                        "status"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/customer/wallet/ledger": {
            "get": {
                "operationId": "driver.customerWalletLedger",
                "tags": [
                    "Driver"
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "balance_points": {
                                            "type": "integer"
                                        },
                                        "transactions": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/CustomerWalletTransaction"
                                            }
                                        }
                                    },
                                    "required": [
                                        "balance_points",
                                        "transactions"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/onboarding/driver/apply": {
            "post": {
                "operationId": "onboarding.driver.apply",
                "tags": [
                    "DriverApply"
                ],
                "responses": {
                    "201": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "enum": [
                                                "Driver application submitted."
                                            ]
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "id": {
                                                    "type": "integer"
                                                },
                                                "status": {
                                                    "type": "string"
                                                }
                                            },
                                            "required": [
                                                "id",
                                                "status"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "message",
                                        "data"
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/driver/documents": {
            "get": {
                "operationId": "driver.documents.index",
                "tags": [
                    "DriverDocumentUpload"
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "anyOf": [
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "array",
                                                    "items": {
                                                        "$ref": "#/components/schemas/DriverDocument"
                                                    }
                                                }
                                            },
                                            "required": [
                                                "data"
                                            ]
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    },
                                                    "minItems": 0,
                                                    "maxItems": 0,
                                                    "additionalItems": false
                                                }
                                            },
                                            "required": [
                                                "data"
                                            ]
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            },
            "post": {
                "operationId": "driver.documents.store",
                "tags": [
                    "DriverDocumentUpload"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "type": {
                                        "type": "string"
                                    },
                                    "file": {
                                        "type": "string",
                                        "format": "binary",
                                        "contentMediaType": "application/octet-stream",
                                        "description": "\u2705 best-practice: restrict types (pdf or images)",
                                        "maxLength": 10240
                                    },
                                    "document_number": {
                                        "type": [
                                            "string",
                                            "null"
                                        ],
                                        "description": "10MB",
                                        "maxLength": 80
                                    },
                                    "expires_at": {
                                        "type": [
                                            "string",
                                            "null"
                                        ],
                                        "format": "date-time"
                                    }
                                },
                                "required": [
                                    "type",
                                    "file"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "enum": [
                                                "Document uploaded."
                                            ]
                                        },
                                        "data": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "message",
                                        "data"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/driver/jobs/{order}/dropoff/pin/verify": {
            "post": {
                "operationId": "driverDropoffPin.verify",
                "summary": "Verify dropoff PIN for a job",
                "tags": [
                    "DriverDropoffPin"
                ],
                "parameters": [
                    {
                        "name": "order",
                        "in": "path",
                        "required": true,
                        "description": "The order ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "pin": {
                                        "type": "string",
                                        "minLength": 4,
                                        "maxLength": 8
                                    },
                                    "latitude": {
                                        "type": "number"
                                    },
                                    "longitude": {
                                        "type": "number"
                                    }
                                },
                                "required": [
                                    "pin"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "anyOf": [
                                        {
                                            "type": "object",
                                            "properties": {
                                                "ok": {
                                                    "type": "boolean"
                                                },
                                                "verified_at": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ],
                                                    "format": "date-time"
                                                },
                                                "order_id": {
                                                    "type": "integer"
                                                }
                                            },
                                            "required": [
                                                "ok",
                                                "verified_at",
                                                "order_id"
                                            ]
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "message": {
                                                    "type": "string",
                                                    "enum": [
                                                        "Dropoff PIN already verified"
                                                    ]
                                                },
                                                "ok": {
                                                    "type": "boolean"
                                                }
                                            },
                                            "required": [
                                                "message",
                                                "ok"
                                            ]
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "message": {
                                                    "type": "string",
                                                    "enum": [
                                                        "Dropoff PIN not required"
                                                    ]
                                                },
                                                "ok": {
                                                    "type": "boolean"
                                                }
                                            },
                                            "required": [
                                                "message",
                                                "ok"
                                            ]
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "429": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "enum": [
                                                "Too many attempts. Please try again later."
                                            ]
                                        },
                                        "code": {
                                            "type": "string",
                                            "enum": [
                                                "PIN_LOCKED"
                                            ]
                                        },
                                        "retry_after_seconds": {
                                            "type": [
                                                "object",
                                                "null"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "message",
                                        "code",
                                        "retry_after_seconds"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/driver/heartbeat/ping": {
            "post": {
                "operationId": "driverHeartbeat.store",
                "tags": [
                    "DriverHeartbeat"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/DriverHeartbeatRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        }
                                    },
                                    "required": [
                                        "ok"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/driver/jobs/{order}/parcel-cod/collected": {
            "post": {
                "operationId": "driverParcelCod.collected",
                "summary": "Phase 1: driver marks COD as collected (cash received from recipient)",
                "tags": [
                    "DriverParcelCod"
                ],
                "parameters": [
                    {
                        "name": "order",
                        "in": "path",
                        "required": true,
                        "description": "The order ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "receiver_name": {
                                        "type": [
                                            "string",
                                            "null"
                                        ],
                                        "maxLength": 80
                                    },
                                    "notes": {
                                        "type": [
                                            "string",
                                            "null"
                                        ],
                                        "maxLength": 200
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        },
                                        "order_id": {
                                            "type": "integer"
                                        },
                                        "cod_status": {
                                            "type": "string"
                                        },
                                        "cod_collected_at": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "ok",
                                        "order_id",
                                        "cod_status",
                                        "cod_collected_at"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "409": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "enum": [
                                                "COD cannot be marked as collected for this status."
                                            ]
                                        },
                                        "cod_status": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "message",
                                        "cod_status"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/driver/jobs/{order}/parcel-cod/remit-proof": {
            "post": {
                "operationId": "driverParcelCod.submitRemitProof",
                "tags": [
                    "DriverParcelCod"
                ],
                "parameters": [
                    {
                        "name": "order",
                        "in": "path",
                        "required": true,
                        "description": "The order ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "proof": {
                                        "type": "string",
                                        "format": "binary",
                                        "contentMediaType": "application/octet-stream",
                                        "maxLength": 6144
                                    },
                                    "notes": {
                                        "type": [
                                            "string",
                                            "null"
                                        ],
                                        "maxLength": 500
                                    }
                                },
                                "required": [
                                    "proof"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        },
                                        "cod_status": {
                                            "type": "string"
                                        },
                                        "cod_proof_path": {
                                            "type": "string"
                                        },
                                        "cod_proof_url": {
                                            "type": "string"
                                        },
                                        "cod_proof_thumb_url": {
                                            "type": "string"
                                        },
                                        "cod_remitted_at": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "ok",
                                        "cod_status",
                                        "cod_proof_path",
                                        "cod_proof_url",
                                        "cod_proof_thumb_url",
                                        "cod_remitted_at"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "409": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "enum": [
                                                "COD not collected yet"
                                            ]
                                        },
                                        "cod_status": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "message",
                                        "cod_status"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/driver/jobs/{order}/proof-of-delivery": {
            "post": {
                "operationId": "driverProofOfDelivery.store",
                "tags": [
                    "DriverProofOfDelivery"
                ],
                "parameters": [
                    {
                        "name": "order",
                        "in": "path",
                        "required": true,
                        "description": "The order ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "$ref": "#/components/schemas/DriverProofOfDeliveryRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "proof": {
                                            "type": "object",
                                            "properties": {
                                                "id": {
                                                    "type": "integer"
                                                },
                                                "delivery_order_id": {
                                                    "type": "integer"
                                                },
                                                "driver_id": {
                                                    "type": "integer"
                                                },
                                                "captured_at": {
                                                    "type": "string"
                                                },
                                                "latitude": {
                                                    "type": [
                                                        "number",
                                                        "null"
                                                    ]
                                                },
                                                "longitude": {
                                                    "type": [
                                                        "number",
                                                        "null"
                                                    ]
                                                },
                                                "photo_url": {
                                                    "type": "string"
                                                }
                                            },
                                            "required": [
                                                "id",
                                                "delivery_order_id",
                                                "driver_id",
                                                "captured_at",
                                                "latitude",
                                                "longitude",
                                                "photo_url"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "proof"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "enum": [
                                                "Not your job"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "message"
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/driver/trust-me": {
            "get": {
                "operationId": "driver.driverTrustMe",
                "tags": [
                    "DriverTrustMe"
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "score": {
                                            "type": "integer"
                                        },
                                        "accepted_jobs": {
                                            "type": "integer",
                                            "description": "reliability counters"
                                        },
                                        "completed_jobs": {
                                            "type": "integer"
                                        },
                                        "cancel_after_accept": {
                                            "type": "integer"
                                        },
                                        "reject_count": {
                                            "type": "integer"
                                        },
                                        "idle_flags": {
                                            "type": "integer"
                                        },
                                        "avg_ack_ms": {
                                            "type": [
                                                "integer",
                                                "null"
                                            ],
                                            "description": "timing metrics"
                                        },
                                        "avg_response_ms": {
                                            "type": [
                                                "integer",
                                                "null"
                                            ]
                                        },
                                        "timeout_strikes": {
                                            "type": "integer",
                                            "description": "enforcement signals"
                                        },
                                        "miss_streak": {
                                            "type": "integer"
                                        },
                                        "shadowbanned_until": {
                                            "type": "string",
                                            "description": "pause / shadowban windows (must be datetime-casted in model)"
                                        },
                                        "last_timeout_at": {
                                            "type": "string"
                                        },
                                        "last_ack_at": {
                                            "type": "string"
                                        },
                                        "last_event_at": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "score",
                                        "accepted_jobs",
                                        "completed_jobs",
                                        "cancel_after_accept",
                                        "reject_count",
                                        "idle_flags",
                                        "avg_ack_ms",
                                        "avg_response_ms",
                                        "timeout_strikes",
                                        "miss_streak",
                                        "shadowbanned_until",
                                        "last_timeout_at",
                                        "last_ack_at",
                                        "last_event_at"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/driver/vehicle": {
            "post": {
                "operationId": "driverVehicle.store",
                "tags": [
                    "DriverVehicle"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "make": {
                                        "type": "string",
                                        "maxLength": 255
                                    },
                                    "model": {
                                        "type": "string",
                                        "maxLength": 255
                                    },
                                    "license_plate": {
                                        "type": "string",
                                        "maxLength": 255
                                    },
                                    "vehicle_type_id": {
                                        "type": "integer"
                                    },
                                    "passenger_count": {
                                        "type": "integer",
                                        "minimum": 1,
                                        "maximum": 6
                                    }
                                },
                                "required": [
                                    "make",
                                    "model",
                                    "license_plate",
                                    "vehicle_type_id",
                                    "passenger_count"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "enum": [
                                                "Vehicle created."
                                            ]
                                        },
                                        "data": {
                                            "$ref": "#/components/schemas/Vehicle"
                                        }
                                    },
                                    "required": [
                                        "message",
                                        "data"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "An error\n\nAn error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "anyOf": [
                                        {
                                            "type": "object",
                                            "properties": {
                                                "message": {
                                                    "type": "string",
                                                    "description": "Error overview.",
                                                    "example": "Driver profile not found."
                                                }
                                            },
                                            "required": [
                                                "message"
                                            ]
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "message": {
                                                    "type": "string",
                                                    "description": "Error overview.",
                                                    "example": "Vehicle OR/CR not approved."
                                                }
                                            },
                                            "required": [
                                                "message"
                                            ]
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/driver/vehicle-types": {
            "get": {
                "operationId": "driverVehicle.types",
                "tags": [
                    "DriverVehicle"
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/VehicleType"
                                            }
                                        }
                                    },
                                    "required": [
                                        "data"
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/files/stream/{token}": {
            "get": {
                "operationId": "files.stream",
                "tags": [
                    "File"
                ],
                "parameters": [
                    {
                        "name": "token",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "403": {
                        "description": "An error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "description": "Error overview.",
                                            "example": ""
                                        }
                                    },
                                    "required": [
                                        "message"
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    }
                }
            }
        },
        "/finance/overview": {
            "get": {
                "operationId": "financeDashboard.overview",
                "tags": [
                    "FinanceDashboard"
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "wallets": {
                                            "type": "object",
                                            "properties": {
                                                "driver_total_points": {
                                                    "type": "integer"
                                                },
                                                "merchant_total_points": {
                                                    "type": "integer"
                                                },
                                                "customer_total_points": {
                                                    "type": "integer"
                                                }
                                            },
                                            "required": [
                                                "driver_total_points",
                                                "merchant_total_points",
                                                "customer_total_points"
                                            ]
                                        },
                                        "requests": {
                                            "type": "object",
                                            "properties": {
                                                "topups_pending": {
                                                    "type": "integer"
                                                },
                                                "cashouts_pending": {
                                                    "type": "integer"
                                                },
                                                "topups_today_points": {
                                                    "type": "integer"
                                                },
                                                "cashouts_today_points": {
                                                    "type": "integer"
                                                }
                                            },
                                            "required": [
                                                "topups_pending",
                                                "cashouts_pending",
                                                "topups_today_points",
                                                "cashouts_today_points"
                                            ]
                                        },
                                        "reconciliation": {
                                            "type": "object",
                                            "properties": {
                                                "last_report": {
                                                    "type": "string"
                                                }
                                            },
                                            "required": [
                                                "last_report"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "wallets",
                                        "requests",
                                        "reconciliation"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/finance/reconcile/reports": {
            "get": {
                "operationId": "financeReconcile.reports",
                "tags": [
                    "FinanceReconcile"
                ],
                "parameters": [
                    {
                        "name": "per_page",
                        "in": "query",
                        "schema": {
                            "type": "integer",
                            "minimum": 1,
                            "maximum": 200
                        }
                    },
                    {
                        "name": "dry_run",
                        "in": "query",
                        "schema": {
                            "type": "boolean"
                        }
                    },
                    {
                        "name": "from",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "format": "date-time"
                        }
                    },
                    {
                        "name": "to",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "format": "date-time"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/LengthAwarePaginator"
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/finance/reconcile/reports/{id}": {
            "get": {
                "operationId": "financeReconcile.showReport",
                "tags": [
                    "FinanceReconcile"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "report": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "report"
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "enum": [
                                                "Report not found."
                                            ]
                                        }
                                    },
                                    "required": [
                                        "message"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/finance/reconcile/run": {
            "post": {
                "operationId": "financeReconcile.run",
                "tags": [
                    "FinanceReconcile"
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/FinanceReconcileRunRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "enum": [
                                                "Reconcile executed."
                                            ]
                                        },
                                        "report": {
                                            "type": "string"
                                        },
                                        "output": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "message",
                                        "report",
                                        "output"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/finance/wallets/{kind}/balances": {
            "get": {
                "operationId": "financeWallets.balances",
                "description": "Routes map that to \"balances\" (with {kind}=customer), so keep this wrapper\nand delegate to the existing customerBalances implementation.",
                "summary": "Enterprise tests call: GET /api/v1/finance/wallets/customer/balances",
                "tags": [
                    "FinanceWallets"
                ],
                "parameters": [
                    {
                        "name": "kind",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "page",
                        "in": "query",
                        "schema": {
                            "type": "integer",
                            "minimum": 1
                        }
                    },
                    {
                        "name": "per_page",
                        "in": "query",
                        "schema": {
                            "type": "integer",
                            "minimum": 1,
                            "maximum": 100
                        }
                    },
                    {
                        "name": "q",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "maxLength": 120
                        }
                    },
                    {
                        "name": "min_balance",
                        "in": "query",
                        "schema": {
                            "type": "integer",
                            "minimum": 0
                        }
                    },
                    {
                        "name": "max_balance",
                        "in": "query",
                        "schema": {
                            "type": "integer",
                            "minimum": 0
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "type": "object",
                                                "properties": {
                                                    "wallet": {
                                                        "type": "object",
                                                        "properties": {
                                                            "id": {
                                                                "type": "integer"
                                                            },
                                                            "user_id": {
                                                                "type": "integer"
                                                            },
                                                            "balance_points": {
                                                                "type": "integer"
                                                            },
                                                            "status": {
                                                                "type": "string"
                                                            },
                                                            "updated_at": {
                                                                "type": "string"
                                                            }
                                                        },
                                                        "required": [
                                                            "id",
                                                            "user_id",
                                                            "balance_points",
                                                            "status",
                                                            "updated_at"
                                                        ]
                                                    },
                                                    "customer": {
                                                        "type": [
                                                            "object",
                                                            "null"
                                                        ],
                                                        "properties": {
                                                            "id": {
                                                                "type": "integer"
                                                            },
                                                            "name": {
                                                                "type": "string"
                                                            },
                                                            "email": {
                                                                "type": "string"
                                                            },
                                                            "mobile": {
                                                                "type": "string"
                                                            }
                                                        },
                                                        "required": [
                                                            "id",
                                                            "name",
                                                            "email",
                                                            "mobile"
                                                        ]
                                                    }
                                                },
                                                "required": [
                                                    "wallet",
                                                    "customer"
                                                ]
                                            }
                                        },
                                        "meta": {
                                            "type": "object",
                                            "properties": {
                                                "current_page": {
                                                    "type": "integer"
                                                },
                                                "per_page": {
                                                    "type": "integer"
                                                },
                                                "total": {
                                                    "type": "integer"
                                                },
                                                "last_page": {
                                                    "type": "integer"
                                                }
                                            },
                                            "required": [
                                                "current_page",
                                                "per_page",
                                                "total",
                                                "last_page"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "data",
                                        "meta"
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "enum": [
                                                "Unsupported wallet kind."
                                            ]
                                        }
                                    },
                                    "required": [
                                        "message"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/finance/wallets/customer/adjust": {
            "post": {
                "operationId": "finance.financeWallets.adjust_0",
                "tags": [
                    "FinanceWallets"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/FinanceManualAdjustmentRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        },
                                        "wallet": {
                                            "type": [
                                                "object",
                                                "null"
                                            ],
                                            "properties": {
                                                "id": {
                                                    "type": "integer"
                                                },
                                                "user_id": {
                                                    "type": "integer"
                                                },
                                                "balance_points": {
                                                    "type": "integer"
                                                },
                                                "status": {
                                                    "type": "string"
                                                }
                                            },
                                            "required": [
                                                "id",
                                                "user_id",
                                                "balance_points",
                                                "status"
                                            ]
                                        },
                                        "transaction": {
                                            "type": "object",
                                            "properties": {
                                                "id": {
                                                    "type": "integer"
                                                },
                                                "direction": {
                                                    "type": "string"
                                                },
                                                "points": {
                                                    "type": "integer"
                                                },
                                                "type": {
                                                    "type": "string"
                                                },
                                                "reference": {
                                                    "type": "string"
                                                }
                                            },
                                            "required": [
                                                "id",
                                                "direction",
                                                "points",
                                                "type",
                                                "reference"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "ok",
                                        "wallet",
                                        "transaction"
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "enum": [
                                                "User not found."
                                            ]
                                        }
                                    },
                                    "required": [
                                        "message"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/finance/wallets/adjust": {
            "post": {
                "operationId": "finance.financeWallets.adjust_0",
                "tags": [
                    "FinanceWallets"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/FinanceManualAdjustmentRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        },
                                        "wallet": {
                                            "type": [
                                                "object",
                                                "null"
                                            ],
                                            "properties": {
                                                "id": {
                                                    "type": "integer"
                                                },
                                                "user_id": {
                                                    "type": "integer"
                                                },
                                                "balance_points": {
                                                    "type": "integer"
                                                },
                                                "status": {
                                                    "type": "string"
                                                }
                                            },
                                            "required": [
                                                "id",
                                                "user_id",
                                                "balance_points",
                                                "status"
                                            ]
                                        },
                                        "transaction": {
                                            "type": "object",
                                            "properties": {
                                                "id": {
                                                    "type": "integer"
                                                },
                                                "direction": {
                                                    "type": "string"
                                                },
                                                "points": {
                                                    "type": "integer"
                                                },
                                                "type": {
                                                    "type": "string"
                                                },
                                                "reference": {
                                                    "type": "string"
                                                }
                                            },
                                            "required": [
                                                "id",
                                                "direction",
                                                "points",
                                                "type",
                                                "reference"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "ok",
                                        "wallet",
                                        "transaction"
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "enum": [
                                                "User not found."
                                            ]
                                        }
                                    },
                                    "required": [
                                        "message"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/me/onboarding": {
            "get": {
                "operationId": "me.onboarding",
                "tags": [
                    "MeOnboarding"
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "anyOf": [
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "role": {
                                                            "type": "string"
                                                        },
                                                        "driver_profile": {
                                                            "type": [
                                                                "object",
                                                                "null"
                                                            ],
                                                            "properties": {
                                                                "id": {
                                                                    "type": "integer"
                                                                },
                                                                "status": {
                                                                    "type": "string"
                                                                },
                                                                "rejection_reason": {
                                                                    "type": [
                                                                        "string",
                                                                        "null"
                                                                    ]
                                                                }
                                                            },
                                                            "required": [
                                                                "id",
                                                                "status",
                                                                "rejection_reason"
                                                            ]
                                                        },
                                                        "merchant_profile": {
                                                            "type": [
                                                                "object",
                                                                "null"
                                                            ],
                                                            "properties": {
                                                                "id": {
                                                                    "type": "integer"
                                                                },
                                                                "status": {
                                                                    "type": "string"
                                                                },
                                                                "rejection_reason": {
                                                                    "type": [
                                                                        "string",
                                                                        "null"
                                                                    ]
                                                                }
                                                            },
                                                            "required": [
                                                                "id",
                                                                "status",
                                                                "rejection_reason"
                                                            ]
                                                        },
                                                        "partner_profile": {
                                                            "type": [
                                                                "object",
                                                                "null"
                                                            ],
                                                            "properties": {
                                                                "id": {
                                                                    "type": "integer"
                                                                },
                                                                "status": {
                                                                    "type": "string"
                                                                },
                                                                "rejection_reason": {
                                                                    "type": [
                                                                        "string",
                                                                        "null"
                                                                    ]
                                                                }
                                                            },
                                                            "required": [
                                                                "id",
                                                                "status",
                                                                "rejection_reason"
                                                            ]
                                                        }
                                                    },
                                                    "required": [
                                                        "role",
                                                        "driver_profile",
                                                        "merchant_profile",
                                                        "partner_profile"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "data"
                                            ]
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "role": {
                                                            "type": "string",
                                                            "enum": [
                                                                "customer"
                                                            ]
                                                        },
                                                        "driver_profile": {
                                                            "type": "null"
                                                        },
                                                        "merchant_profile": {
                                                            "type": "null"
                                                        },
                                                        "partner_profile": {
                                                            "type": "null"
                                                        }
                                                    },
                                                    "required": [
                                                        "role",
                                                        "driver_profile",
                                                        "merchant_profile",
                                                        "partner_profile"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "data"
                                            ]
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/me/role/customer": {
            "post": {
                "operationId": "meRole.setCustomer",
                "tags": [
                    "MeRole"
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "enum": [
                                                "Role updated to customer."
                                            ]
                                        },
                                        "user": {
                                            "$ref": "#/components/schemas/User"
                                        },
                                        "token": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "message",
                                        "user",
                                        "token"
                                    ]
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "An error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "description": "Error overview.",
                                            "example": "Customer role not configured."
                                        }
                                    },
                                    "required": [
                                        "message"
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/merchant/ai/generate": {
            "post": {
                "operationId": "merchantAi.generate",
                "tags": [
                    "MerchantAi"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/MerchantAiGenerateRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "503": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "message"
                                    ]
                                }
                            }
                        }
                    },
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "result": {
                                            "type": "string"
                                        },
                                        "variants": {
                                            "type": "string"
                                        },
                                        "notes": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "result",
                                        "variants",
                                        "notes"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/onboarding/merchant/apply": {
            "post": {
                "operationId": "onboarding.merchant.apply",
                "tags": [
                    "MerchantApply"
                ],
                "responses": {
                    "201": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "enum": [
                                                "Merchant application submitted."
                                            ]
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "id": {
                                                    "type": "integer"
                                                },
                                                "status": {
                                                    "type": "string"
                                                }
                                            },
                                            "required": [
                                                "id",
                                                "status"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "message",
                                        "data"
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/merchant/audit": {
            "get": {
                "operationId": "merchantAudit.index",
                "tags": [
                    "MerchantAudit"
                ],
                "parameters": [
                    {
                        "name": "limit",
                        "in": "query",
                        "schema": {
                            "type": "integer",
                            "minimum": 1,
                            "maximum": 100
                        }
                    },
                    {
                        "name": "action",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "maxLength": 120
                        }
                    },
                    {
                        "name": "order_id",
                        "in": "query",
                        "schema": {
                            "type": "integer",
                            "minimum": 1
                        }
                    },
                    {
                        "name": "from",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "format": "date-time"
                        }
                    },
                    {
                        "name": "to",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "format": "date-time"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "type": "string"
                                            }
                                        },
                                        "meta": {
                                            "type": "object",
                                            "properties": {
                                                "current_page": {
                                                    "type": "integer"
                                                },
                                                "per_page": {
                                                    "type": "integer"
                                                },
                                                "total": {
                                                    "type": "integer"
                                                },
                                                "last_page": {
                                                    "type": "integer"
                                                }
                                            },
                                            "required": [
                                                "current_page",
                                                "per_page",
                                                "total",
                                                "last_page"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "data",
                                        "meta"
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "enum": [
                                                "Merchant profile not found."
                                            ]
                                        }
                                    },
                                    "required": [
                                        "message"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/merchant/catalog": {
            "get": {
                "operationId": "merchantCatalog.index",
                "tags": [
                    "MerchantCatalog"
                ],
                "responses": {
                    "200": {
                        "description": "Array of `ProductCategoryResource`",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/ProductCategoryResource"
                                            }
                                        }
                                    },
                                    "required": [
                                        "data"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/merchant/kpi": {
            "get": {
                "operationId": "merchantKpi.show",
                "tags": [
                    "MerchantKpi"
                ],
                "parameters": [
                    {
                        "name": "store_id",
                        "in": "query",
                        "schema": {
                            "type": [
                                "integer",
                                "null"
                            ]
                        }
                    },
                    {
                        "name": "start_date",
                        "in": "query",
                        "schema": {
                            "type": [
                                "string",
                                "null"
                            ],
                            "format": "date"
                        }
                    },
                    {
                        "name": "end_date",
                        "in": "query",
                        "schema": {
                            "type": [
                                "string",
                                "null"
                            ],
                            "format": "date"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "`MerchantKpiResource`",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/components/schemas/MerchantKpiResource"
                                        }
                                    },
                                    "required": [
                                        "data"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/merchant/kpi/today": {
            "get": {
                "operationId": "merchantKpi.today",
                "description": "GET /v1/merchant/kpi/today\n\nRules (per tests):\n- Count only *completed* orders for *today* (based on created_at)\n- net_sales = SUM(total_price) - SUM(total_transaction_fare)",
                "summary": "Convenience endpoint expected by feature tests",
                "tags": [
                    "MerchantKpi"
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "today": {
                                            "type": "object",
                                            "properties": {
                                                "orders": {
                                                    "type": "integer"
                                                },
                                                "net_sales": {
                                                    "type": "integer"
                                                },
                                                "batched_orders": {
                                                    "description": "Phase 2",
                                                    "anyOf": [
                                                        {
                                                            "type": "integer"
                                                        },
                                                        {
                                                            "type": "integer",
                                                            "enum": [
                                                                0
                                                            ]
                                                        }
                                                    ]
                                                },
                                                "batch_rate": {
                                                    "anyOf": [
                                                        {
                                                            "type": "number"
                                                        },
                                                        {
                                                            "type": "integer",
                                                            "enum": [
                                                                0
                                                            ]
                                                        }
                                                    ]
                                                },
                                                "gross_sales": {
                                                    "type": "integer",
                                                    "description": "extra fields for dashboards"
                                                },
                                                "platform_fee": {
                                                    "type": "integer"
                                                },
                                                "cancelled": {
                                                    "type": "integer",
                                                    "description": "ops/analytics"
                                                },
                                                "cancelled_by": {
                                                    "type": "string"
                                                },
                                                "disputes_opened": {
                                                    "type": "integer"
                                                },
                                                "dispute_rate": {
                                                    "anyOf": [
                                                        {
                                                            "type": "number"
                                                        },
                                                        {
                                                            "type": "integer",
                                                            "enum": [
                                                                0
                                                            ]
                                                        }
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "orders",
                                                "net_sales",
                                                "batched_orders",
                                                "batch_rate",
                                                "gross_sales",
                                                "platform_fee",
                                                "cancelled",
                                                "cancelled_by",
                                                "disputes_opened",
                                                "dispute_rate"
                                            ]
                                        },
                                        "mtd": {
                                            "type": "object",
                                            "properties": {
                                                "orders": {
                                                    "type": "integer"
                                                },
                                                "net_sales": {
                                                    "type": "integer"
                                                },
                                                "gross_sales": {
                                                    "type": "integer"
                                                },
                                                "platform_fee": {
                                                    "type": "integer"
                                                },
                                                "batched_orders": {
                                                    "description": "Phase 2",
                                                    "anyOf": [
                                                        {
                                                            "type": "integer"
                                                        },
                                                        {
                                                            "type": "integer",
                                                            "enum": [
                                                                0
                                                            ]
                                                        }
                                                    ]
                                                },
                                                "batch_rate": {
                                                    "anyOf": [
                                                        {
                                                            "type": "number"
                                                        },
                                                        {
                                                            "type": "integer",
                                                            "enum": [
                                                                0
                                                            ]
                                                        }
                                                    ]
                                                },
                                                "cancelled": {
                                                    "type": "integer",
                                                    "description": "ops/analytics"
                                                },
                                                "disputes_opened": {
                                                    "type": "integer"
                                                },
                                                "dispute_rate": {
                                                    "anyOf": [
                                                        {
                                                            "type": "number"
                                                        },
                                                        {
                                                            "type": "integer",
                                                            "enum": [
                                                                0
                                                            ]
                                                        }
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "orders",
                                                "net_sales",
                                                "gross_sales",
                                                "platform_fee",
                                                "batched_orders",
                                                "batch_rate",
                                                "cancelled",
                                                "disputes_opened",
                                                "dispute_rate"
                                            ]
                                        },
                                        "trend_7d": {
                                            "type": "array",
                                            "prefixItems": [
                                                {
                                                    "type": "array",
                                                    "items": {}
                                                }
                                            ],
                                            "minItems": 1,
                                            "maxItems": 1,
                                            "additionalItems": false
                                        }
                                    },
                                    "required": [
                                        "today",
                                        "mtd",
                                        "trend_7d"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/merchant/me": {
            "get": {
                "operationId": "merchantMe.show",
                "tags": [
                    "MerchantMe"
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "merchant": {
                                            "type": "object",
                                            "description": "Keep your current app working (this is the \u201cselected/primary store\u201d)",
                                            "properties": {
                                                "id": {
                                                    "type": "integer"
                                                },
                                                "owner_id": {
                                                    "type": "integer"
                                                },
                                                "name": {
                                                    "type": "string"
                                                },
                                                "description": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "status": {
                                                    "type": "string"
                                                },
                                                "approval_status": {
                                                    "type": "string",
                                                    "description": "open|closed|under_maintenance"
                                                },
                                                "address": {
                                                    "type": "string",
                                                    "description": "pending|approved|rejected"
                                                },
                                                "latitude": {
                                                    "type": [
                                                        "number",
                                                        "null"
                                                    ]
                                                },
                                                "longitude": {
                                                    "type": [
                                                        "number",
                                                        "null"
                                                    ]
                                                },
                                                "open_time": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "close_time": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "default_prep_time_min": {
                                                    "type": [
                                                        "integer",
                                                        "null"
                                                    ]
                                                },
                                                "pickup_place_id": {
                                                    "type": [
                                                        "integer",
                                                        "null"
                                                    ]
                                                },
                                                "service_zone_id": {
                                                    "type": [
                                                        "integer",
                                                        "null"
                                                    ]
                                                },
                                                "is_paused": {
                                                    "type": "boolean"
                                                },
                                                "pause_reason": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "pause_notes": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "pause_started_at": {
                                                    "type": "string"
                                                },
                                                "pause_expires_at": {
                                                    "type": "string"
                                                },
                                                "availability": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "id",
                                                "owner_id",
                                                "name",
                                                "description",
                                                "status",
                                                "approval_status",
                                                "address",
                                                "latitude",
                                                "longitude",
                                                "open_time",
                                                "close_time",
                                                "default_prep_time_min",
                                                "pickup_place_id",
                                                "service_zone_id",
                                                "is_paused",
                                                "pause_reason",
                                                "pause_notes",
                                                "pause_started_at",
                                                "pause_expires_at",
                                                "availability"
                                            ]
                                        },
                                        "stores": {
                                            "type": "string",
                                            "description": "NEW: all stores"
                                        },
                                        "merchant_profile": {
                                            "type": [
                                                "object",
                                                "null"
                                            ],
                                            "description": "Optional: profile info (if you want it in the app)",
                                            "properties": {
                                                "id": {
                                                    "type": "integer"
                                                },
                                                "business_name": {
                                                    "type": "string"
                                                },
                                                "status": {
                                                    "type": "string"
                                                },
                                                "rejection_reason": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "approved_at": {
                                                    "type": "string"
                                                }
                                            },
                                            "required": [
                                                "id",
                                                "business_name",
                                                "status",
                                                "rejection_reason",
                                                "approved_at"
                                            ]
                                        },
                                        "wallet": {
                                            "type": "object",
                                            "properties": {
                                                "balance_points": {
                                                    "type": "integer"
                                                },
                                                "min_required_to_order": {
                                                    "type": "integer"
                                                },
                                                "status": {
                                                    "type": "string"
                                                }
                                            },
                                            "required": [
                                                "balance_points",
                                                "min_required_to_order",
                                                "status"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "merchant",
                                        "stores",
                                        "merchant_profile",
                                        "wallet"
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "enum": [
                                                "Store not found."
                                            ]
                                        }
                                    },
                                    "required": [
                                        "message"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            },
            "patch": {
                "operationId": "merchantMe.update",
                "tags": [
                    "MerchantMe"
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "name": {
                                        "type": "string",
                                        "minLength": 2,
                                        "maxLength": 255
                                    },
                                    "address": {
                                        "type": "string",
                                        "minLength": 5,
                                        "maxLength": 255
                                    },
                                    "latitude": {
                                        "type": "number",
                                        "minimum": -90,
                                        "maximum": 90
                                    },
                                    "longitude": {
                                        "type": "number",
                                        "minimum": -180,
                                        "maximum": 180
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        },
                                        "merchant": {
                                            "type": "object",
                                            "properties": {
                                                "id": {
                                                    "type": "integer"
                                                },
                                                "name": {
                                                    "type": "string"
                                                },
                                                "status": {
                                                    "type": "string"
                                                },
                                                "address": {
                                                    "type": "string"
                                                },
                                                "latitude": {
                                                    "type": [
                                                        "number",
                                                        "null"
                                                    ]
                                                },
                                                "longitude": {
                                                    "type": [
                                                        "number",
                                                        "null"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "id",
                                                "name",
                                                "status",
                                                "address",
                                                "latitude",
                                                "longitude"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "ok",
                                        "merchant"
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "enum": [
                                                "Merchant profile not found."
                                            ]
                                        }
                                    },
                                    "required": [
                                        "message"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/merchant/onboarding/me": {
            "get": {
                "operationId": "merchant.onboarding.me",
                "tags": [
                    "MerchantOnboarding"
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "profile": {
                                            "anyOf": [
                                                {
                                                    "$ref": "#/components/schemas/MerchantProfile"
                                                },
                                                {
                                                    "type": "null"
                                                }
                                            ]
                                        },
                                        "stores": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/Store"
                                            }
                                        }
                                    },
                                    "required": [
                                        "profile",
                                        "stores"
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/merchant/apply": {
            "post": {
                "operationId": "merchant.onboarding.apply",
                "summary": "POST /v1/merchant/apply",
                "tags": [
                    "MerchantOnboarding"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "business_name": {
                                        "type": "string",
                                        "maxLength": 255
                                    },
                                    "dti_registration_number": {
                                        "type": [
                                            "string",
                                            "null"
                                        ],
                                        "maxLength": 80
                                    }
                                },
                                "required": [
                                    "business_name"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "enum": [
                                                "Merchant application submitted."
                                            ]
                                        },
                                        "data": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "message",
                                        "data"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/merchant/documents": {
            "post": {
                "operationId": "merchant.onboarding.documents.upload",
                "summary": "POST /v1/merchant/documents\nBody: type=dti_certificate, file=",
                "tags": [
                    "MerchantOnboarding"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "type": {
                                        "type": "string"
                                    },
                                    "file": {
                                        "type": "string",
                                        "format": "binary",
                                        "contentMediaType": "application/octet-stream",
                                        "maxLength": 10240
                                    }
                                },
                                "required": [
                                    "type",
                                    "file"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "enum": [
                                                "Document uploaded."
                                            ]
                                        },
                                        "data": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "message",
                                        "data"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/merchant/store-draft": {
            "post": {
                "operationId": "merchant.onboarding.store_draft.create",
                "summary": "POST /v1/merchant/store-draft\nCreates a store record owned by user but approval_status=pending",
                "tags": [
                    "MerchantOnboarding"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "name": {
                                        "type": "string",
                                        "maxLength": 255
                                    },
                                    "address": {
                                        "type": "string",
                                        "maxLength": 255
                                    },
                                    "description": {
                                        "type": [
                                            "string",
                                            "null"
                                        ]
                                    },
                                    "latitude": {
                                        "type": [
                                            "number",
                                            "null"
                                        ]
                                    },
                                    "longitude": {
                                        "type": [
                                            "number",
                                            "null"
                                        ]
                                    },
                                    "pickup_place_id": {
                                        "type": [
                                            "integer",
                                            "null"
                                        ]
                                    }
                                },
                                "required": [
                                    "name",
                                    "address"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "enum": [
                                                "Store draft created."
                                            ]
                                        },
                                        "data": {
                                            "$ref": "#/components/schemas/Store"
                                        }
                                    },
                                    "required": [
                                        "message",
                                        "data"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/merchant/store/open": {
            "post": {
                "operationId": "merchantOperationalControls.open",
                "tags": [
                    "MerchantOperationalControls"
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/StoreOpenRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "`StoreResource`",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/components/schemas/StoreResource"
                                        },
                                        "ok": {
                                            "type": "boolean"
                                        }
                                    },
                                    "required": [
                                        "data",
                                        "ok"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/merchant/store/close": {
            "post": {
                "operationId": "merchantOperationalControls.close",
                "tags": [
                    "MerchantOperationalControls"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/StoreCloseRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "`StoreResource`",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/components/schemas/StoreResource"
                                        },
                                        "ok": {
                                            "type": "boolean"
                                        }
                                    },
                                    "required": [
                                        "data",
                                        "ok"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/merchant/store/pause": {
            "post": {
                "operationId": "merchantOperationalControls.pause",
                "tags": [
                    "MerchantOperationalControls"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/StorePauseRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "`StoreResource`",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/components/schemas/StoreResource"
                                        },
                                        "ok": {
                                            "type": "boolean"
                                        }
                                    },
                                    "required": [
                                        "data",
                                        "ok"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/merchant/store/resume": {
            "post": {
                "operationId": "merchantOperationalControls.resume",
                "tags": [
                    "MerchantOperationalControls"
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/StoreResumeRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "`StoreResource`",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/components/schemas/StoreResource"
                                        },
                                        "ok": {
                                            "type": "boolean"
                                        }
                                    },
                                    "required": [
                                        "data",
                                        "ok"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/merchant/store/prep-time": {
            "patch": {
                "operationId": "merchantOperationalControls.updateDefaultPrepTime",
                "tags": [
                    "MerchantOperationalControls"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/StoreDefaultPrepTimeRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "`StoreResource`",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/components/schemas/StoreResource"
                                        },
                                        "ok": {
                                            "type": "boolean"
                                        }
                                    },
                                    "required": [
                                        "data",
                                        "ok"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/merchant/store/constraints": {
            "patch": {
                "operationId": "merchantOperationalControls.updateConstraints",
                "tags": [
                    "MerchantOperationalControls"
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/StoreConstraintsRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "`StoreResource`",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/components/schemas/StoreResource"
                                        },
                                        "ok": {
                                            "type": "boolean"
                                        }
                                    },
                                    "required": [
                                        "data",
                                        "ok"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/merchant/orders/{order}/prep-time": {
            "post": {
                "operationId": "merchantOperationalControls.overrideOrderPrepTime",
                "tags": [
                    "MerchantOperationalControls"
                ],
                "parameters": [
                    {
                        "name": "order",
                        "in": "path",
                        "required": true,
                        "description": "The order ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/OrderPrepTimeOverrideRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "`OrderPrepResource`",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/components/schemas/OrderPrepResource"
                                        },
                                        "ok": {
                                            "type": "boolean"
                                        }
                                    },
                                    "required": [
                                        "data",
                                        "ok"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/merchant/orders/{order}/pickup/complete": {
            "post": {
                "operationId": "merchantOrder.pickupComplete",
                "description": "NOTE:\n- This is for \"pickup-only\" orders (no driver).\n- If a driver is involved, use driver lifecycle endpoints (pickup-at-store / delivered), not this.",
                "summary": "\u2705 Pickup-only completion (walk-in): merchant marks order as completed after handover.\nRoute:\nPOST /v1/merchant/orders/{order}/pickup/complete",
                "tags": [
                    "MerchantOrder"
                ],
                "parameters": [
                    {
                        "name": "order",
                        "in": "path",
                        "required": true,
                        "description": "The order ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "anyOf": [
                                        {
                                            "type": "object",
                                            "properties": {
                                                "ok": {
                                                    "type": "boolean"
                                                },
                                                "order": {
                                                    "type": "string"
                                                }
                                            },
                                            "required": [
                                                "ok",
                                                "order"
                                            ]
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "ok": {
                                                    "type": "boolean"
                                                },
                                                "order": {
                                                    "anyOf": [
                                                        {
                                                            "$ref": "#/components/schemas/DeliveryOrder"
                                                        },
                                                        {
                                                            "type": "null"
                                                        }
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "ok",
                                                "order"
                                            ]
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "anyOf": [
                                        {
                                            "type": "object",
                                            "properties": {
                                                "message": {
                                                    "type": "string",
                                                    "enum": [
                                                        "Payment not confirmed yet."
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "message"
                                            ]
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "message": {
                                                    "type": "string",
                                                    "enum": [
                                                        "This endpoint is for pickup-only orders only."
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "message"
                                            ]
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/merchant/orders": {
            "post": {
                "operationId": "merchantOrder.store",
                "tags": [
                    "MerchantOrder"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/StoreMerchantOrderRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "id": {
                                                    "type": "integer"
                                                },
                                                "status": {
                                                    "type": "string"
                                                },
                                                "store_id": {
                                                    "type": "integer"
                                                },
                                                "driver_id": {
                                                    "type": "null"
                                                },
                                                "payment_reference": {
                                                    "type": "string"
                                                },
                                                "pricing": {
                                                    "type": "object",
                                                    "properties": {
                                                        "base_fee": {
                                                            "type": "number",
                                                            "enum": [
                                                                80
                                                            ]
                                                        },
                                                        "commission": {
                                                            "type": "number",
                                                            "enum": [
                                                                0
                                                            ]
                                                        },
                                                        "total": {
                                                            "type": "number"
                                                        }
                                                    },
                                                    "required": [
                                                        "base_fee",
                                                        "commission",
                                                        "total"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "id",
                                                "status",
                                                "store_id",
                                                "driver_id",
                                                "payment_reference",
                                                "pricing"
                                            ]
                                        },
                                        "order": {
                                            "type": "object",
                                            "description": "Backward-compatible key (some clients may read `order`)",
                                            "properties": {
                                                "id": {
                                                    "type": "integer"
                                                },
                                                "status": {
                                                    "type": "string"
                                                },
                                                "store_id": {
                                                    "type": "integer"
                                                },
                                                "driver_id": {
                                                    "type": "null"
                                                },
                                                "payment_reference": {
                                                    "type": "string"
                                                },
                                                "pricing": {
                                                    "type": "object",
                                                    "properties": {
                                                        "base_fee": {
                                                            "type": "number",
                                                            "enum": [
                                                                80
                                                            ]
                                                        },
                                                        "commission": {
                                                            "type": "number",
                                                            "enum": [
                                                                0
                                                            ]
                                                        },
                                                        "total": {
                                                            "type": "number"
                                                        }
                                                    },
                                                    "required": [
                                                        "base_fee",
                                                        "commission",
                                                        "total"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "id",
                                                "status",
                                                "store_id",
                                                "driver_id",
                                                "payment_reference",
                                                "pricing"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "data",
                                        "order"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            },
            "get": {
                "operationId": "merchantOrder.index",
                "tags": [
                    "MerchantOrder"
                ],
                "parameters": [
                    {
                        "name": "store_status",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "maxLength": 40
                        }
                    },
                    {
                        "name": "limit",
                        "in": "query",
                        "schema": {
                            "type": "integer",
                            "minimum": 1,
                            "maximum": 100
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "type": "string"
                                            }
                                        },
                                        "meta": {
                                            "type": "object",
                                            "properties": {
                                                "current_page": {
                                                    "type": "integer"
                                                },
                                                "per_page": {
                                                    "type": "integer"
                                                },
                                                "total": {
                                                    "type": "integer"
                                                },
                                                "last_page": {
                                                    "type": "integer"
                                                }
                                            },
                                            "required": [
                                                "current_page",
                                                "per_page",
                                                "total",
                                                "last_page"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "data",
                                        "meta"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/merchant/orders/{order}": {
            "get": {
                "operationId": "merchantOrder.show",
                "tags": [
                    "MerchantOrder"
                ],
                "parameters": [
                    {
                        "name": "order",
                        "in": "path",
                        "required": true,
                        "description": "The order ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "id": {
                                            "type": "integer"
                                        },
                                        "batched": {
                                            "type": "boolean"
                                        },
                                        "batch_group_id": {
                                            "type": "string"
                                        },
                                        "batch_sibling_order_id": {
                                            "type": "string"
                                        },
                                        "reference_no": {
                                            "type": "string"
                                        },
                                        "store_id": {
                                            "type": "integer"
                                        },
                                        "driver_id": {
                                            "type": [
                                                "integer",
                                                "null"
                                            ]
                                        },
                                        "flow_type": {
                                            "type": "string"
                                        },
                                        "status": {
                                            "type": "string"
                                        },
                                        "store_status": {
                                            "type": "string"
                                        },
                                        "prep_status": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "request_kind": {
                                            "type": "string"
                                        },
                                        "requires_quote_confirmation": {
                                            "type": "boolean"
                                        },
                                        "quote_status": {
                                            "type": "string"
                                        },
                                        "quote_payload": {
                                            "type": [
                                                "array",
                                                "null"
                                            ],
                                            "items": {}
                                        },
                                        "patient_name": {
                                            "type": "string"
                                        },
                                        "patient_birthdate": {
                                            "type": "string"
                                        },
                                        "request_notes": {
                                            "type": "string"
                                        },
                                        "request_attachments": {
                                            "type": "array",
                                            "items": {
                                                "type": [
                                                    "object",
                                                    "null"
                                                ],
                                                "properties": {
                                                    "id": {
                                                        "type": [
                                                            "string",
                                                            "null"
                                                        ]
                                                    },
                                                    "name": {
                                                        "type": "string"
                                                    },
                                                    "mime": {
                                                        "type": [
                                                            "string",
                                                            "null"
                                                        ],
                                                        "enum": [
                                                            "application/pdf"
                                                        ]
                                                    },
                                                    "url": {
                                                        "type": "string"
                                                    },
                                                    "thumb_url": {
                                                        "type": "string"
                                                    }
                                                },
                                                "required": [
                                                    "id",
                                                    "name",
                                                    "mime",
                                                    "url",
                                                    "thumb_url"
                                                ]
                                            }
                                        },
                                        "payment_method": {
                                            "type": "string"
                                        },
                                        "payment_status": {
                                            "type": "string"
                                        },
                                        "payment_reference": {
                                            "type": "string"
                                        },
                                        "payment_expires_at": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "dispatch_status": {
                                            "type": "string"
                                        },
                                        "dispatch_at": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "assigned_at": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "items_total": {
                                            "type": "number"
                                        },
                                        "total_price": {
                                            "type": "number"
                                        },
                                        "totals": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "items": {
                                            "anyOf": [
                                                {
                                                    "type": "array",
                                                    "items": {
                                                        "$ref": "#/components/schemas/DeliveryOrderItem"
                                                    }
                                                },
                                                {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    },
                                                    "minItems": 0,
                                                    "maxItems": 0,
                                                    "additionalItems": false
                                                }
                                            ]
                                        },
                                        "driver": {
                                            "type": "object",
                                            "properties": {
                                                "id": {
                                                    "type": "integer"
                                                },
                                                "name": {
                                                    "type": "string"
                                                },
                                                "phone": {
                                                    "type": "string"
                                                }
                                            },
                                            "required": [
                                                "id",
                                                "name",
                                                "phone"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "id",
                                        "batched",
                                        "batch_group_id",
                                        "batch_sibling_order_id",
                                        "reference_no",
                                        "store_id",
                                        "driver_id",
                                        "flow_type",
                                        "status",
                                        "store_status",
                                        "prep_status",
                                        "request_kind",
                                        "requires_quote_confirmation",
                                        "quote_status",
                                        "quote_payload",
                                        "patient_name",
                                        "patient_birthdate",
                                        "request_notes",
                                        "request_attachments",
                                        "payment_method",
                                        "payment_status",
                                        "payment_reference",
                                        "payment_expires_at",
                                        "dispatch_status",
                                        "dispatch_at",
                                        "assigned_at",
                                        "items_total",
                                        "total_price",
                                        "totals",
                                        "items",
                                        "driver"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/merchant/orders/{order}/batch": {
            "get": {
                "operationId": "merchantOrder.batch",
                "summary": "GET /v1/merchant/orders/{order}/batch\nBatching visibility endpoint (shows sibling id, canonical id, etc.)",
                "tags": [
                    "MerchantOrder"
                ],
                "parameters": [
                    {
                        "name": "order",
                        "in": "path",
                        "required": true,
                        "description": "The order ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "data"
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/merchant/orders/{order}/cancel": {
            "post": {
                "operationId": "merchantOrder.cancel",
                "tags": [
                    "MerchantOrder"
                ],
                "parameters": [
                    {
                        "name": "order",
                        "in": "path",
                        "required": true,
                        "description": "The order ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        },
                                        "order_id": {
                                            "type": "integer"
                                        },
                                        "status": {
                                            "type": "string"
                                        },
                                        "payment_status": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "ok",
                                        "order_id",
                                        "status",
                                        "payment_status"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/merchant/orders/{order}/prep-status": {
            "post": {
                "operationId": "merchantOrder.updatePrepStatus",
                "tags": [
                    "MerchantOrder"
                ],
                "parameters": [
                    {
                        "name": "order",
                        "in": "path",
                        "required": true,
                        "description": "The order ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/UpdatePrepStatusRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        },
                                        "order_id": {
                                            "type": "integer"
                                        },
                                        "prep_status": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "ok",
                                        "order_id",
                                        "prep_status"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/merchant/orders/{order}/accept": {
            "post": {
                "operationId": "merchantOrder.accept",
                "summary": "\u2705 Merchant accepts a store order.\nRecommended change:\n- For pickup-only orders: status becomes \"accepted\" (not \"pending\")\n- For pickup-only orders: DO NOT schedule dispatch",
                "tags": [
                    "MerchantOrder"
                ],
                "parameters": [
                    {
                        "name": "order",
                        "in": "path",
                        "required": true,
                        "description": "The order ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "prep_time_min": {
                                        "type": [
                                            "integer",
                                            "null"
                                        ],
                                        "minimum": 1,
                                        "maximum": 180
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "anyOf": [
                                        {
                                            "type": "object",
                                            "properties": {
                                                "ok": {
                                                    "type": "boolean"
                                                },
                                                "store_status": {
                                                    "type": "string"
                                                },
                                                "prep_status": {
                                                    "type": "string"
                                                },
                                                "prep_time_min": {
                                                    "type": "integer"
                                                },
                                                "status": {
                                                    "type": "string"
                                                },
                                                "payment_status": {
                                                    "type": "string"
                                                },
                                                "payment_reference": {
                                                    "type": "string"
                                                },
                                                "payment_expires_at": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "dispatch_status": {
                                                    "type": "string"
                                                },
                                                "dispatch_at": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "store_accepted_at": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "driver_id": {
                                                    "type": [
                                                        "integer",
                                                        "null"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "ok",
                                                "store_status",
                                                "prep_status",
                                                "prep_time_min",
                                                "status",
                                                "payment_status",
                                                "payment_reference",
                                                "payment_expires_at",
                                                "dispatch_status",
                                                "dispatch_at",
                                                "store_accepted_at",
                                                "driver_id"
                                            ]
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "ok": {
                                                    "type": "boolean"
                                                },
                                                "store_status": {
                                                    "type": "string"
                                                },
                                                "prep_status": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "prep_time_min": {
                                                    "type": "integer"
                                                },
                                                "status": {
                                                    "type": "string"
                                                },
                                                "payment_status": {
                                                    "type": "string"
                                                },
                                                "payment_reference": {
                                                    "type": "string"
                                                },
                                                "payment_expires_at": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "dispatch_status": {
                                                    "type": "string"
                                                },
                                                "dispatch_at": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "store_accepted_at": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "driver_id": {
                                                    "type": [
                                                        "integer",
                                                        "null"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "ok",
                                                "store_status",
                                                "prep_status",
                                                "prep_time_min",
                                                "status",
                                                "payment_status",
                                                "payment_reference",
                                                "payment_expires_at",
                                                "dispatch_status",
                                                "dispatch_at",
                                                "store_accepted_at",
                                                "driver_id"
                                            ]
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/merchant/orders/{order}/paper/quote": {
            "post": {
                "operationId": "merchantOrder.merchantSubmitPaperQuote",
                "summary": "\u2705 Paper / Pharmacy order quoting (store side)\nPOST /v1/merchant/orders/{order}/paper/quote",
                "tags": [
                    "MerchantOrder"
                ],
                "parameters": [
                    {
                        "name": "order",
                        "in": "path",
                        "required": true,
                        "description": "The order ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "pharmacist_notes": {
                                        "type": [
                                            "string",
                                            "null"
                                        ],
                                        "maxLength": 2000
                                    },
                                    "partial_fill_allowed": {
                                        "type": [
                                            "boolean",
                                            "null"
                                        ],
                                        "description": "\u2705 accept BOTH"
                                    },
                                    "allow_partial_fill": {
                                        "type": [
                                            "boolean",
                                            "null"
                                        ]
                                    },
                                    "partial_fill_notes": {
                                        "type": [
                                            "string",
                                            "null"
                                        ],
                                        "maxLength": 2000
                                    },
                                    "items": {
                                        "type": "array",
                                        "items": {
                                            "type": "object",
                                            "properties": {
                                                "name": {
                                                    "type": "string",
                                                    "maxLength": 200
                                                },
                                                "qty": {
                                                    "type": "integer",
                                                    "minimum": 1,
                                                    "maximum": 999
                                                },
                                                "price": {
                                                    "type": [
                                                        "number",
                                                        "null"
                                                    ],
                                                    "description": "\u2705 accept BOTH (frontend might send unit_price)",
                                                    "minimum": 0
                                                },
                                                "unit_price": {
                                                    "type": [
                                                        "number",
                                                        "null"
                                                    ],
                                                    "minimum": 0
                                                },
                                                "notes": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ],
                                                    "maxLength": 500
                                                },
                                                "substitutions": {
                                                    "type": [
                                                        "array",
                                                        "null"
                                                    ],
                                                    "items": {
                                                        "type": "object",
                                                        "properties": {
                                                            "name": {
                                                                "type": "string",
                                                                "maxLength": 200
                                                            },
                                                            "price": {
                                                                "type": [
                                                                    "number",
                                                                    "null"
                                                                ],
                                                                "minimum": 0
                                                            },
                                                            "price_delta": {
                                                                "type": [
                                                                    "number",
                                                                    "null"
                                                                ]
                                                            },
                                                            "notes": {
                                                                "type": [
                                                                    "string",
                                                                    "null"
                                                                ],
                                                                "maxLength": 500
                                                            }
                                                        }
                                                    }
                                                }
                                            },
                                            "required": [
                                                "name",
                                                "qty"
                                            ]
                                        },
                                        "minItems": 1
                                    }
                                },
                                "required": [
                                    "items"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        },
                                        "order_id": {
                                            "type": "integer"
                                        },
                                        "quote_status": {
                                            "type": "string"
                                        },
                                        "quote_ready_at": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "quote_payload": {
                                            "type": "string"
                                        },
                                        "payment_status": {
                                            "type": "string"
                                        },
                                        "dispatch_status": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "ok",
                                        "order_id",
                                        "quote_status",
                                        "quote_ready_at",
                                        "quote_payload",
                                        "payment_status",
                                        "dispatch_status"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/merchant/orders/{order}/status": {
            "post": {
                "operationId": "merchantOrder.updateStoreStatus",
                "summary": "\u2705 Store status transitions\n- When store marks READY on pickup-only: do not dispatch/search\n- Keep prep_status values enum-safe (use 'new' / 'preparing' / 'ready_for_pickup')",
                "tags": [
                    "MerchantOrder"
                ],
                "parameters": [
                    {
                        "name": "order",
                        "in": "path",
                        "required": true,
                        "description": "The order ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "store_status": {
                                        "type": "string",
                                        "enum": [
                                            "accepted",
                                            "preparing",
                                            "ready"
                                        ]
                                    },
                                    "prep_minutes": {
                                        "type": [
                                            "integer",
                                            "null"
                                        ],
                                        "minimum": 0,
                                        "maximum": 240
                                    }
                                },
                                "required": [
                                    "store_status"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/merchant/payouts/request": {
            "post": {
                "operationId": "merchantPayout.request",
                "description": "Idempotency:\n- Send header: Idempotency-Key\n- Replay returns the existing request.",
                "summary": "POST /api/v1/merchant/payouts/request\nCreates a cash-out request and debits merchant wallet as a HOLD (amount + fee)",
                "tags": [
                    "MerchantPayout"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "amount": {
                                        "type": "integer",
                                        "minimum": 1,
                                        "maximum": 1000000
                                    },
                                    "payout_method": {
                                        "type": "string",
                                        "description": "Must match DB enum('gcash','bank')",
                                        "enum": [
                                            "gcash",
                                            "bank"
                                        ]
                                    },
                                    "payout_account": {
                                        "type": "string",
                                        "maxLength": 120
                                    },
                                    "payout_name": {
                                        "type": [
                                            "string",
                                            "null"
                                        ],
                                        "maxLength": 120
                                    },
                                    "idempotency_key": {
                                        "type": "string",
                                        "maxLength": 80
                                    }
                                },
                                "required": [
                                    "amount",
                                    "payout_method",
                                    "payout_account",
                                    "idempotency_key"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        },
                                        "request": {
                                            "type": "string"
                                        },
                                        "balance_points": {
                                            "type": "integer"
                                        }
                                    },
                                    "required": [
                                        "ok",
                                        "request",
                                        "balance_points"
                                    ]
                                }
                            }
                        }
                    },
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        },
                                        "request": {
                                            "type": "string"
                                        },
                                        "balance_points": {
                                            "type": "integer"
                                        }
                                    },
                                    "required": [
                                        "ok",
                                        "request",
                                        "balance_points"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/merchant/payouts": {
            "get": {
                "operationId": "merchantPayout.index",
                "summary": "GET /api/v1/merchant/payouts\nReturns merchant wallet balance + paginated payout requests",
                "tags": [
                    "MerchantPayout"
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "wallet_kind": {
                                            "type": "string",
                                            "enum": [
                                                "merchant"
                                            ]
                                        },
                                        "balance_points": {
                                            "type": "integer"
                                        },
                                        "data": {
                                            "$ref": "#/components/schemas/LengthAwarePaginator"
                                        }
                                    },
                                    "required": [
                                        "wallet_kind",
                                        "balance_points",
                                        "data"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/merchant/products": {
            "get": {
                "operationId": "merchant.products.index",
                "tags": [
                    "MerchantProduct"
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/LengthAwarePaginator"
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            },
            "post": {
                "operationId": "merchant.products.store",
                "tags": [
                    "MerchantProduct"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "name": {
                                        "type": "string",
                                        "maxLength": 255
                                    },
                                    "description": {
                                        "type": [
                                            "string",
                                            "null"
                                        ]
                                    },
                                    "price": {
                                        "type": "number",
                                        "minimum": 0
                                    },
                                    "stock": {
                                        "type": "integer",
                                        "minimum": 0
                                    },
                                    "is_available": {
                                        "type": "boolean"
                                    },
                                    "image": {
                                        "type": [
                                            "string",
                                            "null"
                                        ],
                                        "format": "binary",
                                        "contentMediaType": "application/octet-stream",
                                        "description": "\u2705 image upload (like receipt upload)",
                                        "maxLength": 5120
                                    },
                                    "image_url": {
                                        "type": [
                                            "string",
                                            "null"
                                        ],
                                        "description": "optional: keep if you still want to allow URL-only products",
                                        "maxLength": 2048
                                    }
                                },
                                "required": [
                                    "name",
                                    "price",
                                    "stock"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "anyOf": [
                                        {
                                            "$ref": "#/components/schemas/Product"
                                        },
                                        {
                                            "type": "null"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/merchant/products/{product}": {
            "get": {
                "operationId": "merchant.products.show",
                "tags": [
                    "MerchantProduct"
                ],
                "parameters": [
                    {
                        "name": "product",
                        "in": "path",
                        "required": true,
                        "description": "The product ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Product"
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            },
            "put": {
                "operationId": "merchant.products.update",
                "tags": [
                    "MerchantProduct"
                ],
                "parameters": [
                    {
                        "name": "product",
                        "in": "path",
                        "required": true,
                        "description": "The product ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "name": {
                                        "type": "string",
                                        "maxLength": 255
                                    },
                                    "description": {
                                        "type": [
                                            "string",
                                            "null"
                                        ]
                                    },
                                    "price": {
                                        "type": "number",
                                        "minimum": 0
                                    },
                                    "stock": {
                                        "type": "integer",
                                        "minimum": 0
                                    },
                                    "is_available": {
                                        "type": "boolean"
                                    },
                                    "image": {
                                        "type": [
                                            "string",
                                            "null"
                                        ],
                                        "format": "binary",
                                        "contentMediaType": "application/octet-stream",
                                        "description": "\u2705 optional image replace",
                                        "maxLength": 5120
                                    },
                                    "image_url": {
                                        "type": [
                                            "string",
                                            "null"
                                        ],
                                        "description": "optional URL update",
                                        "maxLength": 2048
                                    },
                                    "remove_image": {
                                        "type": "boolean",
                                        "description": "\u2705 allow remove"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "anyOf": [
                                        {
                                            "$ref": "#/components/schemas/Product"
                                        },
                                        {
                                            "type": "null"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            },
            "delete": {
                "operationId": "merchant.products.destroy",
                "tags": [
                    "MerchantProduct"
                ],
                "parameters": [
                    {
                        "name": "product",
                        "in": "path",
                        "required": true,
                        "description": "The product ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        }
                                    },
                                    "required": [
                                        "ok"
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/merchant/products/{product}/availability": {
            "patch": {
                "operationId": "merchant.merchantProduct.updateAvailability_0",
                "tags": [
                    "MerchantProduct"
                ],
                "parameters": [
                    {
                        "name": "product",
                        "in": "path",
                        "required": true,
                        "description": "The product ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "is_available": {
                                        "type": "boolean"
                                    }
                                },
                                "required": [
                                    "is_available"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "anyOf": [
                                        {
                                            "$ref": "#/components/schemas/Product"
                                        },
                                        {
                                            "type": "null"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/merchant/catalog/products/{product}/availability": {
            "patch": {
                "operationId": "merchant.merchantProduct.updateAvailability_0",
                "tags": [
                    "MerchantProduct"
                ],
                "parameters": [
                    {
                        "name": "product",
                        "in": "path",
                        "required": true,
                        "description": "The product ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "is_available": {
                                        "type": "boolean"
                                    }
                                },
                                "required": [
                                    "is_available"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "anyOf": [
                                        {
                                            "$ref": "#/components/schemas/Product"
                                        },
                                        {
                                            "type": "null"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/merchant/settlements/summary": {
            "get": {
                "operationId": "merchantSettlementSummary.show",
                "tags": [
                    "MerchantSettlementSummary"
                ],
                "parameters": [
                    {
                        "name": "store_id",
                        "in": "query",
                        "schema": {
                            "type": [
                                "integer",
                                "null"
                            ]
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "`MerchantSettlementSummaryResource`",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/components/schemas/MerchantSettlementSummaryResource"
                                        }
                                    },
                                    "required": [
                                        "data"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/merchant/stores/draft": {
            "post": {
                "operationId": "merchantStore.createDraft",
                "tags": [
                    "MerchantStore"
                ],
                "responses": {
                    "201": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/components/schemas/Store"
                                        }
                                    },
                                    "required": [
                                        "data"
                                    ]
                                }
                            }
                        }
                    },
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "anyOf": [
                                                {
                                                    "$ref": "#/components/schemas/Store"
                                                },
                                                {
                                                    "type": "null"
                                                }
                                            ]
                                        }
                                    },
                                    "required": [
                                        "data"
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/merchant/store": {
            "get": {
                "operationId": "merchantStore.show",
                "tags": [
                    "MerchantStore"
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Store"
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            },
            "patch": {
                "operationId": "merchantStore.update",
                "tags": [
                    "MerchantStore"
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/MerchantUpdateStoreRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "anyOf": [
                                        {
                                            "$ref": "#/components/schemas/Store"
                                        },
                                        {
                                            "type": "null"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/merchant/store/status": {
            "patch": {
                "operationId": "merchantStore.updateStatus",
                "tags": [
                    "MerchantStore"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/MerchantUpdateStoreStatusRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "anyOf": [
                                        {
                                            "$ref": "#/components/schemas/Store"
                                        },
                                        {
                                            "type": "null"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/merchant/store/hours": {
            "patch": {
                "operationId": "merchantStore.updateHours",
                "tags": [
                    "MerchantStore"
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/MerchantUpdateStoreHoursRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "anyOf": [
                                        {
                                            "$ref": "#/components/schemas/Store"
                                        },
                                        {
                                            "type": "null"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/merchant/stores/{store}/rules": {
            "get": {
                "operationId": "merchantStoreRules.show",
                "tags": [
                    "MerchantStoreRules"
                ],
                "parameters": [
                    {
                        "name": "store",
                        "in": "path",
                        "required": true,
                        "description": "The store ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "`StoreRulesResource`",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/components/schemas/StoreRulesResource"
                                        }
                                    },
                                    "required": [
                                        "data"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/merchant/stores/{store}/schedule-overrides": {
            "get": {
                "operationId": "merchantStoreScheduleOverride.index",
                "tags": [
                    "MerchantStoreScheduleOverride"
                ],
                "parameters": [
                    {
                        "name": "store",
                        "in": "path",
                        "required": true,
                        "description": "The store ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Array of `StoreScheduleOverrideResource`",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/StoreScheduleOverrideResource"
                                            }
                                        }
                                    },
                                    "required": [
                                        "data"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/merchant/subscription": {
            "get": {
                "operationId": "merchantSubscription.show",
                "tags": [
                    "MerchantSubscription"
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "base_limit": {
                                            "type": "string"
                                        },
                                        "extra_slots": {
                                            "type": "string"
                                        },
                                        "monthly_credits_per_extra_slot": {
                                            "type": "integer",
                                            "enum": [
                                                20
                                            ]
                                        },
                                        "active_until": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "allowed_products": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "base_limit",
                                        "extra_slots",
                                        "monthly_credits_per_extra_slot",
                                        "active_until",
                                        "allowed_products"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/merchant/subscription/upgrade": {
            "post": {
                "operationId": "merchantSubscription.upgrade",
                "tags": [
                    "MerchantSubscription"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "extra_slots": {
                                        "type": "integer",
                                        "description": "number of extra product slots beyond the free/base limit",
                                        "minimum": 1,
                                        "maximum": 200
                                    },
                                    "months": {
                                        "type": "integer",
                                        "description": "optional: months to prepay (default 1)",
                                        "minimum": 1,
                                        "maximum": 12
                                    }
                                },
                                "required": [
                                    "extra_slots"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/merchant/wallet": {
            "get": {
                "operationId": "merchantWallet.show",
                "tags": [
                    "MerchantWallet"
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "user_id": {
                                            "type": "integer"
                                        },
                                        "balance_points": {
                                            "type": "integer"
                                        },
                                        "available_points": {
                                            "type": "integer"
                                        },
                                        "held_points": {
                                            "type": "integer"
                                        },
                                        "status": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "user_id",
                                        "balance_points",
                                        "available_points",
                                        "held_points",
                                        "status"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/merchant/wallet/ledger": {
            "get": {
                "operationId": "merchantWallet.ledger",
                "tags": [
                    "MerchantWallet"
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/LengthAwarePaginator"
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/metrics": {
            "get": {
                "operationId": "metrics.metrics",
                "tags": [
                    "Metrics"
                ],
                "responses": {
                    "200": {
                        "description": ""
                    }
                }
            }
        },
        "/ops/analytics/alerts": {
            "get": {
                "operationId": "opsAlerts.alerts",
                "tags": [
                    "OpsAlerts"
                ],
                "parameters": [
                    {
                        "name": "start",
                        "in": "query",
                        "description": "Range (inclusive start, inclusive end)",
                        "schema": {
                            "type": "string",
                            "format": "date-time"
                        }
                    },
                    {
                        "name": "end",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "format": "date-time"
                        }
                    },
                    {
                        "name": "since_days",
                        "in": "query",
                        "description": "Shortcut: last N days (overrides start/end when present)",
                        "schema": {
                            "type": "integer",
                            "minimum": 1,
                            "maximum": 90
                        }
                    },
                    {
                        "name": "store_id",
                        "in": "query",
                        "description": "Optional filters",
                        "schema": {
                            "type": "integer",
                            "minimum": 1
                        }
                    },
                    {
                        "name": "driver_id",
                        "in": "query",
                        "schema": {
                            "type": "integer",
                            "minimum": 1
                        }
                    },
                    {
                        "name": "low_stock_threshold",
                        "in": "query",
                        "description": "Inventory threshold",
                        "schema": {
                            "type": "integer",
                            "minimum": 1,
                            "maximum": 1000
                        }
                    },
                    {
                        "name": "window_minutes",
                        "in": "query",
                        "description": "short window for near-real-time alerts",
                        "schema": {
                            "type": "integer",
                            "minimum": 15,
                            "maximum": 240
                        }
                    },
                    {
                        "name": "assignment_p90_threshold_min",
                        "in": "query",
                        "description": "Optional overrides (kept simple; defaults are sane)",
                        "schema": {
                            "type": "number",
                            "minimum": 0
                        }
                    },
                    {
                        "name": "acceptance_rate_threshold",
                        "in": "query",
                        "schema": {
                            "type": "number",
                            "minimum": 0,
                            "maximum": 1
                        }
                    },
                    {
                        "name": "timeout_rate_threshold",
                        "in": "query",
                        "schema": {
                            "type": "number",
                            "minimum": 0,
                            "maximum": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "window": {
                                            "type": "object",
                                            "properties": {
                                                "start": {
                                                    "type": "string"
                                                },
                                                "end": {
                                                    "type": "string"
                                                }
                                            },
                                            "required": [
                                                "start",
                                                "end"
                                            ]
                                        },
                                        "": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "window",
                                        null
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/ops/analytics/overview": {
            "get": {
                "operationId": "opsAnalytics.overview",
                "summary": "High-level KPI summary for the selected window",
                "tags": [
                    "OpsAnalytics"
                ],
                "parameters": [
                    {
                        "name": "start",
                        "in": "query",
                        "description": "Range (inclusive start, inclusive end)",
                        "schema": {
                            "type": "string",
                            "format": "date-time"
                        }
                    },
                    {
                        "name": "end",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "format": "date-time"
                        }
                    },
                    {
                        "name": "since_days",
                        "in": "query",
                        "description": "Shortcut: last N days (overrides start/end when present)",
                        "schema": {
                            "type": "integer",
                            "minimum": 1,
                            "maximum": 90
                        }
                    },
                    {
                        "name": "store_id",
                        "in": "query",
                        "description": "Optional filters",
                        "schema": {
                            "type": "integer",
                            "minimum": 1
                        }
                    },
                    {
                        "name": "driver_id",
                        "in": "query",
                        "schema": {
                            "type": "integer",
                            "minimum": 1
                        }
                    },
                    {
                        "name": "low_stock_threshold",
                        "in": "query",
                        "description": "Inventory threshold",
                        "schema": {
                            "type": "integer",
                            "minimum": 1,
                            "maximum": 1000
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "window": {
                                            "type": "object",
                                            "properties": {
                                                "start": {
                                                    "type": "string"
                                                },
                                                "end": {
                                                    "type": "string"
                                                },
                                                "days": {
                                                    "type": "string"
                                                }
                                            },
                                            "required": [
                                                "start",
                                                "end",
                                                "days"
                                            ]
                                        },
                                        "": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "window",
                                        null
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/ops/analytics/orders": {
            "get": {
                "operationId": "opsAnalytics.orders",
                "summary": "Time-series order metrics grouped by day",
                "tags": [
                    "OpsAnalytics"
                ],
                "parameters": [
                    {
                        "name": "start",
                        "in": "query",
                        "description": "Range (inclusive start, inclusive end)",
                        "schema": {
                            "type": "string",
                            "format": "date-time"
                        }
                    },
                    {
                        "name": "end",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "format": "date-time"
                        }
                    },
                    {
                        "name": "since_days",
                        "in": "query",
                        "description": "Shortcut: last N days (overrides start/end when present)",
                        "schema": {
                            "type": "integer",
                            "minimum": 1,
                            "maximum": 90
                        }
                    },
                    {
                        "name": "store_id",
                        "in": "query",
                        "description": "Optional filters",
                        "schema": {
                            "type": "integer",
                            "minimum": 1
                        }
                    },
                    {
                        "name": "driver_id",
                        "in": "query",
                        "schema": {
                            "type": "integer",
                            "minimum": 1
                        }
                    },
                    {
                        "name": "low_stock_threshold",
                        "in": "query",
                        "description": "Inventory threshold",
                        "schema": {
                            "type": "integer",
                            "minimum": 1,
                            "maximum": 1000
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "window": {
                                            "type": "object",
                                            "properties": {
                                                "start": {
                                                    "type": "string"
                                                },
                                                "end": {
                                                    "type": "string"
                                                },
                                                "days": {
                                                    "type": "string"
                                                }
                                            },
                                            "required": [
                                                "start",
                                                "end",
                                                "days"
                                            ]
                                        },
                                        "": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "window",
                                        null
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/ops/analytics/drivers": {
            "get": {
                "operationId": "opsAnalytics.drivers",
                "summary": "Driver performance within the window (top drivers by completed deliveries)",
                "tags": [
                    "OpsAnalytics"
                ],
                "parameters": [
                    {
                        "name": "start",
                        "in": "query",
                        "description": "Range (inclusive start, inclusive end)",
                        "schema": {
                            "type": "string",
                            "format": "date-time"
                        }
                    },
                    {
                        "name": "end",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "format": "date-time"
                        }
                    },
                    {
                        "name": "since_days",
                        "in": "query",
                        "description": "Shortcut: last N days (overrides start/end when present)",
                        "schema": {
                            "type": "integer",
                            "minimum": 1,
                            "maximum": 90
                        }
                    },
                    {
                        "name": "store_id",
                        "in": "query",
                        "description": "Optional filters",
                        "schema": {
                            "type": "integer",
                            "minimum": 1
                        }
                    },
                    {
                        "name": "driver_id",
                        "in": "query",
                        "schema": {
                            "type": "integer",
                            "minimum": 1
                        }
                    },
                    {
                        "name": "low_stock_threshold",
                        "in": "query",
                        "description": "Inventory threshold",
                        "schema": {
                            "type": "integer",
                            "minimum": 1,
                            "maximum": 1000
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "window": {
                                            "type": "object",
                                            "properties": {
                                                "start": {
                                                    "type": "string"
                                                },
                                                "end": {
                                                    "type": "string"
                                                },
                                                "days": {
                                                    "type": "string"
                                                }
                                            },
                                            "required": [
                                                "start",
                                                "end",
                                                "days"
                                            ]
                                        },
                                        "": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "window",
                                        null
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/ops/analytics/inventory": {
            "get": {
                "operationId": "opsAnalytics.inventory",
                "summary": "Inventory health (out of stock / low stock) grouped by store",
                "tags": [
                    "OpsAnalytics"
                ],
                "parameters": [
                    {
                        "name": "start",
                        "in": "query",
                        "description": "Range (inclusive start, inclusive end)",
                        "schema": {
                            "type": "string",
                            "format": "date-time"
                        }
                    },
                    {
                        "name": "end",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "format": "date-time"
                        }
                    },
                    {
                        "name": "since_days",
                        "in": "query",
                        "description": "Shortcut: last N days (overrides start/end when present)",
                        "schema": {
                            "type": "integer",
                            "minimum": 1,
                            "maximum": 90
                        }
                    },
                    {
                        "name": "store_id",
                        "in": "query",
                        "description": "Optional filters",
                        "schema": {
                            "type": "integer",
                            "minimum": 1
                        }
                    },
                    {
                        "name": "driver_id",
                        "in": "query",
                        "schema": {
                            "type": "integer",
                            "minimum": 1
                        }
                    },
                    {
                        "name": "low_stock_threshold",
                        "in": "query",
                        "description": "Inventory threshold",
                        "schema": {
                            "type": "integer",
                            "minimum": 1,
                            "maximum": 1000
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "window": {
                                            "type": "object",
                                            "properties": {
                                                "start": {
                                                    "type": "string"
                                                },
                                                "end": {
                                                    "type": "string"
                                                },
                                                "days": {
                                                    "type": "string"
                                                }
                                            },
                                            "required": [
                                                "start",
                                                "end",
                                                "days"
                                            ]
                                        },
                                        "": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "window",
                                        null
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/ops/analytics/fraud": {
            "get": {
                "operationId": "opsAnalytics.fraud",
                "summary": "Fraud/abuse signals (rule-based) for quick monitoring",
                "tags": [
                    "OpsAnalytics"
                ],
                "parameters": [
                    {
                        "name": "start",
                        "in": "query",
                        "description": "Range (inclusive start, inclusive end)",
                        "schema": {
                            "type": "string",
                            "format": "date-time"
                        }
                    },
                    {
                        "name": "end",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "format": "date-time"
                        }
                    },
                    {
                        "name": "since_days",
                        "in": "query",
                        "description": "Shortcut: last N days (overrides start/end when present)",
                        "schema": {
                            "type": "integer",
                            "minimum": 1,
                            "maximum": 90
                        }
                    },
                    {
                        "name": "store_id",
                        "in": "query",
                        "description": "Optional filters",
                        "schema": {
                            "type": "integer",
                            "minimum": 1
                        }
                    },
                    {
                        "name": "driver_id",
                        "in": "query",
                        "schema": {
                            "type": "integer",
                            "minimum": 1
                        }
                    },
                    {
                        "name": "low_stock_threshold",
                        "in": "query",
                        "description": "Inventory threshold",
                        "schema": {
                            "type": "integer",
                            "minimum": 1,
                            "maximum": 1000
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "window": {
                                            "type": "object",
                                            "properties": {
                                                "start": {
                                                    "type": "string"
                                                },
                                                "end": {
                                                    "type": "string"
                                                },
                                                "days": {
                                                    "type": "string"
                                                }
                                            },
                                            "required": [
                                                "start",
                                                "end",
                                                "days"
                                            ]
                                        },
                                        "": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "window",
                                        null
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/ops/analytics/parcel-cod": {
            "get": {
                "operationId": "opsAnalytics.parcelCod",
                "tags": [
                    "OpsAnalytics"
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "outstanding_total": {
                                            "type": "integer"
                                        },
                                        "drivers_with_outstanding": {
                                            "type": "integer"
                                        },
                                        "orders_to_collect": {
                                            "type": "integer"
                                        },
                                        "orders_collected_not_settled": {
                                            "type": "integer"
                                        },
                                        "orders_overdue": {
                                            "type": "integer"
                                        },
                                        "grace_hours": {
                                            "type": "integer"
                                        },
                                        "server_time": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "outstanding_total",
                                        "drivers_with_outstanding",
                                        "orders_to_collect",
                                        "orders_collected_not_settled",
                                        "orders_overdue",
                                        "grace_hours",
                                        "server_time"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/ops/audit-logs": {
            "get": {
                "operationId": "opsAuditLog.index",
                "tags": [
                    "OpsAuditLog"
                ],
                "parameters": [
                    {
                        "name": "q",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "maxLength": 120
                        }
                    },
                    {
                        "name": "actor_id",
                        "in": "query",
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "action",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "maxLength": 80
                        }
                    },
                    {
                        "name": "subject_type",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "maxLength": 80
                        }
                    },
                    {
                        "name": "subject_id",
                        "in": "query",
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "order_id",
                        "in": "query",
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "merchant_id",
                        "in": "query",
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "from",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "format": "date-time"
                        }
                    },
                    {
                        "name": "to",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "format": "date-time"
                        }
                    },
                    {
                        "name": "per_page",
                        "in": "query",
                        "schema": {
                            "type": "integer",
                            "minimum": 1,
                            "maximum": 100
                        }
                    },
                    {
                        "name": "page",
                        "in": "query",
                        "schema": {
                            "type": "integer",
                            "minimum": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "type": "string"
                                            }
                                        },
                                        "meta": {
                                            "type": "object",
                                            "properties": {
                                                "page": {
                                                    "type": "integer"
                                                },
                                                "per_page": {
                                                    "type": "integer"
                                                },
                                                "total": {
                                                    "type": "integer"
                                                },
                                                "last_page": {
                                                    "type": "integer"
                                                }
                                            },
                                            "required": [
                                                "page",
                                                "per_page",
                                                "total",
                                                "last_page"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "data",
                                        "meta"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/ops/batching/decisions": {
            "get": {
                "operationId": "opsBatching.decisions",
                "summary": "Batch decision telemetry (why batched / why not / why unbatched).\nProtected by `can:ops-read` in routes",
                "tags": [
                    "OpsBatching"
                ],
                "parameters": [
                    {
                        "name": "delivery_order_id",
                        "in": "query",
                        "schema": {
                            "type": "integer",
                            "minimum": 1
                        }
                    },
                    {
                        "name": "batch_group_id",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "maxLength": 64
                        }
                    },
                    {
                        "name": "decision",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "maxLength": 32
                        }
                    },
                    {
                        "name": "reason_code",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "maxLength": 64
                        }
                    },
                    {
                        "name": "from",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "format": "date-time"
                        }
                    },
                    {
                        "name": "to",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "format": "date-time"
                        }
                    },
                    {
                        "name": "limit",
                        "in": "query",
                        "schema": {
                            "type": "integer",
                            "minimum": 1,
                            "maximum": 200
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "type": "string"
                                            }
                                        },
                                        "meta": {
                                            "type": "object",
                                            "properties": {
                                                "current_page": {
                                                    "type": "integer"
                                                },
                                                "per_page": {
                                                    "type": "integer"
                                                },
                                                "total": {
                                                    "type": "integer"
                                                },
                                                "last_page": {
                                                    "type": "integer"
                                                }
                                            },
                                            "required": [
                                                "current_page",
                                                "per_page",
                                                "total",
                                                "last_page"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "data",
                                        "meta"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/ops/batching/summary": {
            "get": {
                "operationId": "opsBatching.summary",
                "description": "Query params:\n- start/end (YYYY-MM-DD) or since_days",
                "summary": "Batching telemetry summary (aggregations)",
                "tags": [
                    "OpsBatching"
                ],
                "parameters": [
                    {
                        "name": "start",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "format": "date-time"
                        }
                    },
                    {
                        "name": "end",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "format": "date-time"
                        }
                    },
                    {
                        "name": "since_days",
                        "in": "query",
                        "schema": {
                            "type": "integer",
                            "minimum": 1,
                            "maximum": 90
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "window": {
                                            "type": "object",
                                            "properties": {
                                                "start": {
                                                    "type": "string"
                                                },
                                                "end": {
                                                    "type": "string"
                                                },
                                                "days": {
                                                    "type": "string"
                                                }
                                            },
                                            "required": [
                                                "start",
                                                "end",
                                                "days"
                                            ]
                                        },
                                        "attempts": {
                                            "type": "object",
                                            "properties": {
                                                "total": {
                                                    "type": "integer"
                                                },
                                                "batched": {
                                                    "type": "integer"
                                                },
                                                "skipped": {
                                                    "type": "integer"
                                                },
                                                "unbatched": {
                                                    "type": "integer"
                                                },
                                                "auto_assigned": {
                                                    "type": "integer"
                                                },
                                                "batch_rate": {
                                                    "anyOf": [
                                                        {
                                                            "type": "number"
                                                        },
                                                        {
                                                            "type": "number",
                                                            "enum": [
                                                                0
                                                            ]
                                                        }
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "total",
                                                "batched",
                                                "skipped",
                                                "unbatched",
                                                "auto_assigned",
                                                "batch_rate"
                                            ]
                                        },
                                        "top_skip_reasons": {
                                            "type": "string"
                                        },
                                        "series": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "window",
                                        "attempts",
                                        "top_skip_reasons",
                                        "series"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/ops/batching/reasons": {
            "get": {
                "operationId": "opsBatching.reasons",
                "description": "Use this to answer:\n - which stores are blocking batching (reason codes)\n - which time-of-day causes most guardrail failures\n - which pickup zones are problematic",
                "summary": "Batching reasons breakdown by dimension",
                "tags": [
                    "OpsBatching"
                ],
                "parameters": [
                    {
                        "name": "group_by",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "store_id",
                                "hour",
                                "zone"
                            ]
                        }
                    },
                    {
                        "name": "decision",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "maxLength": 32
                        }
                    },
                    {
                        "name": "start",
                        "in": "query",
                        "description": "default: skipped",
                        "schema": {
                            "type": "string",
                            "format": "date-time"
                        }
                    },
                    {
                        "name": "end",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "format": "date-time"
                        }
                    },
                    {
                        "name": "since_days",
                        "in": "query",
                        "schema": {
                            "type": "integer",
                            "minimum": 1,
                            "maximum": 90
                        }
                    },
                    {
                        "name": "limit",
                        "in": "query",
                        "schema": {
                            "type": "integer",
                            "minimum": 1,
                            "maximum": 500
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "window": {
                                            "type": "object",
                                            "properties": {
                                                "start": {
                                                    "type": "string"
                                                },
                                                "end": {
                                                    "type": "string"
                                                },
                                                "days": {
                                                    "type": "string"
                                                }
                                            },
                                            "required": [
                                                "start",
                                                "end",
                                                "days"
                                            ]
                                        },
                                        "group_by": {
                                            "type": "string"
                                        },
                                        "decision": {
                                            "type": "string"
                                        },
                                        "data": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "window",
                                        "group_by",
                                        "decision",
                                        "data"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/ops/overview": {
            "get": {
                "operationId": "opsDashboard.overview",
                "tags": [
                    "OpsDashboard"
                ],
                "parameters": [
                    {
                        "name": "since_hours",
                        "in": "query",
                        "schema": {
                            "type": "integer",
                            "minimum": 1,
                            "maximum": 168
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "window": {
                                            "type": "object",
                                            "properties": {
                                                "since": {
                                                    "type": "string"
                                                },
                                                "hours": {
                                                    "type": "integer"
                                                }
                                            },
                                            "required": [
                                                "since",
                                                "hours"
                                            ]
                                        },
                                        "orders": {
                                            "type": "object",
                                            "properties": {
                                                "by_status": {
                                                    "type": "array",
                                                    "items": {}
                                                }
                                            },
                                            "required": [
                                                "by_status"
                                            ]
                                        },
                                        "dispatch": {
                                            "type": "object",
                                            "properties": {
                                                "open_attempts": {
                                                    "type": "integer",
                                                    "minimum": 0
                                                }
                                            },
                                            "required": [
                                                "open_attempts"
                                            ]
                                        },
                                        "drivers": {
                                            "type": "object",
                                            "properties": {
                                                "by_status": {
                                                    "type": "array",
                                                    "items": {}
                                                }
                                            },
                                            "required": [
                                                "by_status"
                                            ]
                                        },
                                        "queues": {
                                            "type": "object",
                                            "properties": {
                                                "failed_jobs": {
                                                    "type": "integer"
                                                }
                                            },
                                            "required": [
                                                "failed_jobs"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "window",
                                        "orders",
                                        "dispatch",
                                        "drivers",
                                        "queues"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/ops/analytics/dispatch-funnel": {
            "get": {
                "operationId": "opsDispatchFunnel.funnel",
                "tags": [
                    "OpsDispatchFunnel"
                ],
                "parameters": [
                    {
                        "name": "start",
                        "in": "query",
                        "description": "Range (inclusive start, inclusive end)",
                        "schema": {
                            "type": "string",
                            "format": "date-time"
                        }
                    },
                    {
                        "name": "end",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "format": "date-time"
                        }
                    },
                    {
                        "name": "since_days",
                        "in": "query",
                        "description": "Shortcut: last N days (overrides start/end when present)",
                        "schema": {
                            "type": "integer",
                            "minimum": 1,
                            "maximum": 90
                        }
                    },
                    {
                        "name": "store_id",
                        "in": "query",
                        "description": "Optional filters",
                        "schema": {
                            "type": "integer",
                            "minimum": 1
                        }
                    },
                    {
                        "name": "driver_id",
                        "in": "query",
                        "schema": {
                            "type": "integer",
                            "minimum": 1
                        }
                    },
                    {
                        "name": "low_stock_threshold",
                        "in": "query",
                        "description": "Inventory threshold",
                        "schema": {
                            "type": "integer",
                            "minimum": 1,
                            "maximum": 1000
                        }
                    },
                    {
                        "name": "group_by",
                        "in": "query",
                        "description": "none|zone|hour|store",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "zone",
                                "hour",
                                "store"
                            ]
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "window": {
                                            "type": "object",
                                            "properties": {
                                                "start": {
                                                    "type": "string"
                                                },
                                                "end": {
                                                    "type": "string"
                                                },
                                                "days": {
                                                    "type": "string"
                                                }
                                            },
                                            "required": [
                                                "start",
                                                "end",
                                                "days"
                                            ]
                                        },
                                        "": {
                                            "anyOf": [
                                                {
                                                    "type": "object",
                                                    "properties": {
                                                        "group_by": {
                                                            "anyOf": [
                                                                {
                                                                    "type": "string"
                                                                },
                                                                {
                                                                    "type": "string",
                                                                    "enum": [
                                                                        "none"
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        "rows": {
                                                            "type": "array",
                                                            "prefixItems": [
                                                                {
                                                                    "type": "object",
                                                                    "properties": {
                                                                        "": {
                                                                            "anyOf": [
                                                                                {
                                                                                    "type": "string"
                                                                                },
                                                                                {
                                                                                    "type": "integer"
                                                                                }
                                                                            ]
                                                                        },
                                                                        "attempts": {
                                                                            "type": "object",
                                                                            "properties": {
                                                                                "sent": {
                                                                                    "type": "integer"
                                                                                },
                                                                                "accepted": {
                                                                                    "type": "integer"
                                                                                },
                                                                                "rejected": {
                                                                                    "type": "integer"
                                                                                },
                                                                                "timeout": {
                                                                                    "type": "integer"
                                                                                },
                                                                                "expired": {
                                                                                    "type": "integer"
                                                                                },
                                                                                "cancelled": {
                                                                                    "type": "integer"
                                                                                },
                                                                                "open": {
                                                                                    "type": "integer"
                                                                                }
                                                                            },
                                                                            "required": [
                                                                                "sent",
                                                                                "accepted",
                                                                                "rejected",
                                                                                "timeout",
                                                                                "expired",
                                                                                "cancelled",
                                                                                "open"
                                                                            ]
                                                                        },
                                                                        "rates": {
                                                                            "type": "object",
                                                                            "properties": {
                                                                                "acceptance": {
                                                                                    "anyOf": [
                                                                                        {
                                                                                            "type": "number"
                                                                                        },
                                                                                        {
                                                                                            "type": "number",
                                                                                            "enum": [
                                                                                                0
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                "reject": {
                                                                                    "anyOf": [
                                                                                        {
                                                                                            "type": "number"
                                                                                        },
                                                                                        {
                                                                                            "type": "number",
                                                                                            "enum": [
                                                                                                0
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                "timeout": {
                                                                                    "anyOf": [
                                                                                        {
                                                                                            "type": "number"
                                                                                        },
                                                                                        {
                                                                                            "type": "number",
                                                                                            "enum": [
                                                                                                0
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            },
                                                                            "required": [
                                                                                "acceptance",
                                                                                "reject",
                                                                                "timeout"
                                                                            ]
                                                                        },
                                                                        "orders": {
                                                                            "type": "object",
                                                                            "properties": {
                                                                                "distinct": {
                                                                                    "type": "integer"
                                                                                },
                                                                                "reassign": {
                                                                                    "type": "integer"
                                                                                },
                                                                                "reassign_rate": {
                                                                                    "anyOf": [
                                                                                        {
                                                                                            "type": "number"
                                                                                        },
                                                                                        {
                                                                                            "type": "number",
                                                                                            "enum": [
                                                                                                0
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                "avg_attempts_per_order": {
                                                                                    "anyOf": [
                                                                                        {
                                                                                            "type": "number"
                                                                                        },
                                                                                        {
                                                                                            "type": "number",
                                                                                            "enum": [
                                                                                                0
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            },
                                                                            "required": [
                                                                                "distinct",
                                                                                "reassign",
                                                                                "reassign_rate",
                                                                                "avg_attempts_per_order"
                                                                            ]
                                                                        }
                                                                    },
                                                                    "required": [
                                                                        null,
                                                                        "attempts",
                                                                        "rates",
                                                                        "orders"
                                                                    ]
                                                                }
                                                            ],
                                                            "minItems": 1,
                                                            "maxItems": 1,
                                                            "additionalItems": false
                                                        }
                                                    },
                                                    "required": [
                                                        "group_by",
                                                        "rows"
                                                    ]
                                                },
                                                {
                                                    "type": "string"
                                                }
                                            ]
                                        }
                                    },
                                    "required": [
                                        "window",
                                        null
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/ops/drivers": {
            "get": {
                "operationId": "opsDrivers.index",
                "tags": [
                    "OpsDrivers"
                ],
                "parameters": [
                    {
                        "name": "q",
                        "in": "query",
                        "schema": {
                            "type": [
                                "string",
                                "null"
                            ],
                            "maxLength": 120
                        }
                    },
                    {
                        "name": "status",
                        "in": "query",
                        "schema": {
                            "type": [
                                "string",
                                "null"
                            ],
                            "enum": [
                                "pending",
                                "approved",
                                "rejected",
                                "suspended"
                            ]
                        }
                    },
                    {
                        "name": "page",
                        "in": "query",
                        "schema": {
                            "type": [
                                "integer",
                                "null"
                            ],
                            "minimum": 1
                        }
                    },
                    {
                        "name": "per_page",
                        "in": "query",
                        "schema": {
                            "type": [
                                "integer",
                                "null"
                            ],
                            "minimum": 1,
                            "maximum": 100
                        }
                    },
                    {
                        "name": "only_available",
                        "in": "query",
                        "schema": {
                            "type": "boolean",
                            "default": false
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "type": "object",
                                                "properties": {
                                                    "id": {
                                                        "type": "integer"
                                                    },
                                                    "user_id": {
                                                        "type": "integer"
                                                    },
                                                    "status": {
                                                        "type": "string"
                                                    },
                                                    "user": {
                                                        "type": "string"
                                                    },
                                                    "trust": {
                                                        "anyOf": [
                                                            {
                                                                "$ref": "#/components/schemas/DriverTrustProfile"
                                                            },
                                                            {
                                                                "type": "null"
                                                            }
                                                        ]
                                                    },
                                                    "stats": {
                                                        "type": "object",
                                                        "properties": {
                                                            "accepted_today": {
                                                                "type": "integer"
                                                            },
                                                            "completed_today": {
                                                                "type": "integer"
                                                            }
                                                        },
                                                        "required": [
                                                            "accepted_today",
                                                            "completed_today"
                                                        ]
                                                    }
                                                },
                                                "required": [
                                                    "id",
                                                    "user_id",
                                                    "status",
                                                    "user",
                                                    "trust",
                                                    "stats"
                                                ]
                                            }
                                        },
                                        "meta": {
                                            "type": "object",
                                            "properties": {
                                                "current_page": {
                                                    "type": "integer"
                                                },
                                                "per_page": {
                                                    "type": "integer"
                                                },
                                                "total": {
                                                    "type": "integer"
                                                },
                                                "last_page": {
                                                    "type": "integer"
                                                }
                                            },
                                            "required": [
                                                "current_page",
                                                "per_page",
                                                "total",
                                                "last_page"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "data",
                                        "meta"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/ops/drivers/nearby": {
            "get": {
                "operationId": "opsDrivers.nearby",
                "tags": [
                    "OpsDrivers"
                ],
                "parameters": [
                    {
                        "name": "lat",
                        "in": "query",
                        "required": true,
                        "schema": {
                            "type": "number",
                            "minimum": -90,
                            "maximum": 90
                        }
                    },
                    {
                        "name": "lon",
                        "in": "query",
                        "required": true,
                        "schema": {
                            "type": "number",
                            "minimum": -180,
                            "maximum": 180
                        }
                    },
                    {
                        "name": "radius_m",
                        "in": "query",
                        "schema": {
                            "type": "integer",
                            "minimum": 50,
                            "maximum": 30000
                        }
                    },
                    {
                        "name": "limit",
                        "in": "query",
                        "schema": {
                            "type": "integer",
                            "minimum": 1,
                            "maximum": 200
                        }
                    },
                    {
                        "name": "vehicle_type_id",
                        "in": "query",
                        "schema": {
                            "type": "integer",
                            "minimum": 1
                        }
                    },
                    {
                        "name": "only_available",
                        "in": "query",
                        "schema": {
                            "type": "boolean"
                        }
                    },
                    {
                        "name": "include_user",
                        "in": "query",
                        "schema": {
                            "type": "boolean"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "anyOf": [
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "array",
                                                    "prefixItems": [
                                                        {
                                                            "type": "object",
                                                            "properties": {
                                                                "driver_id": {
                                                                    "type": "integer"
                                                                },
                                                                "distance_m": {
                                                                    "type": "number"
                                                                },
                                                                "location": {
                                                                    "type": "object",
                                                                    "properties": {
                                                                        "lat": {
                                                                            "type": "number"
                                                                        },
                                                                        "lon": {
                                                                            "type": "number"
                                                                        },
                                                                        "ts": {
                                                                            "type": "integer"
                                                                        },
                                                                        "last_seen_ts": {
                                                                            "type": "integer"
                                                                        }
                                                                    },
                                                                    "required": [
                                                                        "lat",
                                                                        "lon",
                                                                        "ts",
                                                                        "last_seen_ts"
                                                                    ]
                                                                },
                                                                "user": {
                                                                    "anyOf": [
                                                                        {
                                                                            "$ref": "#/components/schemas/User"
                                                                        },
                                                                        {
                                                                            "type": "null"
                                                                        }
                                                                    ]
                                                                }
                                                            },
                                                            "required": [
                                                                "driver_id",
                                                                "distance_m",
                                                                "location",
                                                                "user"
                                                            ]
                                                        }
                                                    ],
                                                    "minItems": 1,
                                                    "maxItems": 1,
                                                    "additionalItems": false
                                                },
                                                "meta": {
                                                    "type": "object",
                                                    "properties": {
                                                        "radius_m": {
                                                            "type": "integer"
                                                        },
                                                        "limit": {
                                                            "type": "integer"
                                                        },
                                                        "vehicle_type_id": {
                                                            "type": [
                                                                "string",
                                                                "null"
                                                            ]
                                                        },
                                                        "online_window_seconds": {
                                                            "type": "integer"
                                                        },
                                                        "only_available": {
                                                            "type": "boolean"
                                                        }
                                                    },
                                                    "required": [
                                                        "radius_m",
                                                        "limit",
                                                        "vehicle_type_id",
                                                        "online_window_seconds",
                                                        "only_available"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "data",
                                                "meta"
                                            ]
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    },
                                                    "minItems": 0,
                                                    "maxItems": 0,
                                                    "additionalItems": false
                                                },
                                                "meta": {
                                                    "type": "object",
                                                    "properties": {
                                                        "radius_m": {
                                                            "type": "integer"
                                                        },
                                                        "limit": {
                                                            "type": "integer"
                                                        },
                                                        "vehicle_type_id": {
                                                            "type": [
                                                                "string",
                                                                "null"
                                                            ]
                                                        },
                                                        "online_window_seconds": {
                                                            "type": "integer"
                                                        }
                                                    },
                                                    "required": [
                                                        "radius_m",
                                                        "limit",
                                                        "vehicle_type_id",
                                                        "online_window_seconds"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "data",
                                                "meta"
                                            ]
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "503": {
                        "description": "Redis unavailable or GEO command not supported.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "enum": [
                                                "Live driver locations are temporarily unavailable."
                                            ]
                                        },
                                        "error": {
                                            "type": "string",
                                            "enum": [
                                                "redis_unavailable"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "message",
                                        "error"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/ops/drivers/{user}": {
            "get": {
                "operationId": "opsDrivers.show",
                "tags": [
                    "OpsDrivers"
                ],
                "parameters": [
                    {
                        "name": "user",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "driver": {
                                            "$ref": "#/components/schemas/User"
                                        }
                                    },
                                    "required": [
                                        "driver"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "enum": [
                                                "User is not a driver."
                                            ]
                                        }
                                    },
                                    "required": [
                                        "message"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/ops/analytics/marketplace-health": {
            "get": {
                "operationId": "opsMarketplaceHealth.marketplace",
                "tags": [
                    "OpsMarketplaceHealth"
                ],
                "parameters": [
                    {
                        "name": "start",
                        "in": "query",
                        "description": "Range (inclusive start, inclusive end)",
                        "schema": {
                            "type": "string",
                            "format": "date-time"
                        }
                    },
                    {
                        "name": "end",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "format": "date-time"
                        }
                    },
                    {
                        "name": "since_days",
                        "in": "query",
                        "description": "Shortcut: last N days (overrides start/end when present)",
                        "schema": {
                            "type": "integer",
                            "minimum": 1,
                            "maximum": 90
                        }
                    },
                    {
                        "name": "store_id",
                        "in": "query",
                        "description": "Optional filters",
                        "schema": {
                            "type": "integer",
                            "minimum": 1
                        }
                    },
                    {
                        "name": "driver_id",
                        "in": "query",
                        "schema": {
                            "type": "integer",
                            "minimum": 1
                        }
                    },
                    {
                        "name": "low_stock_threshold",
                        "in": "query",
                        "description": "Inventory threshold",
                        "schema": {
                            "type": "integer",
                            "minimum": 1,
                            "maximum": 1000
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "window": {
                                            "type": "object",
                                            "properties": {
                                                "start": {
                                                    "type": "string"
                                                },
                                                "end": {
                                                    "type": "string"
                                                },
                                                "days": {
                                                    "type": "string"
                                                }
                                            },
                                            "required": [
                                                "start",
                                                "end",
                                                "days"
                                            ]
                                        },
                                        "": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "window",
                                        null
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/ops/orders/{order}/ai/explain-stuck": {
            "get": {
                "operationId": "opsOrderAi.explain",
                "tags": [
                    "OpsOrderAi"
                ],
                "parameters": [
                    {
                        "name": "order",
                        "in": "path",
                        "required": true,
                        "description": "The order ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "503": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "message"
                                    ]
                                }
                            }
                        }
                    },
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "explanation": {
                                            "type": "string"
                                        },
                                        "likely_root_causes": {
                                            "type": "string"
                                        },
                                        "suggested_next_actions": {
                                            "type": "string"
                                        },
                                        "analysis": {
                                            "type": "object",
                                            "properties": {
                                                "status": {
                                                    "type": "string"
                                                },
                                                "payment_status": {
                                                    "type": "string"
                                                },
                                                "store_status": {
                                                    "type": "string"
                                                },
                                                "dispatch_status": {
                                                    "type": "string"
                                                },
                                                "expected_next": {
                                                    "anyOf": [
                                                        {
                                                            "type": "array",
                                                            "items": {}
                                                        },
                                                        {
                                                            "type": "array",
                                                            "prefixItems": [
                                                                {
                                                                    "type": "string"
                                                                },
                                                                {
                                                                    "type": "string"
                                                                }
                                                            ],
                                                            "minItems": 2,
                                                            "maxItems": 2,
                                                            "additionalItems": false
                                                        },
                                                        {
                                                            "type": "array",
                                                            "prefixItems": [
                                                                {
                                                                    "type": "string"
                                                                }
                                                            ],
                                                            "minItems": 1,
                                                            "maxItems": 1,
                                                            "additionalItems": false
                                                        },
                                                        {
                                                            "type": "array",
                                                            "items": {
                                                                "type": "string"
                                                            },
                                                            "minItems": 0,
                                                            "maxItems": 0,
                                                            "additionalItems": false
                                                        }
                                                    ]
                                                },
                                                "blockers": {
                                                    "type": "array",
                                                    "items": {}
                                                },
                                                "signals": {
                                                    "type": "object",
                                                    "properties": {
                                                        "has_driver": {
                                                            "type": "boolean"
                                                        },
                                                        "is_scheduled": {
                                                            "type": "boolean"
                                                        },
                                                        "age_minutes": {
                                                            "type": [
                                                                "integer",
                                                                "null"
                                                            ]
                                                        },
                                                        "last_update_minutes": {
                                                            "type": [
                                                                "integer",
                                                                "null"
                                                            ]
                                                        }
                                                    },
                                                    "required": [
                                                        "has_driver",
                                                        "is_scheduled",
                                                        "age_minutes",
                                                        "last_update_minutes"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "status",
                                                "payment_status",
                                                "store_status",
                                                "dispatch_status",
                                                "expected_next",
                                                "blockers",
                                                "signals"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "explanation",
                                        "likely_root_causes",
                                        "suggested_next_actions",
                                        "analysis"
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/ops/orders": {
            "get": {
                "operationId": "opsOrders.index",
                "tags": [
                    "OpsOrders"
                ],
                "parameters": [
                    {
                        "name": "page",
                        "in": "query",
                        "description": "pagination",
                        "schema": {
                            "type": "integer",
                            "minimum": 1
                        }
                    },
                    {
                        "name": "per_page",
                        "in": "query",
                        "schema": {
                            "type": "integer",
                            "minimum": 1,
                            "maximum": 100
                        }
                    },
                    {
                        "name": "status",
                        "in": "query",
                        "description": "filters",
                        "schema": {
                            "type": "string",
                            "maxLength": 50
                        }
                    },
                    {
                        "name": "q",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "maxLength": 120
                        }
                    },
                    {
                        "name": "store_id",
                        "in": "query",
                        "schema": {
                            "type": "integer",
                            "minimum": 1
                        }
                    },
                    {
                        "name": "driver_id",
                        "in": "query",
                        "schema": {
                            "type": "integer",
                            "minimum": 1
                        }
                    },
                    {
                        "name": "customer_id",
                        "in": "query",
                        "schema": {
                            "type": "integer",
                            "minimum": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "type": "string"
                                            }
                                        },
                                        "meta": {
                                            "type": "object",
                                            "properties": {
                                                "page": {
                                                    "type": "integer",
                                                    "description": "Keep both keys for compatibility across clients/tests."
                                                },
                                                "current_page": {
                                                    "type": "integer"
                                                },
                                                "per_page": {
                                                    "type": "integer"
                                                },
                                                "total": {
                                                    "type": "integer"
                                                },
                                                "last_page": {
                                                    "type": "integer"
                                                }
                                            },
                                            "required": [
                                                "page",
                                                "current_page",
                                                "per_page",
                                                "total",
                                                "last_page"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "data",
                                        "meta"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/ops/orders/{order}": {
            "get": {
                "operationId": "opsOrders.show",
                "summary": "GET /v1/ops/orders/{order}",
                "tags": [
                    "OpsOrders"
                ],
                "parameters": [
                    {
                        "name": "order",
                        "in": "path",
                        "required": true,
                        "description": "The order ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/components/schemas/DeliveryOrder"
                                        },
                                        "batch": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "data",
                                        "batch"
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/ops/orders/{order}/batch": {
            "get": {
                "operationId": "opsOrders.batch",
                "summary": "GET /v1/ops/orders/{order}/batch\nBatching visibility endpoint (shows sibling id, canonical id, etc.)",
                "tags": [
                    "OpsOrders"
                ],
                "parameters": [
                    {
                        "name": "order",
                        "in": "path",
                        "required": true,
                        "description": "The order ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "data"
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/ops/orders/{order}/assign-driver": {
            "post": {
                "operationId": "opsOrders.assignDriver",
                "summary": "POST /v1/ops/orders/{order}/assign-driver",
                "tags": [
                    "OpsOrders"
                ],
                "parameters": [
                    {
                        "name": "order",
                        "in": "path",
                        "required": true,
                        "description": "The order ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/OpsOrderAssignDriverRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        },
                                        "order": {
                                            "type": "object",
                                            "properties": {
                                                "id": {
                                                    "type": "integer"
                                                },
                                                "driver_id": {
                                                    "type": "integer"
                                                },
                                                "dispatch_status": {
                                                    "type": "string"
                                                }
                                            },
                                            "required": [
                                                "id",
                                                "driver_id",
                                                "dispatch_status"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "ok",
                                        "order"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/ops/orders/{order}/unassign-driver": {
            "post": {
                "operationId": "opsOrders.unassignDriver",
                "tags": [
                    "OpsOrders"
                ],
                "parameters": [
                    {
                        "name": "order",
                        "in": "path",
                        "required": true,
                        "description": "The order ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/OpsOrderUnassignDriverRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        },
                                        "order": {
                                            "type": "object",
                                            "properties": {
                                                "id": {
                                                    "type": "integer"
                                                },
                                                "driver_id": {
                                                    "type": "null"
                                                },
                                                "dispatch_status": {
                                                    "type": "string"
                                                }
                                            },
                                            "required": [
                                                "id",
                                                "driver_id",
                                                "dispatch_status"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "ok",
                                        "order"
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/ops/orders/{order}/offer-driver": {
            "post": {
                "operationId": "opsOrders.offerDriver",
                "summary": "POST /v1/ops/orders/{order}/offer-driver\nOps \"drag driver onto order\" => creates a dispatch_attempt (offered) with TTL",
                "tags": [
                    "OpsOrders"
                ],
                "parameters": [
                    {
                        "name": "order",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "driver_id": {
                                        "type": "integer",
                                        "minimum": 1
                                    },
                                    "note": {
                                        "type": [
                                            "string",
                                            "null"
                                        ],
                                        "maxLength": 500
                                    }
                                },
                                "required": [
                                    "driver_id"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "anyOf": [
                                        {
                                            "type": "object",
                                            "properties": {
                                                "ok": {
                                                    "type": "boolean"
                                                },
                                                "attempt": {
                                                    "type": "object",
                                                    "properties": {
                                                        "attempt_id": {
                                                            "type": "string"
                                                        },
                                                        "driver_id": {
                                                            "type": "integer"
                                                        },
                                                        "offered_at": {
                                                            "type": "string"
                                                        },
                                                        "expires_at": {
                                                            "type": "string"
                                                        },
                                                        "order_id": {
                                                            "type": "integer"
                                                        },
                                                        "status": {
                                                            "type": "string"
                                                        }
                                                    },
                                                    "required": [
                                                        "attempt_id",
                                                        "driver_id",
                                                        "offered_at",
                                                        "expires_at",
                                                        "order_id",
                                                        "status"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "ok",
                                                "attempt"
                                            ]
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "ok": {
                                                    "type": "boolean"
                                                },
                                                "message": {
                                                    "type": "string",
                                                    "enum": [
                                                        "Order already assigned."
                                                    ]
                                                },
                                                "order": {
                                                    "type": "object",
                                                    "properties": {
                                                        "id": {
                                                            "type": "integer"
                                                        },
                                                        "driver_id": {
                                                            "type": "integer"
                                                        }
                                                    },
                                                    "required": [
                                                        "id",
                                                        "driver_id"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "ok",
                                                "message",
                                                "order"
                                            ]
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "ok": {
                                                    "type": "boolean"
                                                },
                                                "message": {
                                                    "type": "string",
                                                    "enum": [
                                                        "Order already has a driver."
                                                    ]
                                                },
                                                "order": {
                                                    "type": "object",
                                                    "properties": {
                                                        "id": {
                                                            "type": "integer"
                                                        },
                                                        "driver_id": {
                                                            "type": "integer"
                                                        }
                                                    },
                                                    "required": [
                                                        "id",
                                                        "driver_id"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "ok",
                                                "message",
                                                "order"
                                            ]
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/ops/orders/{order}/cancel": {
            "post": {
                "operationId": "opsOrders.cancel",
                "summary": "POST /v1/ops/orders/{order}/cancel",
                "tags": [
                    "OpsOrders"
                ],
                "parameters": [
                    {
                        "name": "order",
                        "in": "path",
                        "required": true,
                        "description": "The order ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "reason": {
                                        "type": [
                                            "string",
                                            "null"
                                        ],
                                        "maxLength": 200
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        }
                                    },
                                    "required": [
                                        "ok"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/ops/orders/{order}/note": {
            "post": {
                "operationId": "opsOrders.note",
                "summary": "POST /v1/ops/orders/{order}/note",
                "tags": [
                    "OpsOrders"
                ],
                "parameters": [
                    {
                        "name": "order",
                        "in": "path",
                        "required": true,
                        "description": "The order ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "note": {
                                        "type": "string",
                                        "maxLength": 500
                                    }
                                },
                                "required": [
                                    "note"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        }
                                    },
                                    "required": [
                                        "ok"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/ops/orders/{order}/parcel-cod/remit": {
            "post": {
                "operationId": "opsOrders.remitParcelCod",
                "summary": "Phase 1: Ops confirms COD remit (driver turns in cash) and platform pays sender into wallet.\nPOST /v1/ops/orders/{order}/parcel-cod/remit",
                "tags": [
                    "OpsOrders"
                ],
                "parameters": [
                    {
                        "name": "order",
                        "in": "path",
                        "required": true,
                        "description": "The order ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "receiver_name": {
                                        "type": [
                                            "string",
                                            "null"
                                        ],
                                        "maxLength": 80
                                    },
                                    "notes": {
                                        "type": [
                                            "string",
                                            "null"
                                        ],
                                        "maxLength": 200
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        },
                                        "order_id": {
                                            "type": "integer"
                                        },
                                        "cod_status": {
                                            "type": "string"
                                        },
                                        "cod_remitted_at": {
                                            "type": "string"
                                        },
                                        "cod_settled_at": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "ok",
                                        "order_id",
                                        "cod_status",
                                        "cod_remitted_at",
                                        "cod_settled_at"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "409": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "enum": [
                                                "COD remit requires COD to be collected first."
                                            ]
                                        },
                                        "cod_status": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "message",
                                        "cod_status"
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/refunds": {
            "post": {
                "operationId": "opsRefund.store",
                "tags": [
                    "OpsRefund"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CreateRefundRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/ops/stores/{store}/open": {
            "post": {
                "operationId": "opsStoreControls.open",
                "tags": [
                    "OpsStoreControls"
                ],
                "parameters": [
                    {
                        "name": "store",
                        "in": "path",
                        "required": true,
                        "description": "The store ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/StoreOpenRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "`StoreResource`",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/components/schemas/StoreResource"
                                        },
                                        "ok": {
                                            "type": "boolean"
                                        }
                                    },
                                    "required": [
                                        "data",
                                        "ok"
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/ops/stores/{store}/close": {
            "post": {
                "operationId": "opsStoreControls.close",
                "tags": [
                    "OpsStoreControls"
                ],
                "parameters": [
                    {
                        "name": "store",
                        "in": "path",
                        "required": true,
                        "description": "The store ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/StoreCloseRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "`StoreResource`",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/components/schemas/StoreResource"
                                        },
                                        "ok": {
                                            "type": "boolean"
                                        }
                                    },
                                    "required": [
                                        "data",
                                        "ok"
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/ops/stores/{store}/pause": {
            "post": {
                "operationId": "opsStoreControls.pause",
                "tags": [
                    "OpsStoreControls"
                ],
                "parameters": [
                    {
                        "name": "store",
                        "in": "path",
                        "required": true,
                        "description": "The store ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/StorePauseRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "`StoreResource`",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/components/schemas/StoreResource"
                                        },
                                        "ok": {
                                            "type": "boolean"
                                        }
                                    },
                                    "required": [
                                        "data",
                                        "ok"
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/ops/stores/{store}/resume": {
            "post": {
                "operationId": "opsStoreControls.resume",
                "tags": [
                    "OpsStoreControls"
                ],
                "parameters": [
                    {
                        "name": "store",
                        "in": "path",
                        "required": true,
                        "description": "The store ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/StoreResumeRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "`StoreResource`",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/components/schemas/StoreResource"
                                        },
                                        "ok": {
                                            "type": "boolean"
                                        }
                                    },
                                    "required": [
                                        "data",
                                        "ok"
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/ops/stores/{store}/prep-time": {
            "patch": {
                "operationId": "opsStoreControls.updateDefaultPrepTime",
                "tags": [
                    "OpsStoreControls"
                ],
                "parameters": [
                    {
                        "name": "store",
                        "in": "path",
                        "required": true,
                        "description": "The store ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/StoreDefaultPrepTimeRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "`StoreResource`",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/components/schemas/StoreResource"
                                        },
                                        "ok": {
                                            "type": "boolean"
                                        }
                                    },
                                    "required": [
                                        "data",
                                        "ok"
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/ops/stores/{store}/constraints": {
            "patch": {
                "operationId": "opsStoreControls.updateConstraints",
                "tags": [
                    "OpsStoreControls"
                ],
                "parameters": [
                    {
                        "name": "store",
                        "in": "path",
                        "required": true,
                        "description": "The store ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/StoreConstraintsRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "`StoreResource`",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/components/schemas/StoreResource"
                                        },
                                        "ok": {
                                            "type": "boolean"
                                        }
                                    },
                                    "required": [
                                        "data",
                                        "ok"
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/ops/stores/{store}/orders/{order}/prep-time": {
            "post": {
                "operationId": "opsStoreControls.overrideOrderPrepTime",
                "tags": [
                    "OpsStoreControls"
                ],
                "parameters": [
                    {
                        "name": "store",
                        "in": "path",
                        "required": true,
                        "description": "The store ID",
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "order",
                        "in": "path",
                        "required": true,
                        "description": "The order ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/OrderPrepTimeOverrideRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "`OrderPrepResource`",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/components/schemas/OrderPrepResource"
                                        },
                                        "ok": {
                                            "type": "boolean"
                                        }
                                    },
                                    "required": [
                                        "data",
                                        "ok"
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/ops/orders/stuck": {
            "get": {
                "operationId": "opsStuckOrders.index",
                "tags": [
                    "OpsStuckOrders"
                ],
                "parameters": [
                    {
                        "name": "limit",
                        "in": "query",
                        "schema": {
                            "type": "integer",
                            "minimum": 1,
                            "maximum": 100
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Array of `StuckOrderResource`",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/StuckOrderResource"
                                            }
                                        }
                                    },
                                    "required": [
                                        "data"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/ops/orders/{order}/timeline": {
            "get": {
                "operationId": "orderTimeline.show",
                "tags": [
                    "OrderTimeline"
                ],
                "parameters": [
                    {
                        "name": "order",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "`OrderTimelineResource`",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/components/schemas/OrderTimelineResource"
                                        }
                                    },
                                    "required": [
                                        "data"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/onboarding/partner/apply": {
            "post": {
                "operationId": "onboarding.partner.apply",
                "tags": [
                    "PartnerApply"
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "business_name": {
                                        "type": "string",
                                        "description": "Support both key names (tests use \"company_name\")",
                                        "maxLength": 160
                                    },
                                    "company_name": {
                                        "type": "string",
                                        "maxLength": 160
                                    },
                                    "notes": {
                                        "type": [
                                            "string",
                                            "null"
                                        ],
                                        "maxLength": 1000
                                    },
                                    "facebook_page_url": {
                                        "type": [
                                            "string",
                                            "null"
                                        ],
                                        "maxLength": 255
                                    },
                                    "service_area": {
                                        "type": [
                                            "string",
                                            "null"
                                        ],
                                        "maxLength": 160
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        },
                                        "partner": {
                                            "anyOf": [
                                                {
                                                    "$ref": "#/components/schemas/PartnerProfile"
                                                },
                                                {
                                                    "type": "null"
                                                }
                                            ]
                                        }
                                    },
                                    "required": [
                                        "ok",
                                        "partner"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/partner/overview": {
            "get": {
                "operationId": "partnerDashboard.overview",
                "tags": [
                    "PartnerDashboard"
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "drivers_total": {
                                                    "type": "integer"
                                                },
                                                "drivers_online": {
                                                    "type": "integer"
                                                },
                                                "orders_active": {
                                                    "type": "integer"
                                                },
                                                "orders_searching": {
                                                    "type": "integer"
                                                },
                                                "orders_assigned": {
                                                    "type": "integer"
                                                },
                                                "completed_today": {
                                                    "type": "integer"
                                                },
                                                "earnings_today_points": {
                                                    "type": "integer"
                                                },
                                                "wallet_balance_points": {
                                                    "type": "integer"
                                                }
                                            },
                                            "required": [
                                                "drivers_total",
                                                "drivers_online",
                                                "orders_active",
                                                "orders_searching",
                                                "orders_assigned",
                                                "completed_today",
                                                "earnings_today_points",
                                                "wallet_balance_points"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "data"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/partner/drivers": {
            "get": {
                "operationId": "partnerDrivers.index",
                "tags": [
                    "PartnerDrivers"
                ],
                "parameters": [
                    {
                        "name": "q",
                        "in": "query",
                        "schema": {
                            "type": [
                                "string",
                                "null"
                            ],
                            "maxLength": 120
                        }
                    },
                    {
                        "name": "status",
                        "in": "query",
                        "schema": {
                            "type": [
                                "string",
                                "null"
                            ],
                            "enum": [
                                "pending",
                                "approved",
                                "rejected",
                                "suspended"
                            ]
                        }
                    },
                    {
                        "name": "page",
                        "in": "query",
                        "schema": {
                            "type": [
                                "integer",
                                "null"
                            ],
                            "minimum": 1
                        }
                    },
                    {
                        "name": "per_page",
                        "in": "query",
                        "schema": {
                            "type": [
                                "integer",
                                "null"
                            ],
                            "minimum": 1,
                            "maximum": 100
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "type": "object",
                                                "properties": {
                                                    "id": {
                                                        "type": "integer"
                                                    },
                                                    "user_id": {
                                                        "type": "integer"
                                                    },
                                                    "status": {
                                                        "type": "string"
                                                    },
                                                    "user": {
                                                        "type": "string"
                                                    },
                                                    "trust": {
                                                        "anyOf": [
                                                            {
                                                                "$ref": "#/components/schemas/DriverTrustProfile"
                                                            },
                                                            {
                                                                "type": "null"
                                                            }
                                                        ]
                                                    },
                                                    "stats": {
                                                        "type": "object",
                                                        "properties": {
                                                            "accepted_today": {
                                                                "type": "integer"
                                                            },
                                                            "completed_today": {
                                                                "type": "integer"
                                                            }
                                                        },
                                                        "required": [
                                                            "accepted_today",
                                                            "completed_today"
                                                        ]
                                                    }
                                                },
                                                "required": [
                                                    "id",
                                                    "user_id",
                                                    "status",
                                                    "user",
                                                    "trust",
                                                    "stats"
                                                ]
                                            }
                                        },
                                        "meta": {
                                            "type": "object",
                                            "properties": {
                                                "current_page": {
                                                    "type": "integer"
                                                },
                                                "per_page": {
                                                    "type": "integer"
                                                },
                                                "total": {
                                                    "type": "integer"
                                                },
                                                "last_page": {
                                                    "type": "integer"
                                                }
                                            },
                                            "required": [
                                                "current_page",
                                                "per_page",
                                                "total",
                                                "last_page"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "data",
                                        "meta"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/partner/kpi/today": {
            "get": {
                "operationId": "partnerKpi.today",
                "summary": "GET /v1/partner/kpi/today",
                "tags": [
                    "PartnerKpi"
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "anyOf": [
                                        {
                                            "type": "object",
                                            "properties": {
                                                "today": {
                                                    "type": "object",
                                                    "properties": {
                                                        "today_orders": {
                                                            "type": "integer",
                                                            "description": "\u2705 keep legacy keys (tests rely on these)"
                                                        },
                                                        "today_gmv": {
                                                            "type": "integer"
                                                        },
                                                        "today_platform_fee": {
                                                            "type": "integer"
                                                        },
                                                        "today_net": {
                                                            "type": "integer"
                                                        },
                                                        "batched_orders": {
                                                            "description": "Phase 2",
                                                            "anyOf": [
                                                                {
                                                                    "type": "integer"
                                                                },
                                                                {
                                                                    "type": "integer",
                                                                    "enum": [
                                                                        0
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        "batch_rate": {
                                                            "anyOf": [
                                                                {
                                                                    "type": "number"
                                                                },
                                                                {
                                                                    "type": "integer",
                                                                    "enum": [
                                                                        0
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        "cancelled": {
                                                            "type": "integer",
                                                            "description": "ops/analytics"
                                                        },
                                                        "disputes_opened": {
                                                            "type": "integer"
                                                        },
                                                        "dispute_rate": {
                                                            "anyOf": [
                                                                {
                                                                    "type": "number"
                                                                },
                                                                {
                                                                    "type": "integer",
                                                                    "enum": [
                                                                        0
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    },
                                                    "required": [
                                                        "today_orders",
                                                        "today_gmv",
                                                        "today_platform_fee",
                                                        "today_net",
                                                        "batched_orders",
                                                        "batch_rate",
                                                        "cancelled",
                                                        "disputes_opened",
                                                        "dispute_rate"
                                                    ]
                                                },
                                                "mtd": {
                                                    "type": "object",
                                                    "properties": {
                                                        "orders": {
                                                            "type": "integer"
                                                        },
                                                        "gmv": {
                                                            "type": "integer"
                                                        },
                                                        "platform_fee": {
                                                            "type": "integer"
                                                        },
                                                        "net": {
                                                            "type": "integer"
                                                        },
                                                        "batched_orders": {
                                                            "description": "Phase 2",
                                                            "anyOf": [
                                                                {
                                                                    "type": "integer"
                                                                },
                                                                {
                                                                    "type": "integer",
                                                                    "enum": [
                                                                        0
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        "batch_rate": {
                                                            "anyOf": [
                                                                {
                                                                    "type": "number"
                                                                },
                                                                {
                                                                    "type": "integer",
                                                                    "enum": [
                                                                        0
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        "cancelled": {
                                                            "type": "integer",
                                                            "description": "ops/analytics"
                                                        },
                                                        "disputes_opened": {
                                                            "type": "integer"
                                                        },
                                                        "dispute_rate": {
                                                            "anyOf": [
                                                                {
                                                                    "type": "number"
                                                                },
                                                                {
                                                                    "type": "integer",
                                                                    "enum": [
                                                                        0
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    },
                                                    "required": [
                                                        "orders",
                                                        "gmv",
                                                        "platform_fee",
                                                        "net",
                                                        "batched_orders",
                                                        "batch_rate",
                                                        "cancelled",
                                                        "disputes_opened",
                                                        "dispute_rate"
                                                    ]
                                                },
                                                "trend_7d": {
                                                    "type": "array",
                                                    "prefixItems": [
                                                        {
                                                            "type": "array",
                                                            "items": {}
                                                        }
                                                    ],
                                                    "minItems": 1,
                                                    "maxItems": 1,
                                                    "additionalItems": false
                                                }
                                            },
                                            "required": [
                                                "today",
                                                "mtd",
                                                "trend_7d"
                                            ]
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "today": {
                                                    "type": "object",
                                                    "properties": {
                                                        "today_orders": {
                                                            "type": "integer",
                                                            "enum": [
                                                                0
                                                            ]
                                                        },
                                                        "today_gmv": {
                                                            "type": "integer",
                                                            "enum": [
                                                                0
                                                            ]
                                                        },
                                                        "today_platform_fee": {
                                                            "type": "integer",
                                                            "enum": [
                                                                0
                                                            ]
                                                        },
                                                        "today_net": {
                                                            "type": "integer",
                                                            "enum": [
                                                                0
                                                            ]
                                                        }
                                                    },
                                                    "required": [
                                                        "today_orders",
                                                        "today_gmv",
                                                        "today_platform_fee",
                                                        "today_net"
                                                    ]
                                                },
                                                "mtd": {
                                                    "type": "object",
                                                    "properties": {
                                                        "orders": {
                                                            "type": "integer",
                                                            "enum": [
                                                                0
                                                            ]
                                                        },
                                                        "gmv": {
                                                            "type": "integer",
                                                            "enum": [
                                                                0
                                                            ]
                                                        },
                                                        "platform_fee": {
                                                            "type": "integer",
                                                            "enum": [
                                                                0
                                                            ]
                                                        },
                                                        "net": {
                                                            "type": "integer",
                                                            "enum": [
                                                                0
                                                            ]
                                                        }
                                                    },
                                                    "required": [
                                                        "orders",
                                                        "gmv",
                                                        "platform_fee",
                                                        "net"
                                                    ]
                                                },
                                                "trend_7d": {
                                                    "type": "array",
                                                    "prefixItems": [
                                                        {
                                                            "type": "object",
                                                            "properties": {
                                                                "date": {
                                                                    "type": "string"
                                                                },
                                                                "orders": {
                                                                    "type": "integer",
                                                                    "enum": [
                                                                        0
                                                                    ]
                                                                },
                                                                "gmv": {
                                                                    "type": "integer",
                                                                    "enum": [
                                                                        0
                                                                    ]
                                                                },
                                                                "platform_fee": {
                                                                    "type": "integer",
                                                                    "enum": [
                                                                        0
                                                                    ]
                                                                },
                                                                "net": {
                                                                    "type": "integer",
                                                                    "enum": [
                                                                        0
                                                                    ]
                                                                }
                                                            },
                                                            "required": [
                                                                "date",
                                                                "orders",
                                                                "gmv",
                                                                "platform_fee",
                                                                "net"
                                                            ]
                                                        }
                                                    ],
                                                    "minItems": 1,
                                                    "maxItems": 1,
                                                    "additionalItems": false
                                                }
                                            },
                                            "required": [
                                                "today",
                                                "mtd",
                                                "trend_7d"
                                            ]
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    }
                }
            }
        },
        "/partner/me": {
            "get": {
                "operationId": "partnerMe.me",
                "tags": [
                    "PartnerMe"
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "user": {
                                            "$ref": "#/components/schemas/User"
                                        },
                                        "wallet": {
                                            "type": "object",
                                            "properties": {
                                                "balance_points": {
                                                    "type": "integer"
                                                }
                                            },
                                            "required": [
                                                "balance_points"
                                            ]
                                        },
                                        "stats": {
                                            "type": "object",
                                            "properties": {
                                                "drivers_count": {
                                                    "type": "integer"
                                                }
                                            },
                                            "required": [
                                                "drivers_count"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "user",
                                        "wallet",
                                        "stats"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/partner/orders": {
            "get": {
                "operationId": "partnerOrders.index",
                "tags": [
                    "PartnerOrders"
                ],
                "parameters": [
                    {
                        "name": "store_status",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "maxLength": 40
                        }
                    },
                    {
                        "name": "dispatch_status",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "maxLength": 40
                        }
                    },
                    {
                        "name": "limit",
                        "in": "query",
                        "schema": {
                            "type": "integer",
                            "minimum": 1,
                            "maximum": 100
                        }
                    },
                    {
                        "name": "today",
                        "in": "query",
                        "schema": {
                            "type": "boolean"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "type": "string"
                                            }
                                        },
                                        "meta": {
                                            "type": "object",
                                            "properties": {
                                                "current_page": {
                                                    "type": "integer"
                                                },
                                                "per_page": {
                                                    "type": "integer"
                                                },
                                                "total": {
                                                    "type": "integer"
                                                },
                                                "last_page": {
                                                    "type": "integer"
                                                }
                                            },
                                            "required": [
                                                "current_page",
                                                "per_page",
                                                "total",
                                                "last_page"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "data",
                                        "meta"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/partner/orders/{order}": {
            "get": {
                "operationId": "partnerOrders.show",
                "tags": [
                    "PartnerOrders"
                ],
                "parameters": [
                    {
                        "name": "order",
                        "in": "path",
                        "required": true,
                        "description": "The order ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "order": {
                                            "$ref": "#/components/schemas/DeliveryOrder"
                                        }
                                    },
                                    "required": [
                                        "order"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/partner/orders/{order}/assign-driver": {
            "post": {
                "operationId": "partnerOrders.assignDriver",
                "tags": [
                    "PartnerOrders"
                ],
                "parameters": [
                    {
                        "name": "order",
                        "in": "path",
                        "required": true,
                        "description": "The order ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "driver_id": {
                                        "type": "integer",
                                        "minimum": 1
                                    },
                                    "note": {
                                        "type": [
                                            "string",
                                            "null"
                                        ],
                                        "maxLength": 500
                                    }
                                },
                                "required": [
                                    "driver_id"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        },
                                        "order": {
                                            "type": "object",
                                            "properties": {
                                                "id": {
                                                    "type": "integer"
                                                },
                                                "driver_id": {
                                                    "type": "integer"
                                                }
                                            },
                                            "required": [
                                                "id",
                                                "driver_id"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "ok",
                                        "order"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/partner/orders/{order}/offer-driver": {
            "post": {
                "operationId": "partnerOrders.offerDriver",
                "tags": [
                    "PartnerOrders"
                ],
                "parameters": [
                    {
                        "name": "order",
                        "in": "path",
                        "required": true,
                        "description": "The order ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "driver_id": {
                                        "type": "integer",
                                        "minimum": 1
                                    }
                                },
                                "required": [
                                    "driver_id"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        },
                                        "attempt": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "ok",
                                        "attempt"
                                    ]
                                }
                            }
                        }
                    },
                    "409": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        },
                                        "message": {
                                            "type": "string",
                                            "enum": [
                                                "Order is not offerable"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "ok",
                                        "message"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/customer/orders/{order}/payment-instructions": {
            "get": {
                "operationId": "paymentInstructions.show",
                "tags": [
                    "PaymentInstructions"
                ],
                "parameters": [
                    {
                        "name": "order",
                        "in": "path",
                        "required": true,
                        "description": "The order ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "payment_method": {
                                            "type": "string",
                                            "enum": [
                                                "gcash_qr"
                                            ]
                                        },
                                        "receiver_name": {
                                            "type": "string"
                                        },
                                        "amount": {
                                            "type": "number"
                                        },
                                        "reference": {
                                            "anyOf": [
                                                {
                                                    "type": "string"
                                                },
                                                {
                                                    "type": "null"
                                                }
                                            ]
                                        },
                                        "qr_url": {
                                            "type": "string"
                                        },
                                        "expires_at": {
                                            "type": "string"
                                        },
                                        "instructions": {
                                            "type": "array",
                                            "prefixItems": [
                                                {
                                                    "type": "string",
                                                    "enum": [
                                                        "1) Scan the QR in GCash"
                                                    ]
                                                },
                                                {
                                                    "type": "string",
                                                    "enum": [
                                                        "2) Enter the exact amount shown"
                                                    ]
                                                },
                                                {
                                                    "type": "string"
                                                },
                                                {
                                                    "type": "string",
                                                    "enum": [
                                                        "4) Pay, then upload the receipt screenshot"
                                                    ]
                                                }
                                            ],
                                            "minItems": 4,
                                            "maxItems": 4,
                                            "additionalItems": false
                                        }
                                    },
                                    "required": [
                                        "payment_method",
                                        "receiver_name",
                                        "amount",
                                        "reference",
                                        "qr_url",
                                        "expires_at",
                                        "instructions"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "enum": [
                                                "Not your order"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "message"
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/customer/orders/{order}/payment/submit": {
            "post": {
                "operationId": "paymentProof.submit",
                "tags": [
                    "PaymentProof"
                ],
                "parameters": [
                    {
                        "name": "order",
                        "in": "path",
                        "required": true,
                        "description": "The order ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "reference": {
                                        "type": "string",
                                        "maxLength": 64
                                    },
                                    "amount": {
                                        "type": "number",
                                        "minimum": 1
                                    },
                                    "receipt": {
                                        "type": [
                                            "string",
                                            "null"
                                        ],
                                        "format": "binary",
                                        "contentMediaType": "application/octet-stream",
                                        "maxLength": 5120
                                    }
                                },
                                "required": [
                                    "reference",
                                    "amount"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        },
                                        "payment_status": {
                                            "type": "string"
                                        },
                                        "payment_reference": {
                                            "type": "string"
                                        },
                                        "receipt_id": {
                                            "type": "integer"
                                        },
                                        "review_status": {
                                            "type": "string"
                                        },
                                        "receipt_url": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "receipt_thumb_url": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "ok",
                                        "payment_status",
                                        "payment_reference",
                                        "receipt_id",
                                        "review_status",
                                        "receipt_url",
                                        "receipt_thumb_url"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "409": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "enum": [
                                                "Payment submit must be blocked until merchant acceptance."
                                            ]
                                        },
                                        "store_status": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "message",
                                        "store_status"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "enum": [
                                                "Not your order"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "message"
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/delivery-orders/book-pickup": {
            "post": {
                "operationId": "pickupOrder.bookPickup",
                "description": "- No driver search\n- Customer can pay via wallet or cash (COD)\n- Platform fee is a % commission charged to the merchant",
                "summary": "Book a \"pickup\" store order",
                "tags": [
                    "PickupOrder"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "store_id": {
                                        "type": "integer",
                                        "minimum": 1
                                    },
                                    "notes": {
                                        "type": [
                                            "string",
                                            "null"
                                        ],
                                        "maxLength": 2000
                                    },
                                    "payment_method": {
                                        "type": "string",
                                        "enum": [
                                            "wallet",
                                            "cash"
                                        ]
                                    },
                                    "customer_latitude": {
                                        "type": [
                                            "number",
                                            "null"
                                        ],
                                        "description": "optional client location (used for audit / in-range UX)",
                                        "minimum": -90,
                                        "maximum": 90
                                    },
                                    "customer_longitude": {
                                        "type": [
                                            "number",
                                            "null"
                                        ],
                                        "minimum": -180,
                                        "maximum": 180
                                    },
                                    "idempotency_key": {
                                        "type": "string",
                                        "maxLength": 120
                                    },
                                    "items": {
                                        "type": "array",
                                        "items": {
                                            "type": "object",
                                            "properties": {
                                                "product_id": {
                                                    "type": "integer",
                                                    "minimum": 1
                                                },
                                                "qty": {
                                                    "type": "integer",
                                                    "minimum": 1,
                                                    "maximum": 99
                                                }
                                            },
                                            "required": [
                                                "product_id",
                                                "qty"
                                            ]
                                        },
                                        "minItems": 1,
                                        "maxItems": 60
                                    }
                                },
                                "required": [
                                    "store_id",
                                    "payment_method",
                                    "idempotency_key",
                                    "items"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "id": {
                                            "type": "integer"
                                        },
                                        "reference_no": {
                                            "type": "string"
                                        },
                                        "store_id": {
                                            "type": [
                                                "integer",
                                                "null"
                                            ]
                                        },
                                        "driver_id": {
                                            "type": [
                                                "integer",
                                                "null"
                                            ]
                                        },
                                        "flow_type": {
                                            "type": "string"
                                        },
                                        "fulfillment_mode": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "status": {
                                            "type": "string"
                                        },
                                        "store_status": {
                                            "type": "string"
                                        },
                                        "prep_status": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "pickup_address": {
                                            "type": "string"
                                        },
                                        "dropoff_address": {
                                            "type": "string"
                                        },
                                        "total_price": {
                                            "type": "number"
                                        },
                                        "items_total": {
                                            "type": "number"
                                        },
                                        "total_transaction_fare": {
                                            "type": "number"
                                        },
                                        "payment_method": {
                                            "type": "string"
                                        },
                                        "payment_status": {
                                            "type": "string"
                                        },
                                        "payment_reference": {
                                            "type": "string"
                                        },
                                        "dispatch_status": {
                                            "type": "string"
                                        },
                                        "dispatch_at": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "assigned_at": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "items": {
                                            "anyOf": [
                                                {
                                                    "type": "array",
                                                    "items": {
                                                        "$ref": "#/components/schemas/DeliveryOrderItem"
                                                    }
                                                },
                                                {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    },
                                                    "minItems": 0,
                                                    "maxItems": 0,
                                                    "additionalItems": false
                                                }
                                            ]
                                        },
                                        "store": {
                                            "type": "object",
                                            "properties": {
                                                "id": {
                                                    "type": "integer"
                                                },
                                                "name": {
                                                    "type": "string"
                                                }
                                            },
                                            "required": [
                                                "id",
                                                "name"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "id",
                                        "reference_no",
                                        "store_id",
                                        "driver_id",
                                        "flow_type",
                                        "fulfillment_mode",
                                        "status",
                                        "store_status",
                                        "prep_status",
                                        "pickup_address",
                                        "dropoff_address",
                                        "total_price",
                                        "items_total",
                                        "total_transaction_fare",
                                        "payment_method",
                                        "payment_status",
                                        "payment_reference",
                                        "dispatch_status",
                                        "dispatch_at",
                                        "assigned_at",
                                        "items",
                                        "store"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/places/nearest": {
            "get": {
                "operationId": "place.nearest",
                "tags": [
                    "Place"
                ],
                "parameters": [
                    {
                        "name": "lat",
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "lng",
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "max_km",
                        "in": "query",
                        "description": "Optional tuning",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "id": {
                                            "type": "string"
                                        },
                                        "name": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "address": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "latitude": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "longitude": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "distance_km": {
                                            "type": [
                                                "number",
                                                "null"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "id",
                                        "name",
                                        "address",
                                        "latitude",
                                        "longitude",
                                        "distance_km"
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "enum": [
                                                "No nearby place found."
                                            ]
                                        }
                                    },
                                    "required": [
                                        "message"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "An error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "description": "Error overview.",
                                            "example": "lat/lng required"
                                        }
                                    },
                                    "required": [
                                        "message"
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/places": {
            "get": {
                "operationId": "places.index",
                "tags": [
                    "Place"
                ],
                "parameters": [
                    {
                        "name": "search",
                        "in": "query",
                        "description": "?search=keyword from query string",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            },
            "post": {
                "operationId": "places.store",
                "tags": [
                    "Place"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/PlaceRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    }
                }
            }
        },
        "/places/{id}": {
            "get": {
                "operationId": "places.show",
                "tags": [
                    "Place"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            },
            "put": {
                "operationId": "places.update",
                "tags": [
                    "Place"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/PlaceRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    }
                }
            },
            "delete": {
                "operationId": "places.destroy",
                "tags": [
                    "Place"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/products": {
            "get": {
                "operationId": "products.index",
                "tags": [
                    "Product"
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            },
            "post": {
                "operationId": "products.store",
                "tags": [
                    "Product"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "$ref": "#/components/schemas/ProductRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/products/{id}": {
            "get": {
                "operationId": "products.show",
                "tags": [
                    "Product"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            },
            "put": {
                "operationId": "products.update",
                "tags": [
                    "Product"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "$ref": "#/components/schemas/ProductRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            },
            "delete": {
                "operationId": "products.destroy",
                "tags": [
                    "Product"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "enum": [
                                                "Product deleted successfully"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "message"
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/admin/promos/run/{promoRun}": {
            "get": {
                "operationId": "promo.show",
                "tags": [
                    "Promo"
                ],
                "parameters": [
                    {
                        "name": "promoRun",
                        "in": "path",
                        "required": true,
                        "description": "The promo run ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "`PromoRunResource`",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/components/schemas/PromoRunResource"
                                        }
                                    },
                                    "required": [
                                        "data"
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/admin/promos/run/preview": {
            "post": {
                "operationId": "promo.preview",
                "tags": [
                    "Promo"
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/PromoApplyRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "anyOf": [
                                        {
                                            "type": "object",
                                            "properties": {
                                                "dry_run": {
                                                    "type": "boolean"
                                                },
                                                "summary": {
                                                    "type": "object",
                                                    "properties": {
                                                        "promo": {},
                                                        "affected_count": {
                                                            "type": "string"
                                                        },
                                                        "sample_user_ids": {
                                                            "type": "string"
                                                        },
                                                        "impact_metrics": {
                                                            "type": "object",
                                                            "properties": {
                                                                "target": {
                                                                    "anyOf": [
                                                                        {
                                                                            "type": "string"
                                                                        },
                                                                        {
                                                                            "type": "string",
                                                                            "enum": [
                                                                                "all"
                                                                            ]
                                                                        }
                                                                    ]
                                                                },
                                                                "points_per_user": {
                                                                    "type": "integer"
                                                                },
                                                                "affected_count": {
                                                                    "type": "string"
                                                                },
                                                                "projected_spend_points": {
                                                                    "type": "string"
                                                                },
                                                                "sample_user_ids": {
                                                                    "type": "string"
                                                                },
                                                                "runtime_ms": {
                                                                    "type": "integer",
                                                                    "enum": [
                                                                        0
                                                                    ]
                                                                }
                                                            },
                                                            "required": [
                                                                "target",
                                                                "points_per_user",
                                                                "affected_count",
                                                                "projected_spend_points",
                                                                "sample_user_ids",
                                                                "runtime_ms"
                                                            ]
                                                        },
                                                        "guardrail_flags": {
                                                            "type": "array",
                                                            "items": {}
                                                        },
                                                        "anomaly_notes": {
                                                            "type": "array",
                                                            "prefixItems": [
                                                                {
                                                                    "type": "object",
                                                                    "properties": {
                                                                        "code": {
                                                                            "type": "string",
                                                                            "enum": [
                                                                                "no_targets"
                                                                            ]
                                                                        },
                                                                        "message": {
                                                                            "type": "string",
                                                                            "enum": [
                                                                                "Promo did not match any users."
                                                                            ]
                                                                        }
                                                                    },
                                                                    "required": [
                                                                        "code",
                                                                        "message"
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "object",
                                                                    "properties": {
                                                                        "code": {
                                                                            "type": "string",
                                                                            "enum": [
                                                                                "missing_sample"
                                                                            ]
                                                                        },
                                                                        "message": {
                                                                            "type": "string",
                                                                            "enum": [
                                                                                "No sample users captured despite affected count."
                                                                            ]
                                                                        }
                                                                    },
                                                                    "required": [
                                                                        "code",
                                                                        "message"
                                                                    ]
                                                                }
                                                            ],
                                                            "minItems": 2,
                                                            "maxItems": 2,
                                                            "additionalItems": false
                                                        }
                                                    },
                                                    "required": [
                                                        "promo",
                                                        "affected_count",
                                                        "sample_user_ids",
                                                        "impact_metrics",
                                                        "guardrail_flags",
                                                        "anomaly_notes"
                                                    ]
                                                },
                                                "promo_run": {
                                                    "type": "string"
                                                },
                                                "idempotent": {
                                                    "type": "boolean"
                                                }
                                            },
                                            "required": [
                                                "dry_run",
                                                "summary",
                                                "promo_run",
                                                "idempotent"
                                            ]
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "dry_run": {
                                                    "type": "boolean"
                                                },
                                                "summary": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "promo_run": {
                                                    "type": "string"
                                                },
                                                "idempotent": {
                                                    "type": "boolean"
                                                }
                                            },
                                            "required": [
                                                "dry_run",
                                                "summary",
                                                "promo_run",
                                                "idempotent"
                                            ]
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "dry_run": {
                                                    "type": "boolean"
                                                },
                                                "summary": {
                                                    "type": "object",
                                                    "properties": {
                                                        "promo": {},
                                                        "affected_count": {
                                                            "type": "string"
                                                        },
                                                        "sample_user_ids": {
                                                            "type": "string"
                                                        },
                                                        "impact_metrics": {
                                                            "type": "object",
                                                            "properties": {
                                                                "target": {
                                                                    "anyOf": [
                                                                        {
                                                                            "type": "string"
                                                                        },
                                                                        {
                                                                            "type": "string",
                                                                            "enum": [
                                                                                "all"
                                                                            ]
                                                                        }
                                                                    ]
                                                                },
                                                                "points_per_user": {
                                                                    "type": "integer"
                                                                },
                                                                "affected_count": {
                                                                    "type": "string"
                                                                },
                                                                "projected_spend_points": {
                                                                    "type": "string"
                                                                },
                                                                "sample_user_ids": {
                                                                    "type": "string"
                                                                },
                                                                "runtime_ms": {
                                                                    "type": "integer",
                                                                    "enum": [
                                                                        0
                                                                    ]
                                                                }
                                                            },
                                                            "required": [
                                                                "target",
                                                                "points_per_user",
                                                                "affected_count",
                                                                "projected_spend_points",
                                                                "sample_user_ids",
                                                                "runtime_ms"
                                                            ]
                                                        },
                                                        "guardrail_flags": {
                                                            "type": "array",
                                                            "items": {}
                                                        },
                                                        "anomaly_notes": {
                                                            "type": "array",
                                                            "prefixItems": [
                                                                {
                                                                    "type": "object",
                                                                    "properties": {
                                                                        "code": {
                                                                            "type": "string",
                                                                            "enum": [
                                                                                "no_targets"
                                                                            ]
                                                                        },
                                                                        "message": {
                                                                            "type": "string",
                                                                            "enum": [
                                                                                "Promo did not match any users."
                                                                            ]
                                                                        }
                                                                    },
                                                                    "required": [
                                                                        "code",
                                                                        "message"
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "object",
                                                                    "properties": {
                                                                        "code": {
                                                                            "type": "string",
                                                                            "enum": [
                                                                                "missing_sample"
                                                                            ]
                                                                        },
                                                                        "message": {
                                                                            "type": "string",
                                                                            "enum": [
                                                                                "No sample users captured despite affected count."
                                                                            ]
                                                                        }
                                                                    },
                                                                    "required": [
                                                                        "code",
                                                                        "message"
                                                                    ]
                                                                }
                                                            ],
                                                            "minItems": 2,
                                                            "maxItems": 2,
                                                            "additionalItems": false
                                                        }
                                                    },
                                                    "required": [
                                                        "promo",
                                                        "affected_count",
                                                        "sample_user_ids",
                                                        "impact_metrics",
                                                        "guardrail_flags",
                                                        "anomaly_notes"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "dry_run",
                                                "summary"
                                            ]
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/admin/promos/run": {
            "post": {
                "operationId": "promo.apply",
                "tags": [
                    "Promo"
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/PromoApplyRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "anyOf": [
                                        {
                                            "type": "object",
                                            "properties": {
                                                "dry_run": {
                                                    "type": "boolean"
                                                },
                                                "summary": {
                                                    "type": "object",
                                                    "properties": {
                                                        "promo": {},
                                                        "affected_count": {
                                                            "type": "string"
                                                        },
                                                        "sample_user_ids": {
                                                            "type": "string"
                                                        },
                                                        "impact_metrics": {
                                                            "type": "object",
                                                            "properties": {
                                                                "target": {
                                                                    "anyOf": [
                                                                        {
                                                                            "type": "string"
                                                                        },
                                                                        {
                                                                            "type": "string",
                                                                            "enum": [
                                                                                "all"
                                                                            ]
                                                                        }
                                                                    ]
                                                                },
                                                                "points_per_user": {
                                                                    "type": "integer"
                                                                },
                                                                "affected_count": {
                                                                    "type": "string"
                                                                },
                                                                "projected_spend_points": {
                                                                    "type": "string"
                                                                },
                                                                "sample_user_ids": {
                                                                    "type": "string"
                                                                },
                                                                "runtime_ms": {
                                                                    "type": "integer",
                                                                    "enum": [
                                                                        0
                                                                    ]
                                                                }
                                                            },
                                                            "required": [
                                                                "target",
                                                                "points_per_user",
                                                                "affected_count",
                                                                "projected_spend_points",
                                                                "sample_user_ids",
                                                                "runtime_ms"
                                                            ]
                                                        },
                                                        "guardrail_flags": {
                                                            "type": "array",
                                                            "items": {}
                                                        },
                                                        "anomaly_notes": {
                                                            "type": "array",
                                                            "prefixItems": [
                                                                {
                                                                    "type": "object",
                                                                    "properties": {
                                                                        "code": {
                                                                            "type": "string",
                                                                            "enum": [
                                                                                "no_targets"
                                                                            ]
                                                                        },
                                                                        "message": {
                                                                            "type": "string",
                                                                            "enum": [
                                                                                "Promo did not match any users."
                                                                            ]
                                                                        }
                                                                    },
                                                                    "required": [
                                                                        "code",
                                                                        "message"
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "object",
                                                                    "properties": {
                                                                        "code": {
                                                                            "type": "string",
                                                                            "enum": [
                                                                                "missing_sample"
                                                                            ]
                                                                        },
                                                                        "message": {
                                                                            "type": "string",
                                                                            "enum": [
                                                                                "No sample users captured despite affected count."
                                                                            ]
                                                                        }
                                                                    },
                                                                    "required": [
                                                                        "code",
                                                                        "message"
                                                                    ]
                                                                }
                                                            ],
                                                            "minItems": 2,
                                                            "maxItems": 2,
                                                            "additionalItems": false
                                                        }
                                                    },
                                                    "required": [
                                                        "promo",
                                                        "affected_count",
                                                        "sample_user_ids",
                                                        "impact_metrics",
                                                        "guardrail_flags",
                                                        "anomaly_notes"
                                                    ]
                                                },
                                                "promo_run": {
                                                    "type": "string"
                                                },
                                                "idempotent": {
                                                    "type": "boolean"
                                                }
                                            },
                                            "required": [
                                                "dry_run",
                                                "summary",
                                                "promo_run",
                                                "idempotent"
                                            ]
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "dry_run": {
                                                    "type": "boolean"
                                                },
                                                "summary": {
                                                    "type": [
                                                        "string",
                                                        "null"
                                                    ]
                                                },
                                                "promo_run": {
                                                    "type": "string"
                                                },
                                                "idempotent": {
                                                    "type": "boolean"
                                                }
                                            },
                                            "required": [
                                                "dry_run",
                                                "summary",
                                                "promo_run",
                                                "idempotent"
                                            ]
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "dry_run": {
                                                    "type": "boolean"
                                                },
                                                "summary": {
                                                    "type": "object",
                                                    "properties": {
                                                        "promo": {},
                                                        "affected_count": {
                                                            "type": "string"
                                                        },
                                                        "sample_user_ids": {
                                                            "type": "string"
                                                        },
                                                        "impact_metrics": {
                                                            "type": "object",
                                                            "properties": {
                                                                "target": {
                                                                    "anyOf": [
                                                                        {
                                                                            "type": "string"
                                                                        },
                                                                        {
                                                                            "type": "string",
                                                                            "enum": [
                                                                                "all"
                                                                            ]
                                                                        }
                                                                    ]
                                                                },
                                                                "points_per_user": {
                                                                    "type": "integer"
                                                                },
                                                                "affected_count": {
                                                                    "type": "string"
                                                                },
                                                                "projected_spend_points": {
                                                                    "type": "string"
                                                                },
                                                                "sample_user_ids": {
                                                                    "type": "string"
                                                                },
                                                                "runtime_ms": {
                                                                    "type": "integer",
                                                                    "enum": [
                                                                        0
                                                                    ]
                                                                }
                                                            },
                                                            "required": [
                                                                "target",
                                                                "points_per_user",
                                                                "affected_count",
                                                                "projected_spend_points",
                                                                "sample_user_ids",
                                                                "runtime_ms"
                                                            ]
                                                        },
                                                        "guardrail_flags": {
                                                            "type": "array",
                                                            "items": {}
                                                        },
                                                        "anomaly_notes": {
                                                            "type": "array",
                                                            "prefixItems": [
                                                                {
                                                                    "type": "object",
                                                                    "properties": {
                                                                        "code": {
                                                                            "type": "string",
                                                                            "enum": [
                                                                                "no_targets"
                                                                            ]
                                                                        },
                                                                        "message": {
                                                                            "type": "string",
                                                                            "enum": [
                                                                                "Promo did not match any users."
                                                                            ]
                                                                        }
                                                                    },
                                                                    "required": [
                                                                        "code",
                                                                        "message"
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "object",
                                                                    "properties": {
                                                                        "code": {
                                                                            "type": "string",
                                                                            "enum": [
                                                                                "missing_sample"
                                                                            ]
                                                                        },
                                                                        "message": {
                                                                            "type": "string",
                                                                            "enum": [
                                                                                "No sample users captured despite affected count."
                                                                            ]
                                                                        }
                                                                    },
                                                                    "required": [
                                                                        "code",
                                                                        "message"
                                                                    ]
                                                                }
                                                            ],
                                                            "minItems": 2,
                                                            "maxItems": 2,
                                                            "additionalItems": false
                                                        }
                                                    },
                                                    "required": [
                                                        "promo",
                                                        "affected_count",
                                                        "sample_user_ids",
                                                        "impact_metrics",
                                                        "guardrail_flags",
                                                        "anomaly_notes"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "dry_run",
                                                "summary"
                                            ]
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/admin/promos/run/rollback": {
            "post": {
                "operationId": "promo.rollback",
                "tags": [
                    "Promo"
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/PromoApplyRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        }
                                    },
                                    "required": [
                                        "ok"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/public-storefronts/{slug}": {
            "get": {
                "operationId": "publicStorefront.show",
                "tags": [
                    "PublicStorefront"
                ],
                "parameters": [
                    {
                        "name": "slug",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "slug",
                        "in": "query",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "pattern": "^[A-Za-z0-9-]+$"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "`PublicStorefrontResource`",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/components/schemas/PublicStorefrontResource"
                                        },
                                        "metadata": {
                                            "type": "object",
                                            "properties": {
                                                "cached_at": {
                                                    "type": "string"
                                                },
                                                "expires_at": {
                                                    "type": "string"
                                                },
                                                "cache_seconds": {
                                                    "type": "integer"
                                                }
                                            },
                                            "required": [
                                                "cached_at",
                                                "expires_at",
                                                "cache_seconds"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "data",
                                        "metadata"
                                    ]
                                }
                            }
                        }
                    },
                    "304": {
                        "description": ""
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/driver/register-expo-push-token": {
            "post": {
                "operationId": "pushToken.registerExpo_0",
                "tags": [
                    "PushToken"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "token": {
                                        "type": "string",
                                        "maxLength": 255
                                    },
                                    "platform": {
                                        "type": [
                                            "string",
                                            "null"
                                        ],
                                        "enum": [
                                            "ios",
                                            "android"
                                        ]
                                    }
                                },
                                "required": [
                                    "token"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        },
                                        "expo_push_token": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "ok",
                                        "expo_push_token"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    }
                }
            }
        },
        "/driver/clear-expo-push-token": {
            "post": {
                "operationId": "pushToken.clearExpo_0",
                "tags": [
                    "PushToken"
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        }
                                    },
                                    "required": [
                                        "ok"
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    }
                }
            }
        },
        "/customer/register-expo-push-token": {
            "post": {
                "operationId": "pushToken.registerExpo_0",
                "tags": [
                    "PushToken"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "token": {
                                        "type": "string",
                                        "maxLength": 255
                                    },
                                    "platform": {
                                        "type": [
                                            "string",
                                            "null"
                                        ],
                                        "enum": [
                                            "ios",
                                            "android"
                                        ]
                                    }
                                },
                                "required": [
                                    "token"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        },
                                        "expo_push_token": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "ok",
                                        "expo_push_token"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    }
                }
            }
        },
        "/customer/clear-expo-push-token": {
            "post": {
                "operationId": "pushToken.clearExpo_0",
                "tags": [
                    "PushToken"
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        }
                                    },
                                    "required": [
                                        "ok"
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    }
                }
            }
        },
        "/merchant/register-expo-push-token": {
            "post": {
                "operationId": "pushToken.registerExpo_0",
                "tags": [
                    "PushToken"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "token": {
                                        "type": "string",
                                        "maxLength": 255
                                    },
                                    "platform": {
                                        "type": [
                                            "string",
                                            "null"
                                        ],
                                        "enum": [
                                            "ios",
                                            "android"
                                        ]
                                    }
                                },
                                "required": [
                                    "token"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        },
                                        "expo_push_token": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "ok",
                                        "expo_push_token"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    }
                }
            }
        },
        "/merchant/clear-expo-push-token": {
            "post": {
                "operationId": "pushToken.clearExpo_0",
                "tags": [
                    "PushToken"
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        }
                                    },
                                    "required": [
                                        "ok"
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    }
                }
            }
        },
        "/customer/orders/{order}/receipt": {
            "post": {
                "operationId": "receipt.upload",
                "tags": [
                    "Receipt"
                ],
                "parameters": [
                    {
                        "name": "order",
                        "in": "path",
                        "required": true,
                        "description": "The order ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "receipt": {
                                        "type": "string",
                                        "format": "binary",
                                        "contentMediaType": "application/octet-stream",
                                        "maxLength": 5120
                                    }
                                },
                                "required": [
                                    "receipt"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        },
                                        "receipt_id": {
                                            "type": "integer"
                                        },
                                        "ocr_status": {
                                            "type": "string"
                                        },
                                        "review_status": {
                                            "type": "string"
                                        },
                                        "payment_receipt_path": {
                                            "type": "string"
                                        },
                                        "payment_receipt_url": {
                                            "type": "string"
                                        },
                                        "payment_receipt_thumb_url": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "ok",
                                        "receipt_id",
                                        "ocr_status",
                                        "review_status",
                                        "payment_receipt_path",
                                        "payment_receipt_url",
                                        "payment_receipt_thumb_url"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "enum": [
                                                "Not your order"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "message"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/referrals/stats": {
            "get": {
                "operationId": "referral.stats",
                "tags": [
                    "Referral"
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "total_referred": {
                                            "type": "integer"
                                        },
                                        "total_points": {
                                            "type": "integer"
                                        },
                                        "monthly_points": {
                                            "type": "integer"
                                        }
                                    },
                                    "required": [
                                        "total_referred",
                                        "total_points",
                                        "monthly_points"
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/wallet/cashout/meta": {
            "get": {
                "operationId": "selfWallet.cashOutMeta",
                "tags": [
                    "SelfWallet"
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "min_amount": {
                                            "type": "integer",
                                            "enum": [
                                                100
                                            ]
                                        },
                                        "max_amount": {
                                            "type": "integer",
                                            "enum": [
                                                50000
                                            ]
                                        },
                                        "methods": {
                                            "type": "array",
                                            "prefixItems": [
                                                {
                                                    "type": "object",
                                                    "properties": {
                                                        "code": {
                                                            "type": "string",
                                                            "enum": [
                                                                "gcash"
                                                            ]
                                                        },
                                                        "label": {
                                                            "type": "string",
                                                            "enum": [
                                                                "GCash"
                                                            ]
                                                        },
                                                        "fields": {
                                                            "type": "array",
                                                            "prefixItems": [
                                                                {
                                                                    "type": "object",
                                                                    "properties": {
                                                                        "key": {
                                                                            "type": "string",
                                                                            "enum": [
                                                                                "gcash_number"
                                                                            ]
                                                                        },
                                                                        "label": {
                                                                            "type": "string",
                                                                            "enum": [
                                                                                "GCash number"
                                                                            ]
                                                                        },
                                                                        "type": {
                                                                            "type": "string",
                                                                            "enum": [
                                                                                "string"
                                                                            ]
                                                                        },
                                                                        "required": {
                                                                            "type": "boolean"
                                                                        }
                                                                    },
                                                                    "required": [
                                                                        "key",
                                                                        "label",
                                                                        "type",
                                                                        "required"
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "object",
                                                                    "properties": {
                                                                        "key": {
                                                                            "type": "string",
                                                                            "enum": [
                                                                                "account_name"
                                                                            ]
                                                                        },
                                                                        "label": {
                                                                            "type": "string",
                                                                            "enum": [
                                                                                "Account name"
                                                                            ]
                                                                        },
                                                                        "type": {
                                                                            "type": "string",
                                                                            "enum": [
                                                                                "string"
                                                                            ]
                                                                        },
                                                                        "required": {
                                                                            "type": "boolean"
                                                                        }
                                                                    },
                                                                    "required": [
                                                                        "key",
                                                                        "label",
                                                                        "type",
                                                                        "required"
                                                                    ]
                                                                }
                                                            ],
                                                            "minItems": 2,
                                                            "maxItems": 2,
                                                            "additionalItems": false
                                                        }
                                                    },
                                                    "required": [
                                                        "code",
                                                        "label",
                                                        "fields"
                                                    ]
                                                }
                                            ],
                                            "minItems": 1,
                                            "maxItems": 1,
                                            "additionalItems": false
                                        },
                                        "notes": {
                                            "type": "array",
                                            "prefixItems": [
                                                {
                                                    "type": "string",
                                                    "enum": [
                                                        "Cash-out requests are reviewed by admin."
                                                    ]
                                                },
                                                {
                                                    "type": "string"
                                                }
                                            ],
                                            "minItems": 2,
                                            "maxItems": 2,
                                            "additionalItems": false
                                        }
                                    },
                                    "required": [
                                        "min_amount",
                                        "max_amount",
                                        "methods",
                                        "notes"
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/wallet": {
            "get": {
                "operationId": "selfWallet.overview",
                "tags": [
                    "SelfWallet"
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "wallet_kind": {
                                            "type": "string",
                                            "enum": [
                                                "driver",
                                                "merchant",
                                                "customer"
                                            ]
                                        },
                                        "balance_points": {
                                            "type": "integer"
                                        }
                                    },
                                    "required": [
                                        "wallet_kind",
                                        "balance_points"
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/wallet/cashin": {
            "post": {
                "operationId": "selfWallet.createCashIn",
                "tags": [
                    "SelfWallet"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "amount": {
                                        "type": "integer",
                                        "minimum": 1,
                                        "maximum": 1000000
                                    },
                                    "reference": {
                                        "type": "string",
                                        "minLength": 3,
                                        "maxLength": 80
                                    }
                                },
                                "required": [
                                    "amount",
                                    "reference"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        },
                                        "request": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "ok",
                                        "request"
                                    ]
                                }
                            }
                        }
                    },
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        },
                                        "request": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "ok",
                                        "request"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/wallet/cashin/{id}/receipt": {
            "post": {
                "operationId": "selfWallet.submitCashInReceipt",
                "tags": [
                    "SelfWallet"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "receipt": {
                                        "type": "string",
                                        "format": "binary",
                                        "contentMediaType": "application/octet-stream",
                                        "maxLength": 5120
                                    }
                                },
                                "required": [
                                    "receipt"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        },
                                        "request": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "ok",
                                        "request"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/wallet/cashout": {
            "post": {
                "operationId": "selfWallet.requestCashOut",
                "tags": [
                    "SelfWallet"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "amount": {
                                        "type": "integer",
                                        "minimum": 1,
                                        "maximum": 1000000
                                    },
                                    "payout_method": {
                                        "type": "string",
                                        "maxLength": 50
                                    },
                                    "payout_account": {
                                        "type": "string",
                                        "description": "maps to destination_type",
                                        "maxLength": 120
                                    },
                                    "payout_name": {
                                        "type": [
                                            "string",
                                            "null"
                                        ],
                                        "maxLength": 120
                                    },
                                    "idempotency_key": {
                                        "type": "string",
                                        "maxLength": 80
                                    }
                                },
                                "required": [
                                    "amount",
                                    "payout_method",
                                    "payout_account",
                                    "idempotency_key"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        },
                                        "request": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "ok",
                                        "request"
                                    ]
                                }
                            }
                        }
                    },
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        },
                                        "request": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "ok",
                                        "request"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/customer/wallet/cashin": {
            "get": {
                "operationId": "selfWallet.myCashInRequests",
                "tags": [
                    "SelfWallet"
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/components/schemas/LengthAwarePaginator"
                                        }
                                    },
                                    "required": [
                                        "data"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/customer/wallet/cashout": {
            "get": {
                "operationId": "selfWallet.myCashOutRequests",
                "tags": [
                    "SelfWallet"
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/components/schemas/LengthAwarePaginator"
                                        }
                                    },
                                    "required": [
                                        "data"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/stores": {
            "get": {
                "operationId": "stores.index",
                "tags": [
                    "Store"
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/components/schemas/Store"
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            },
            "post": {
                "operationId": "stores.store",
                "tags": [
                    "Store"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/StoreRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Store"
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/stores/{id}": {
            "get": {
                "operationId": "stores.show",
                "tags": [
                    "Store"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            },
            "put": {
                "operationId": "stores.update",
                "tags": [
                    "Store"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/StoreRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            },
            "delete": {
                "operationId": "stores.destroy",
                "tags": [
                    "Store"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "enum": [
                                                "Store deleted successfully"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "message"
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/support/ai/assist": {
            "post": {
                "operationId": "supportAi.assist",
                "tags": [
                    "SupportAi"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/SupportAiAssistRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "503": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "message"
                                    ]
                                }
                            }
                        }
                    },
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "answer": {
                                            "type": "string"
                                        },
                                        "needs_human_handoff": {
                                            "type": "boolean"
                                        },
                                        "confidence": {
                                            "type": "string"
                                        },
                                        "suggested_actions": {
                                            "type": "string"
                                        },
                                        "ticket_recommended": {
                                            "type": "boolean"
                                        },
                                        "kb_sources": {
                                            "type": "array",
                                            "items": {}
                                        },
                                        "order_snapshot": {
                                            "type": [
                                                "object",
                                                "null"
                                            ],
                                            "properties": {
                                                "id": {
                                                    "type": "string"
                                                },
                                                "order_code": {
                                                    "type": "string"
                                                },
                                                "type": {
                                                    "type": "string"
                                                },
                                                "status": {
                                                    "type": "string"
                                                },
                                                "payment_status": {
                                                    "type": "string"
                                                },
                                                "store_status": {
                                                    "type": "string"
                                                },
                                                "dispatch_status": {
                                                    "type": "string"
                                                },
                                                "scheduled_at": {
                                                    "type": "string"
                                                },
                                                "created_at": {
                                                    "type": "string"
                                                },
                                                "accepted_at": {
                                                    "type": "string"
                                                },
                                                "picked_up_at": {
                                                    "type": "string"
                                                },
                                                "delivered_at": {
                                                    "type": "string"
                                                },
                                                "cancelled_at": {
                                                    "type": "string"
                                                },
                                                "cancel_reason": {
                                                    "type": "string"
                                                },
                                                "customer": {
                                                    "type": [
                                                        "object",
                                                        "null"
                                                    ],
                                                    "properties": {
                                                        "id": {
                                                            "type": "string"
                                                        },
                                                        "name": {
                                                            "type": "string"
                                                        },
                                                        "phone": {
                                                            "type": "string"
                                                        },
                                                        "email": {
                                                            "type": "string"
                                                        }
                                                    },
                                                    "required": [
                                                        "id",
                                                        "name",
                                                        "phone",
                                                        "email"
                                                    ]
                                                },
                                                "driver": {
                                                    "type": [
                                                        "object",
                                                        "null"
                                                    ],
                                                    "properties": {
                                                        "id": {
                                                            "type": "string"
                                                        },
                                                        "name": {
                                                            "type": "string"
                                                        },
                                                        "phone": {
                                                            "type": "string"
                                                        },
                                                        "email": {
                                                            "type": "string"
                                                        }
                                                    },
                                                    "required": [
                                                        "id",
                                                        "name",
                                                        "phone",
                                                        "email"
                                                    ]
                                                },
                                                "store": {
                                                    "type": [
                                                        "object",
                                                        "null"
                                                    ],
                                                    "properties": {
                                                        "id": {
                                                            "type": "string"
                                                        },
                                                        "name": {
                                                            "type": "string"
                                                        },
                                                        "address": {
                                                            "type": "string"
                                                        }
                                                    },
                                                    "required": [
                                                        "id",
                                                        "name",
                                                        "address"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "id",
                                                "order_code",
                                                "type",
                                                "status",
                                                "payment_status",
                                                "store_status",
                                                "dispatch_status",
                                                "scheduled_at",
                                                "created_at",
                                                "accepted_at",
                                                "picked_up_at",
                                                "delivered_at",
                                                "cancelled_at",
                                                "cancel_reason",
                                                "customer",
                                                "driver",
                                                "store"
                                            ]
                                        },
                                        "ticket_id": {
                                            "type": "integer"
                                        }
                                    },
                                    "required": [
                                        "answer",
                                        "needs_human_handoff",
                                        "confidence",
                                        "suggested_actions",
                                        "ticket_recommended",
                                        "kb_sources",
                                        "order_snapshot",
                                        "ticket_id"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/support/audit-logs": {
            "get": {
                "operationId": "supportAuditLog.index",
                "tags": [
                    "SupportAuditLog"
                ],
                "parameters": [
                    {
                        "name": "q",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "maxLength": 120
                        }
                    },
                    {
                        "name": "actor_id",
                        "in": "query",
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "action",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "maxLength": 80
                        }
                    },
                    {
                        "name": "subject_type",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "maxLength": 80
                        }
                    },
                    {
                        "name": "subject_id",
                        "in": "query",
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "order_id",
                        "in": "query",
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "merchant_id",
                        "in": "query",
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "from",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "format": "date-time"
                        }
                    },
                    {
                        "name": "to",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "format": "date-time"
                        }
                    },
                    {
                        "name": "per_page",
                        "in": "query",
                        "schema": {
                            "type": "integer",
                            "minimum": 1,
                            "maximum": 100
                        }
                    },
                    {
                        "name": "page",
                        "in": "query",
                        "schema": {
                            "type": "integer",
                            "minimum": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "type": "string"
                                            }
                                        },
                                        "meta": {
                                            "type": "object",
                                            "properties": {
                                                "page": {
                                                    "type": "integer"
                                                },
                                                "per_page": {
                                                    "type": "integer"
                                                },
                                                "total": {
                                                    "type": "integer"
                                                },
                                                "last_page": {
                                                    "type": "integer"
                                                }
                                            },
                                            "required": [
                                                "page",
                                                "per_page",
                                                "total",
                                                "last_page"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "data",
                                        "meta"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/support/disputes": {
            "get": {
                "operationId": "supportDispute.index",
                "tags": [
                    "SupportDispute"
                ],
                "parameters": [
                    {
                        "name": "status",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "maxLength": 32
                        }
                    },
                    {
                        "name": "order_id",
                        "in": "query",
                        "schema": {
                            "type": "integer",
                            "minimum": 1
                        }
                    },
                    {
                        "name": "customer_id",
                        "in": "query",
                        "schema": {
                            "type": "integer",
                            "minimum": 1
                        }
                    },
                    {
                        "name": "limit",
                        "in": "query",
                        "schema": {
                            "type": "integer",
                            "minimum": 1,
                            "maximum": 100
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "type": "object",
                                                "properties": {
                                                    "id": {
                                                        "type": "integer"
                                                    },
                                                    "delivery_order_id": {
                                                        "type": "integer"
                                                    },
                                                    "status": {
                                                        "type": "string"
                                                    },
                                                    "reason_code": {
                                                        "type": "string"
                                                    },
                                                    "opened_at": {
                                                        "type": "string"
                                                    },
                                                    "resolved_at": {
                                                        "type": "string"
                                                    },
                                                    "evidence_count": {
                                                        "type": "integer"
                                                    }
                                                },
                                                "required": [
                                                    "id",
                                                    "delivery_order_id",
                                                    "status",
                                                    "reason_code",
                                                    "opened_at",
                                                    "resolved_at",
                                                    "evidence_count"
                                                ]
                                            }
                                        },
                                        "meta": {
                                            "type": "object",
                                            "properties": {
                                                "current_page": {
                                                    "type": "integer"
                                                },
                                                "per_page": {
                                                    "type": "integer"
                                                },
                                                "total": {
                                                    "type": "integer"
                                                },
                                                "last_page": {
                                                    "type": "integer"
                                                }
                                            },
                                            "required": [
                                                "current_page",
                                                "per_page",
                                                "total",
                                                "last_page"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "data",
                                        "meta"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/support/disputes/{dispute}": {
            "get": {
                "operationId": "supportDispute.show",
                "tags": [
                    "SupportDispute"
                ],
                "parameters": [
                    {
                        "name": "dispute",
                        "in": "path",
                        "required": true,
                        "description": "The dispute ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "id": {
                                                    "type": "integer"
                                                },
                                                "order_id": {
                                                    "type": "integer"
                                                },
                                                "customer_id": {
                                                    "type": "integer"
                                                },
                                                "status": {
                                                    "type": "string"
                                                },
                                                "reason": {
                                                    "type": "string"
                                                },
                                                "reason_code": {
                                                    "type": "string"
                                                },
                                                "description": {
                                                    "type": "string"
                                                },
                                                "opened_at": {
                                                    "type": "string"
                                                },
                                                "resolved_at": {
                                                    "type": "string"
                                                },
                                                "resolved_by_user_id": {
                                                    "type": "integer"
                                                },
                                                "resolution_kind": {
                                                    "type": "string"
                                                },
                                                "resolution_meta": {
                                                    "type": "string"
                                                },
                                                "evidence": {
                                                    "type": "string"
                                                }
                                            },
                                            "required": [
                                                "id",
                                                "order_id",
                                                "customer_id",
                                                "status",
                                                "reason",
                                                "reason_code",
                                                "description",
                                                "opened_at",
                                                "resolved_at",
                                                "resolved_by_user_id",
                                                "resolution_kind",
                                                "resolution_meta",
                                                "evidence"
                                            ]
                                        },
                                        "dispute": {
                                            "type": "object",
                                            "properties": {
                                                "id": {
                                                    "type": "integer"
                                                },
                                                "order_id": {
                                                    "type": "integer"
                                                },
                                                "customer_id": {
                                                    "type": "integer"
                                                },
                                                "status": {
                                                    "type": "string"
                                                },
                                                "reason": {
                                                    "type": "string"
                                                },
                                                "reason_code": {
                                                    "type": "string"
                                                },
                                                "description": {
                                                    "type": "string"
                                                },
                                                "opened_at": {
                                                    "type": "string"
                                                },
                                                "resolved_at": {
                                                    "type": "string"
                                                },
                                                "resolved_by_user_id": {
                                                    "type": "integer"
                                                },
                                                "resolution_kind": {
                                                    "type": "string"
                                                },
                                                "resolution_meta": {
                                                    "type": "string"
                                                },
                                                "evidence": {
                                                    "type": "string"
                                                }
                                            },
                                            "required": [
                                                "id",
                                                "order_id",
                                                "customer_id",
                                                "status",
                                                "reason",
                                                "reason_code",
                                                "description",
                                                "opened_at",
                                                "resolved_at",
                                                "resolved_by_user_id",
                                                "resolution_kind",
                                                "resolution_meta",
                                                "evidence"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "data",
                                        "dispute"
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/support/disputes/{dispute}/resolve": {
            "post": {
                "operationId": "supportDispute.resolve",
                "tags": [
                    "SupportDispute"
                ],
                "parameters": [
                    {
                        "name": "dispute",
                        "in": "path",
                        "required": true,
                        "description": "The dispute ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/SupportResolveDisputeRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        },
                                        "dispute": {
                                            "type": "object",
                                            "properties": {
                                                "id": {
                                                    "type": "integer"
                                                },
                                                "status": {
                                                    "type": "string"
                                                },
                                                "resolution_kind": {
                                                    "type": "string"
                                                },
                                                "resolved_at": {
                                                    "type": "string"
                                                },
                                                "resolved_by_user_id": {
                                                    "type": "integer"
                                                }
                                            },
                                            "required": [
                                                "id",
                                                "status",
                                                "resolution_kind",
                                                "resolved_at",
                                                "resolved_by_user_id"
                                            ]
                                        },
                                        "effects": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "ok",
                                        "dispute",
                                        "effects"
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "409": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        },
                                        "code": {
                                            "type": "string",
                                            "enum": [
                                                "dispute_already_closed"
                                            ]
                                        },
                                        "message": {
                                            "type": "string",
                                            "enum": [
                                                "Dispute already closed."
                                            ]
                                        },
                                        "dispute": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "ok",
                                        "code",
                                        "message",
                                        "dispute"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/support/kb/articles": {
            "get": {
                "operationId": "supportKb.index",
                "tags": [
                    "SupportKb"
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/LengthAwarePaginator"
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            },
            "post": {
                "operationId": "supportKb.store",
                "tags": [
                    "SupportKb"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/SupportKbUpsertRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/SupportKbArticle"
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/support/kb/articles/{article}": {
            "get": {
                "operationId": "supportKb.show",
                "tags": [
                    "SupportKb"
                ],
                "parameters": [
                    {
                        "name": "article",
                        "in": "path",
                        "required": true,
                        "description": "The article ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/SupportKbArticle"
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            },
            "put": {
                "operationId": "supportKb.update",
                "tags": [
                    "SupportKb"
                ],
                "parameters": [
                    {
                        "name": "article",
                        "in": "path",
                        "required": true,
                        "description": "The article ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/SupportKbUpsertRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/SupportKbArticle"
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            },
            "delete": {
                "operationId": "supportKb.destroy",
                "tags": [
                    "SupportKb"
                ],
                "parameters": [
                    {
                        "name": "article",
                        "in": "path",
                        "required": true,
                        "description": "The article ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        }
                                    },
                                    "required": [
                                        "ok"
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/support/orders": {
            "get": {
                "operationId": "supportOrders.index",
                "tags": [
                    "SupportOrders"
                ],
                "parameters": [
                    {
                        "name": "page",
                        "in": "query",
                        "schema": {
                            "type": "integer",
                            "minimum": 1
                        }
                    },
                    {
                        "name": "per_page",
                        "in": "query",
                        "schema": {
                            "type": "integer",
                            "minimum": 1,
                            "maximum": 100
                        }
                    },
                    {
                        "name": "status",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "maxLength": 50
                        }
                    },
                    {
                        "name": "q",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "maxLength": 120
                        }
                    },
                    {
                        "name": "driver_id",
                        "in": "query",
                        "schema": {
                            "type": "integer",
                            "minimum": 1
                        }
                    },
                    {
                        "name": "customer_id",
                        "in": "query",
                        "schema": {
                            "type": "integer",
                            "minimum": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "type": "string"
                                            }
                                        },
                                        "meta": {
                                            "type": "object",
                                            "properties": {
                                                "page": {
                                                    "type": "integer"
                                                },
                                                "per_page": {
                                                    "type": "integer"
                                                },
                                                "total": {
                                                    "type": "integer"
                                                },
                                                "last_page": {
                                                    "type": "integer"
                                                }
                                            },
                                            "required": [
                                                "page",
                                                "per_page",
                                                "total",
                                                "last_page"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "data",
                                        "meta"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/support/orders/{id}/note": {
            "post": {
                "operationId": "supportOrders.note",
                "summary": "POST /support/orders/{id}/note",
                "tags": [
                    "SupportOrders"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "note": {
                                        "type": "string",
                                        "minLength": 2,
                                        "maxLength": 2000
                                    }
                                },
                                "required": [
                                    "note"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        }
                                    },
                                    "required": [
                                        "ok"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/support/orders/{order}/refund-request": {
            "post": {
                "operationId": "supportOrders.refundRequest",
                "tags": [
                    "SupportOrders"
                ],
                "parameters": [
                    {
                        "name": "order",
                        "in": "path",
                        "required": true,
                        "description": "The order ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/SupportRefundRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/support/overview": {
            "get": {
                "operationId": "supportOverview.overview",
                "tags": [
                    "SupportOverview"
                ],
                "responses": {
                    "200": {
                        "description": "Keep lightweight: this endpoint is used by control-tower dashboards.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        },
                                        "time": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "ok",
                                        "time"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/support/tickets": {
            "get": {
                "operationId": "supportTickets.index",
                "tags": [
                    "SupportTickets"
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/LengthAwarePaginator"
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            },
            "post": {
                "operationId": "supportTickets.store",
                "tags": [
                    "SupportTickets"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/SupportTicketCreateRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "anyOf": [
                                        {
                                            "$ref": "#/components/schemas/SupportTicket"
                                        },
                                        {
                                            "type": "null"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/support/tickets/{ticket}": {
            "get": {
                "operationId": "supportTickets.show",
                "tags": [
                    "SupportTickets"
                ],
                "parameters": [
                    {
                        "name": "ticket",
                        "in": "path",
                        "required": true,
                        "description": "The ticket ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/SupportTicket"
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/support/tickets/{ticket}/messages": {
            "post": {
                "operationId": "supportTickets.addMessage",
                "tags": [
                    "SupportTickets"
                ],
                "parameters": [
                    {
                        "name": "ticket",
                        "in": "path",
                        "required": true,
                        "description": "The ticket ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/SupportTicketMessageRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/SupportTicketMessage"
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/support/users/search": {
            "get": {
                "operationId": "supportUsers.search",
                "tags": [
                    "SupportUsers"
                ],
                "parameters": [
                    {
                        "name": "q",
                        "in": "query",
                        "schema": {
                            "type": [
                                "string",
                                "null"
                            ],
                            "maxLength": 120
                        }
                    },
                    {
                        "name": "role",
                        "in": "query",
                        "schema": {
                            "type": [
                                "string",
                                "null"
                            ],
                            "maxLength": 32
                        }
                    },
                    {
                        "name": "page",
                        "in": "query",
                        "schema": {
                            "type": [
                                "integer",
                                "null"
                            ],
                            "minimum": 1
                        }
                    },
                    {
                        "name": "per_page",
                        "in": "query",
                        "schema": {
                            "type": [
                                "integer",
                                "null"
                            ],
                            "minimum": 1,
                            "maximum": 100
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "type": "string"
                                            }
                                        },
                                        "meta": {
                                            "type": "object",
                                            "properties": {
                                                "current_page": {
                                                    "type": "integer"
                                                },
                                                "per_page": {
                                                    "type": "integer"
                                                },
                                                "total": {
                                                    "type": "integer"
                                                },
                                                "last_page": {
                                                    "type": "integer"
                                                }
                                            },
                                            "required": [
                                                "current_page",
                                                "per_page",
                                                "total",
                                                "last_page"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "data",
                                        "meta"
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/support/users/{user}": {
            "get": {
                "operationId": "supportUsers.show",
                "tags": [
                    "SupportUsers"
                ],
                "parameters": [
                    {
                        "name": "user",
                        "in": "path",
                        "required": true,
                        "description": "The user ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "user": {
                                            "$ref": "#/components/schemas/User"
                                        },
                                        "recent_orders": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/DeliveryOrder"
                                            }
                                        }
                                    },
                                    "required": [
                                        "user",
                                        "recent_orders"
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/system/audit-logs": {
            "get": {
                "operationId": "systemAuditLog.index",
                "tags": [
                    "SystemAuditLog"
                ],
                "parameters": [
                    {
                        "name": "actor_id",
                        "in": "query",
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "action",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "maxLength": 80
                        }
                    },
                    {
                        "name": "subject_type",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "maxLength": 80
                        }
                    },
                    {
                        "name": "subject_id",
                        "in": "query",
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "order_id",
                        "in": "query",
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "merchant_id",
                        "in": "query",
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "from",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "format": "date-time"
                        }
                    },
                    {
                        "name": "to",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "format": "date-time"
                        }
                    },
                    {
                        "name": "per_page",
                        "in": "query",
                        "schema": {
                            "type": "integer",
                            "minimum": 1,
                            "maximum": 100
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "type": "string"
                                            }
                                        },
                                        "meta": {
                                            "type": "object",
                                            "properties": {
                                                "page": {
                                                    "type": "integer"
                                                },
                                                "per_page": {
                                                    "type": "integer"
                                                },
                                                "total": {
                                                    "type": "integer"
                                                },
                                                "last_page": {
                                                    "type": "integer"
                                                }
                                            },
                                            "required": [
                                                "page",
                                                "per_page",
                                                "total",
                                                "last_page"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "data",
                                        "meta"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/system/compliance/summaries": {
            "get": {
                "operationId": "systemCompliance.index",
                "tags": [
                    "SystemCompliance"
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/LengthAwarePaginator"
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            },
            "post": {
                "operationId": "systemCompliance.store",
                "tags": [
                    "SystemCompliance"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/SystemComplianceSummaryRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ComplianceSummary"
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    }
                }
            }
        },
        "/system/compliance/summaries/{summary}": {
            "get": {
                "operationId": "systemCompliance.show",
                "tags": [
                    "SystemCompliance"
                ],
                "parameters": [
                    {
                        "name": "summary",
                        "in": "path",
                        "required": true,
                        "description": "The summary ID",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ComplianceSummary"
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/ModelNotFoundException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/health": {
            "get": {
                "operationId": "system.systemHealth.health_0",
                "summary": "Backward compatible route handler. Some routes reference SystemHealthController@health",
                "tags": [
                    "SystemHealth"
                ],
                "responses": {
                    "200": {
                        "description": "`SystemHealthResource`",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/SystemHealthResource"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/system/health": {
            "get": {
                "operationId": "system.systemHealth.health_0",
                "summary": "Backward compatible route handler. Some routes reference SystemHealthController@health",
                "tags": [
                    "SystemHealth"
                ],
                "responses": {
                    "200": {
                        "description": "`SystemHealthResource`",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/SystemHealthResource"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/system/healthz": {
            "get": {
                "operationId": "system.systemHealth.health_0",
                "summary": "Backward compatible route handler. Some routes reference SystemHealthController@health",
                "tags": [
                    "SystemHealth"
                ],
                "responses": {
                    "200": {
                        "description": "`SystemHealthResource`",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/SystemHealthResource"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/system/ready": {
            "get": {
                "operationId": "system.systemReady.ready_0",
                "summary": "Readiness probe.\nReturns 200 when the app can serve traffic",
                "tags": [
                    "SystemReady"
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/system/readyz": {
            "get": {
                "operationId": "system.systemReady.ready_0",
                "summary": "Readiness probe.\nReturns 200 when the app can serve traffic",
                "tags": [
                    "SystemReady"
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/system/status": {
            "get": {
                "operationId": "systemStatus.status",
                "tags": [
                    "SystemStatus"
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "ok": {
                                            "type": "boolean"
                                        },
                                        "time": {
                                            "type": "string"
                                        },
                                        "app": {
                                            "type": "object",
                                            "properties": {
                                                "name": {
                                                    "type": "string"
                                                },
                                                "env": {
                                                    "type": "string"
                                                },
                                                "debug": {
                                                    "type": "boolean"
                                                },
                                                "version": {
                                                    "type": "string"
                                                },
                                                "commit": {
                                                    "type": "string"
                                                }
                                            },
                                            "required": [
                                                "name",
                                                "env",
                                                "debug",
                                                "version",
                                                "commit"
                                            ]
                                        },
                                        "runtime": {
                                            "type": "object",
                                            "properties": {
                                                "php": {
                                                    "type": "string"
                                                },
                                                "laravel": {
                                                    "type": "string"
                                                }
                                            },
                                            "required": [
                                                "php",
                                                "laravel"
                                            ]
                                        },
                                        "checks": {
                                            "type": "object",
                                            "properties": {
                                                "db": {
                                                    "type": "object",
                                                    "properties": {
                                                        "ok": {
                                                            "type": "boolean"
                                                        }
                                                    },
                                                    "required": [
                                                        "ok"
                                                    ]
                                                },
                                                "cache": {
                                                    "type": "object",
                                                    "properties": {
                                                        "ok": {
                                                            "type": "boolean"
                                                        }
                                                    },
                                                    "required": [
                                                        "ok"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "db",
                                                "cache"
                                            ]
                                        },
                                        "queue": {
                                            "type": "object",
                                            "properties": {
                                                "connection": {
                                                    "type": "string"
                                                },
                                                "failed_jobs": {
                                                    "type": "null"
                                                }
                                            },
                                            "required": [
                                                "connection",
                                                "failed_jobs"
                                            ]
                                        },
                                        "metrics": {
                                            "type": "object",
                                            "properties": {
                                                "orders_by_status": {
                                                    "type": "array",
                                                    "items": {}
                                                },
                                                "dispatch_attempts_by_status": {
                                                    "type": "array",
                                                    "items": {}
                                                }
                                            },
                                            "required": [
                                                "orders_by_status",
                                                "dispatch_attempts_by_status"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "ok",
                                        "time",
                                        "app",
                                        "runtime",
                                        "checks",
                                        "queue",
                                        "metrics"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/system/metrics": {
            "get": {
                "operationId": "systemStatus.metrics",
                "tags": [
                    "SystemStatus"
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "time": {
                                            "type": "string"
                                        },
                                        "orders_last_24h": {
                                            "type": "integer",
                                            "minimum": 0
                                        },
                                        "completed_last_24h": {
                                            "type": "integer",
                                            "minimum": 0
                                        },
                                        "cancelled_last_24h": {
                                            "type": "integer",
                                            "minimum": 0
                                        },
                                        "dispatch_pending": {
                                            "type": "integer",
                                            "minimum": 0
                                        },
                                        "dispatch_accepted": {
                                            "type": "integer",
                                            "minimum": 0
                                        },
                                        "failed_jobs": {
                                            "type": "null"
                                        }
                                    },
                                    "required": [
                                        "time",
                                        "orders_last_24h",
                                        "completed_last_24h",
                                        "cancelled_last_24h",
                                        "dispatch_pending",
                                        "dispatch_accepted",
                                        "failed_jobs"
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/vehicles": {
            "get": {
                "operationId": "vehicles.index",
                "tags": [
                    "Vehicle"
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            },
            "post": {
                "operationId": "vehicles.store",
                "tags": [
                    "Vehicle"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/VehicleRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    }
                }
            }
        },
        "/vehicles/{id}": {
            "get": {
                "operationId": "vehicles.show",
                "tags": [
                    "Vehicle"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            },
            "put": {
                "operationId": "vehicles.update",
                "tags": [
                    "Vehicle"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/VehicleRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    }
                }
            },
            "delete": {
                "operationId": "vehicles.destroy",
                "tags": [
                    "Vehicle"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/vehicle-types": {
            "get": {
                "operationId": "vehicle-types.index",
                "tags": [
                    "VehicleType"
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            },
            "post": {
                "operationId": "vehicle-types.store",
                "tags": [
                    "VehicleType"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/VehicleTypeRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    }
                }
            }
        },
        "/vehicle-types/{id}": {
            "get": {
                "operationId": "vehicle-types.show",
                "tags": [
                    "VehicleType"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            },
            "put": {
                "operationId": "vehicle-types.update",
                "tags": [
                    "VehicleType"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/VehicleTypeRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationException"
                    },
                    "403": {
                        "$ref": "#/components/responses/AuthorizationException"
                    }
                }
            },
            "delete": {
                "operationId": "vehicle-types.destroy",
                "tags": [
                    "VehicleType"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "enum": [
                                                "Deleted successfully"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "message"
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        },
        "/wallet/payment-instructions": {
            "get": {
                "operationId": "wallet.walletPaymentInstructions",
                "tags": [
                    "WalletPaymentInstructions"
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "provider": {
                                            "type": "string"
                                        },
                                        "qr_url": {
                                            "type": "string"
                                        },
                                        "receiver_name": {
                                            "type": "string"
                                        },
                                        "instructions": {
                                            "type": "array",
                                            "items": {}
                                        }
                                    },
                                    "required": [
                                        "provider",
                                        "qr_url",
                                        "receiver_name",
                                        "instructions"
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/AuthenticationException"
                    }
                }
            }
        }
    },
    "components": {
        "schemas": {
            "AdminForceCancelOrderRequest": {
                "type": "object",
                "properties": {
                    "reason": {
                        "type": "string",
                        "minLength": 3,
                        "maxLength": 200
                    }
                },
                "required": [
                    "reason"
                ],
                "title": "AdminForceCancelOrderRequest"
            },
            "AdminOrderResource": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "reference_no": {
                        "type": "string"
                    },
                    "status": {
                        "type": "string"
                    },
                    "store_status": {
                        "type": "string"
                    },
                    "dispatch_status": {
                        "type": "string"
                    },
                    "driver_id": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "store_id": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "customer_id": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "pickup_address": {
                        "type": "string"
                    },
                    "dropoff_address": {
                        "type": "string"
                    },
                    "created_at": {
                        "type": "string"
                    },
                    "updated_at": {
                        "type": "string"
                    },
                    "customer": {
                        "type": "object",
                        "properties": {
                            "id": {
                                "type": "integer"
                            },
                            "name": {
                                "type": "string"
                            },
                            "email": {
                                "type": "string"
                            },
                            "mobile": {
                                "type": "string"
                            }
                        },
                        "required": [
                            "id",
                            "name",
                            "email",
                            "mobile"
                        ]
                    },
                    "driver": {
                        "type": "object",
                        "properties": {
                            "id": {
                                "type": "integer"
                            },
                            "name": {
                                "type": "string"
                            },
                            "email": {
                                "type": "string"
                            },
                            "mobile": {
                                "type": "string"
                            }
                        },
                        "required": [
                            "id",
                            "name",
                            "email",
                            "mobile"
                        ]
                    },
                    "store": {
                        "type": "object",
                        "properties": {
                            "id": {
                                "type": "integer"
                            },
                            "name": {
                                "type": "string"
                            }
                        },
                        "required": [
                            "id",
                            "name"
                        ]
                    },
                    "driver_signals": {
                        "type": [
                            "string",
                            "null"
                        ]
                    }
                },
                "required": [
                    "id",
                    "reference_no",
                    "status",
                    "store_status",
                    "dispatch_status",
                    "driver_id",
                    "store_id",
                    "customer_id",
                    "pickup_address",
                    "dropoff_address",
                    "created_at",
                    "updated_at",
                    "driver_signals"
                ],
                "title": "AdminOrderResource"
            },
            "AdminReassignDriverRequest": {
                "type": "object",
                "properties": {
                    "driver_id": {
                        "type": "integer",
                        "minimum": 1
                    },
                    "note": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "maxLength": 500
                    }
                },
                "required": [
                    "driver_id"
                ],
                "title": "AdminReassignDriverRequest"
            },
            "AdminRefundOrderRequest": {
                "type": "object",
                "properties": {
                    "reason": {
                        "type": "string",
                        "minLength": 2,
                        "maxLength": 255
                    },
                    "idempotency_key": {
                        "type": "string",
                        "maxLength": 120
                    }
                },
                "required": [
                    "reason",
                    "idempotency_key"
                ],
                "title": "AdminRefundOrderRequest"
            },
            "AdminUnassignDriverRequest": {
                "type": "object",
                "properties": {
                    "reason": {
                        "type": "string",
                        "maxLength": 500
                    },
                    "note": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "maxLength": 500
                    }
                },
                "required": [
                    "reason"
                ],
                "title": "AdminUnassignDriverRequest"
            },
            "ComplianceSummary": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "type": {
                        "type": "string"
                    },
                    "source_type": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "source_id": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "requested_by": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "status": {
                        "type": "string"
                    },
                    "summary": {
                        "type": [
                            "array",
                            "null"
                        ],
                        "items": {}
                    },
                    "raw": {
                        "type": [
                            "array",
                            "null"
                        ],
                        "items": {}
                    },
                    "meta": {
                        "type": [
                            "array",
                            "null"
                        ],
                        "items": {}
                    },
                    "started_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "completed_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "error": {
                        "type": [
                            "array",
                            "null"
                        ],
                        "items": {}
                    },
                    "created_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "updated_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    }
                },
                "required": [
                    "id",
                    "type",
                    "source_type",
                    "source_id",
                    "requested_by",
                    "status",
                    "summary",
                    "raw",
                    "meta",
                    "started_at",
                    "completed_at",
                    "error",
                    "created_at",
                    "updated_at"
                ],
                "title": "ComplianceSummary"
            },
            "ConfirmCodOtpRequest": {
                "type": "object",
                "properties": {
                    "code": {
                        "type": "string",
                        "pattern": "^\\d+$",
                        "minLength": 6,
                        "maxLength": 6
                    }
                },
                "required": [
                    "code"
                ],
                "title": "ConfirmCodOtpRequest"
            },
            "CreateRefundRequest": {
                "type": "object",
                "properties": {
                    "delivery_order_id": {
                        "type": "integer"
                    },
                    "reason": {
                        "type": "string",
                        "maxLength": 64
                    },
                    "amount_points": {
                        "type": [
                            "integer",
                            "null"
                        ],
                        "minimum": 1
                    },
                    "notes": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "maxLength": 2000
                    },
                    "idempotency_key": {
                        "type": "string",
                        "maxLength": 120
                    }
                },
                "required": [
                    "delivery_order_id",
                    "reason",
                    "idempotency_key"
                ],
                "title": "CreateRefundRequest"
            },
            "CustomerCreateDisputeByOrderIdRequest": {
                "type": "object",
                "properties": {
                    "delivery_order_id": {
                        "type": "integer"
                    },
                    "reason": {
                        "type": "string",
                        "enum": [
                            "undelivered",
                            "missing_item",
                            "wrong_item",
                            "other"
                        ]
                    },
                    "description": {
                        "type": "string",
                        "maxLength": 2000
                    },
                    "meta": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    "evidence_note": {
                        "type": "string",
                        "description": "5MB each",
                        "maxLength": 1000
                    },
                    "note": {
                        "type": "string",
                        "maxLength": 1000
                    },
                    "evidence_photos": {
                        "type": "array",
                        "description": "Evidence can be attached at creation time (optional).",
                        "items": {
                            "type": "string",
                            "format": "binary",
                            "contentMediaType": "application/octet-stream",
                            "maxLength": 5120
                        },
                        "maxItems": 6
                    },
                    "photos": {
                        "type": "array",
                        "description": "Aliases to keep shape consistent with the add-evidence endpoint.",
                        "items": {
                            "type": "string",
                            "format": "binary",
                            "contentMediaType": "application/octet-stream",
                            "maxLength": 5120
                        },
                        "maxItems": 6
                    }
                },
                "required": [
                    "delivery_order_id",
                    "reason"
                ],
                "title": "CustomerCreateDisputeByOrderIdRequest"
            },
            "CustomerDisputeEvidenceRequest": {
                "type": "object",
                "properties": {
                    "note": {
                        "type": "string",
                        "maxLength": 1000
                    },
                    "meta": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    "photos": {
                        "type": "array",
                        "items": {
                            "type": "string",
                            "format": "binary",
                            "contentMediaType": "application/octet-stream",
                            "maxLength": 5120
                        },
                        "minItems": 1,
                        "maxItems": 6
                    }
                },
                "required": [
                    "photos"
                ],
                "title": "CustomerDisputeEvidenceRequest"
            },
            "CustomerTrustProfile": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "customer_id": {
                        "type": "integer"
                    },
                    "risk_score": {
                        "type": "integer"
                    },
                    "is_blocked": {
                        "type": "boolean"
                    },
                    "blocked_reason": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "created_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "updated_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "cod_disabled_until": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "cod_incident_strikes": {
                        "type": "integer"
                    },
                    "cod_incident_total": {
                        "type": "integer"
                    },
                    "good_streak": {
                        "type": "integer"
                    },
                    "last_incident_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "last_good_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    }
                },
                "required": [
                    "id",
                    "customer_id",
                    "risk_score",
                    "is_blocked",
                    "blocked_reason",
                    "created_at",
                    "updated_at",
                    "cod_disabled_until",
                    "cod_incident_strikes",
                    "cod_incident_total",
                    "good_streak",
                    "last_incident_at",
                    "last_good_at"
                ],
                "title": "CustomerTrustProfile"
            },
            "CustomerWalletTransaction": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "wallet_id": {
                        "type": "integer"
                    },
                    "payment_receipt_id": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "type": {
                        "type": "string"
                    },
                    "order_payment_ref_key": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "booking_hold_ref_key": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "booking_hold_release_ref_key": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "points": {
                        "type": "integer"
                    },
                    "reference_type": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "reference_id": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "meta": {
                        "type": [
                            "array",
                            "null"
                        ],
                        "items": {}
                    },
                    "created_by": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "created_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "updated_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    }
                },
                "required": [
                    "id",
                    "wallet_id",
                    "payment_receipt_id",
                    "type",
                    "order_payment_ref_key",
                    "booking_hold_ref_key",
                    "booking_hold_release_ref_key",
                    "points",
                    "reference_type",
                    "reference_id",
                    "meta",
                    "created_by",
                    "created_at",
                    "updated_at"
                ],
                "title": "CustomerWalletTransaction"
            },
            "DeliveryOrder": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "reference_no": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "customer_id": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "store_id": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "vehicle_type_id": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "passenger_count": {
                        "type": "integer"
                    },
                    "driver_id": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "partner_user_id": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "sales_order_id": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "order_time": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "pickup_address": {
                        "type": "string"
                    },
                    "pickup_latitude": {
                        "type": [
                            "number",
                            "null"
                        ]
                    },
                    "pickup_longitude": {
                        "type": [
                            "number",
                            "null"
                        ]
                    },
                    "dropoff_address": {
                        "type": "string"
                    },
                    "special_instructions": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "dropoff_latitude": {
                        "type": [
                            "number",
                            "null"
                        ]
                    },
                    "dropoff_longitude": {
                        "type": [
                            "number",
                            "null"
                        ]
                    },
                    "distance": {
                        "type": [
                            "number",
                            "null"
                        ]
                    },
                    "total_price": {
                        "type": "number"
                    },
                    "total_driver_fare": {
                        "type": "number"
                    },
                    "total_transaction_fare": {
                        "type": "number"
                    },
                    "promo_code": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "promo_discount_points": {
                        "type": "integer"
                    },
                    "promo_platform_fee_original": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "promo_platform_fee_final": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "promo_source_type": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "promo_source_id": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "partner_commission_points": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "system_commission_points": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "partner_take_pct": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "delivery_fee_prepaid_points": {
                        "type": "integer"
                    },
                    "booking_hold_points": {
                        "type": "integer"
                    },
                    "booking_hold_status": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "booking_hold_applied_at": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "booking_hold_released_at": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "booking_hold_captured_at": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "delivery_fee_prepaid_at": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "payment_type_id": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "trip_type": {
                        "type": "string"
                    },
                    "service_tier": {
                        "type": "string"
                    },
                    "guarantee_fee_points": {
                        "type": "integer"
                    },
                    "guarantee_deadline_at": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "guarantee_breached_at": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "guarantee_refunded_at": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "store_status": {
                        "type": "string"
                    },
                    "status": {
                        "type": "string"
                    },
                    "cancelled_by": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "cancel_reason": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "cancelled_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "prep_status": {
                        "type": "string"
                    },
                    "requires_quote_confirmation": {
                        "type": "boolean"
                    },
                    "requires_dropoff_pin": {
                        "type": "boolean"
                    },
                    "dropoff_pin_hash": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "dropoff_pin_verified_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "dropoff_pin_verified_by_user_id": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "dropoff_pin_attempts": {
                        "type": "integer"
                    },
                    "dropoff_pin_locked_until": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "dropoff_pin_verified_latitude": {
                        "type": [
                            "number",
                            "null"
                        ]
                    },
                    "dropoff_pin_verified_longitude": {
                        "type": [
                            "number",
                            "null"
                        ]
                    },
                    "request_kind": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "request_attachments": {
                        "type": [
                            "array",
                            "null"
                        ],
                        "items": {}
                    },
                    "patient_name": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "patient_birthdate": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "request_notes": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "quote_status": {
                        "type": "string"
                    },
                    "quote_payload": {
                        "type": [
                            "array",
                            "null"
                        ],
                        "items": {}
                    },
                    "quote_accept_payload": {
                        "type": [
                            "array",
                            "null"
                        ],
                        "items": {}
                    },
                    "quote_ready_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "quote_accepted_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "quote_prepared_by_user_id": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "prep_time_min": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "prep_time_override_minutes": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "prep_time_overridden_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "prep_time_overridden_by": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "prep_time_override_reason": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "accepted_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "store_accepted_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "status_updated_by_user_id": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "created_by": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "updated_by": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "created_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "updated_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "delivered_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "picked_up_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "handed_over_at": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "store_ready_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "completed_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "refunded_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "completed_by": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "payment_method": {
                        "type": "string"
                    },
                    "payment_status": {
                        "type": "string"
                    },
                    "payment_reference": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "payment_receipt_path": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "payment_submitted_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "payment_verified_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "payment_verified_by_user_id": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "payment_rejection_reason": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "payment_expires_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "dispatch_status": {
                        "type": "string"
                    },
                    "batch_group_id": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "batched_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "dispatch_attempts": {
                        "type": "integer"
                    },
                    "dispatch_last_attempt_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "dispatch_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "offer_sent_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "driver_assigned_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "arrived_pickup_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "issue_detected": {
                        "type": "boolean"
                    },
                    "rating_stars": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "rating_submitted_at": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "issue_message": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "issue_submitted_at": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "rating_eligible": {
                        "type": "boolean"
                    },
                    "flow_type": {
                        "type": "string"
                    },
                    "fulfillment_mode": {
                        "type": "string"
                    },
                    "assigned_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "idempotency_key": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "store_kind": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "cod_confirmation_code_hash": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "cod_confirmation_sent_at": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "cod_confirmation_expires_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "cod_confirmation_attempts": {
                        "type": "integer"
                    },
                    "cod_confirmed_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "cod_next_dispatch_status": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "cod_next_dispatch_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "guaranteed_fee_points": {
                        "type": "integer"
                    },
                    "guaranteed_deadline_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "guaranteed_status": {
                        "type": [
                            "string",
                            "null"
                        ]
                    }
                },
                "required": [
                    "id",
                    "reference_no",
                    "customer_id",
                    "store_id",
                    "vehicle_type_id",
                    "passenger_count",
                    "driver_id",
                    "partner_user_id",
                    "sales_order_id",
                    "order_time",
                    "pickup_address",
                    "pickup_latitude",
                    "pickup_longitude",
                    "dropoff_address",
                    "special_instructions",
                    "dropoff_latitude",
                    "dropoff_longitude",
                    "distance",
                    "total_price",
                    "total_driver_fare",
                    "total_transaction_fare",
                    "promo_code",
                    "promo_discount_points",
                    "promo_platform_fee_original",
                    "promo_platform_fee_final",
                    "promo_source_type",
                    "promo_source_id",
                    "partner_commission_points",
                    "system_commission_points",
                    "partner_take_pct",
                    "delivery_fee_prepaid_points",
                    "booking_hold_points",
                    "booking_hold_status",
                    "booking_hold_applied_at",
                    "booking_hold_released_at",
                    "booking_hold_captured_at",
                    "delivery_fee_prepaid_at",
                    "payment_type_id",
                    "trip_type",
                    "service_tier",
                    "guarantee_fee_points",
                    "guarantee_deadline_at",
                    "guarantee_breached_at",
                    "guarantee_refunded_at",
                    "store_status",
                    "status",
                    "cancelled_by",
                    "cancel_reason",
                    "cancelled_at",
                    "prep_status",
                    "requires_quote_confirmation",
                    "requires_dropoff_pin",
                    "dropoff_pin_hash",
                    "dropoff_pin_verified_at",
                    "dropoff_pin_verified_by_user_id",
                    "dropoff_pin_attempts",
                    "dropoff_pin_locked_until",
                    "dropoff_pin_verified_latitude",
                    "dropoff_pin_verified_longitude",
                    "request_kind",
                    "request_attachments",
                    "patient_name",
                    "patient_birthdate",
                    "request_notes",
                    "quote_status",
                    "quote_payload",
                    "quote_accept_payload",
                    "quote_ready_at",
                    "quote_accepted_at",
                    "quote_prepared_by_user_id",
                    "prep_time_min",
                    "prep_time_override_minutes",
                    "prep_time_overridden_at",
                    "prep_time_overridden_by",
                    "prep_time_override_reason",
                    "accepted_at",
                    "store_accepted_at",
                    "status_updated_by_user_id",
                    "created_by",
                    "updated_by",
                    "created_at",
                    "updated_at",
                    "delivered_at",
                    "picked_up_at",
                    "handed_over_at",
                    "store_ready_at",
                    "completed_at",
                    "refunded_at",
                    "completed_by",
                    "payment_method",
                    "payment_status",
                    "payment_reference",
                    "payment_receipt_path",
                    "payment_submitted_at",
                    "payment_verified_at",
                    "payment_verified_by_user_id",
                    "payment_rejection_reason",
                    "payment_expires_at",
                    "dispatch_status",
                    "batch_group_id",
                    "batched_at",
                    "dispatch_attempts",
                    "dispatch_last_attempt_at",
                    "dispatch_at",
                    "offer_sent_at",
                    "driver_assigned_at",
                    "arrived_pickup_at",
                    "issue_detected",
                    "rating_stars",
                    "rating_submitted_at",
                    "issue_message",
                    "issue_submitted_at",
                    "rating_eligible",
                    "flow_type",
                    "fulfillment_mode",
                    "assigned_at",
                    "idempotency_key",
                    "store_kind",
                    "cod_confirmation_code_hash",
                    "cod_confirmation_sent_at",
                    "cod_confirmation_expires_at",
                    "cod_confirmation_attempts",
                    "cod_confirmed_at",
                    "cod_next_dispatch_status",
                    "cod_next_dispatch_at",
                    "guaranteed_fee_points",
                    "guaranteed_deadline_at",
                    "guaranteed_status"
                ],
                "title": "DeliveryOrder"
            },
            "DeliveryOrderItem": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "delivery_order_id": {
                        "type": "integer"
                    },
                    "product_id": {
                        "type": "integer"
                    },
                    "name_snapshot": {
                        "type": "string"
                    },
                    "price_snapshot": {
                        "type": "string"
                    },
                    "qty": {
                        "type": "integer"
                    },
                    "line_total": {
                        "type": "string"
                    },
                    "notes": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "created_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "updated_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    }
                },
                "required": [
                    "id",
                    "delivery_order_id",
                    "product_id",
                    "name_snapshot",
                    "price_snapshot",
                    "qty",
                    "line_total",
                    "notes",
                    "created_at",
                    "updated_at"
                ],
                "title": "DeliveryOrderItem"
            },
            "DeliveryOrderRequest": {
                "type": "object",
                "properties": {
                    "pickup_address": {
                        "type": "string"
                    },
                    "dropoff_address": {
                        "type": "string"
                    },
                    "driver_id": {
                        "type": "string"
                    },
                    "distance": {
                        "type": "string"
                    },
                    "total_price": {
                        "type": "string"
                    },
                    "total_driver_fare": {
                        "type": "string"
                    },
                    "total_transaction_fare": {
                        "type": "string"
                    },
                    "payment_type_id": {
                        "type": "string"
                    },
                    "trip_type": {
                        "type": "string"
                    }
                },
                "required": [
                    "pickup_address",
                    "dropoff_address",
                    "driver_id",
                    "distance",
                    "total_price",
                    "total_driver_fare",
                    "total_transaction_fare",
                    "payment_type_id",
                    "trip_type"
                ],
                "title": "DeliveryOrderRequest"
            },
            "DriverDocument": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "driver_profile_id": {
                        "type": "integer"
                    },
                    "type": {
                        "type": "string"
                    },
                    "file_path": {
                        "type": "string"
                    },
                    "document_number": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "expires_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "status": {
                        "type": "string"
                    },
                    "rejection_reason": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "created_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "updated_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    }
                },
                "required": [
                    "id",
                    "driver_profile_id",
                    "type",
                    "file_path",
                    "document_number",
                    "expires_at",
                    "status",
                    "rejection_reason",
                    "created_at",
                    "updated_at"
                ],
                "title": "DriverDocument"
            },
            "DriverHeartbeatRequest": {
                "type": "object",
                "properties": {
                    "driver_id": {
                        "type": "integer"
                    },
                    "timestamp": {
                        "type": [
                            "number",
                            "null"
                        ]
                    }
                },
                "required": [
                    "driver_id"
                ],
                "title": "DriverHeartbeatRequest"
            },
            "DriverProfile": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "user_id": {
                        "type": "integer"
                    },
                    "status": {
                        "type": "string"
                    },
                    "applied_at": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "approved_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "approved_by": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "rejection_reason": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "last_reviewed_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "created_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "updated_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    }
                },
                "required": [
                    "id",
                    "user_id",
                    "status",
                    "applied_at",
                    "approved_at",
                    "approved_by",
                    "rejection_reason",
                    "last_reviewed_at",
                    "created_at",
                    "updated_at"
                ],
                "title": "DriverProfile"
            },
            "DriverProofOfDeliveryRequest": {
                "type": "object",
                "properties": {
                    "photo": {
                        "type": "string",
                        "format": "binary",
                        "contentMediaType": "application/octet-stream",
                        "maxLength": 5120
                    },
                    "latitude": {
                        "type": "number",
                        "description": "5MB",
                        "minimum": -90,
                        "maximum": 90
                    },
                    "longitude": {
                        "type": "number",
                        "minimum": -180,
                        "maximum": 180
                    },
                    "captured_at": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "meta": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    }
                },
                "required": [
                    "photo",
                    "latitude",
                    "longitude"
                ],
                "title": "DriverProofOfDeliveryRequest"
            },
            "DriverTrustProfile": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "user_id": {
                        "type": "integer"
                    },
                    "score": {
                        "type": "integer"
                    },
                    "avg_ack_ms": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "avg_response_ms": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "timeout_strikes": {
                        "type": "integer"
                    },
                    "miss_streak": {
                        "type": "integer"
                    },
                    "shadowbanned_until": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "last_timeout_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "last_ack_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "accepted_jobs": {
                        "type": "integer"
                    },
                    "completed_jobs": {
                        "type": "integer"
                    },
                    "cancel_after_accept": {
                        "type": "integer"
                    },
                    "reject_count": {
                        "type": "integer"
                    },
                    "idle_flags": {
                        "type": "integer"
                    },
                    "last_event_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "created_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "updated_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    }
                },
                "required": [
                    "id",
                    "user_id",
                    "score",
                    "avg_ack_ms",
                    "avg_response_ms",
                    "timeout_strikes",
                    "miss_streak",
                    "shadowbanned_until",
                    "last_timeout_at",
                    "last_ack_at",
                    "accepted_jobs",
                    "completed_jobs",
                    "cancel_after_accept",
                    "reject_count",
                    "idle_flags",
                    "last_event_at",
                    "created_at",
                    "updated_at"
                ],
                "title": "DriverTrustProfile"
            },
            "DriverWalletTransaction": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "wallet_id": {
                        "type": "integer"
                    },
                    "type": {
                        "type": "string"
                    },
                    "points": {
                        "type": "integer"
                    },
                    "reference_type": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "reference_id": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "meta": {
                        "type": [
                            "array",
                            "null"
                        ],
                        "items": {}
                    },
                    "created_by": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "created_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "updated_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    }
                },
                "required": [
                    "id",
                    "wallet_id",
                    "type",
                    "points",
                    "reference_type",
                    "reference_id",
                    "meta",
                    "created_by",
                    "created_at",
                    "updated_at"
                ],
                "title": "DriverWalletTransaction"
            },
            "FinanceManualAdjustmentRequest": {
                "type": "object",
                "properties": {
                    "wallet": {
                        "type": "string",
                        "enum": [
                            "driver",
                            "customer",
                            "merchant",
                            "platform_escrow",
                            "reward"
                        ]
                    },
                    "user_id": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "points": {
                        "type": "integer",
                        "minimum": 1,
                        "maximum": 100000000
                    },
                    "direction": {
                        "type": "string",
                        "enum": [
                            "credit",
                            "debit"
                        ]
                    },
                    "reason": {
                        "type": "string",
                        "maxLength": 200
                    },
                    "reference": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "maxLength": 80
                    }
                },
                "required": [
                    "wallet",
                    "points",
                    "direction",
                    "reason"
                ],
                "title": "FinanceManualAdjustmentRequest"
            },
            "FinanceReconcileRunRequest": {
                "type": "object",
                "properties": {
                    "dry_run": {
                        "type": "boolean"
                    },
                    "scope": {
                        "type": "string",
                        "enum": [
                            "wallets",
                            "orders",
                            "all"
                        ]
                    },
                    "since_hours": {
                        "type": "integer",
                        "minimum": 1,
                        "maximum": 720
                    }
                },
                "title": "FinanceReconcileRunRequest"
            },
            "LengthAwarePaginator": {
                "type": "array",
                "items": {},
                "title": "LengthAwarePaginator"
            },
            "ManualPromotionStoreRequest": {
                "type": "object",
                "properties": {
                    "code": {
                        "type": "string",
                        "minLength": 2,
                        "maxLength": 40
                    },
                    "name": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "maxLength": 120
                    },
                    "description": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "maxLength": 2000
                    },
                    "discount_type": {
                        "type": "string",
                        "enum": [
                            "fixed_points",
                            "percent"
                        ]
                    },
                    "discount_value": {
                        "type": "integer",
                        "minimum": 1
                    },
                    "max_discount_points": {
                        "type": [
                            "integer",
                            "null"
                        ],
                        "minimum": 1
                    },
                    "is_auto_apply": {
                        "type": [
                            "boolean",
                            "null"
                        ]
                    },
                    "per_user_limit": {
                        "type": [
                            "integer",
                            "null"
                        ],
                        "minimum": 0,
                        "maximum": 100
                    },
                    "max_redemptions": {
                        "type": [
                            "integer",
                            "null"
                        ],
                        "minimum": 1,
                        "maximum": 1000000
                    },
                    "starts_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "ends_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "applies_to": {
                        "type": [
                            "array",
                            "null"
                        ],
                        "items": {
                            "type": "string",
                            "enum": [
                                "transport",
                                "parcel",
                                "store"
                            ]
                        }
                    }
                },
                "required": [
                    "code",
                    "discount_type",
                    "discount_value"
                ],
                "title": "ManualPromotionStoreRequest"
            },
            "MerchantAiGenerateRequest": {
                "type": "object",
                "properties": {
                    "task": {
                        "type": "string",
                        "enum": [
                            "listing",
                            "reply",
                            "promo_description",
                            "dispute_reply",
                            "custom"
                        ]
                    },
                    "payload": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    }
                },
                "required": [
                    "task",
                    "payload"
                ],
                "title": "MerchantAiGenerateRequest"
            },
            "MerchantDocument": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "merchant_profile_id": {
                        "type": "integer"
                    },
                    "type": {
                        "type": "string"
                    },
                    "file_path": {
                        "type": "string"
                    },
                    "status": {
                        "type": "string"
                    },
                    "rejection_reason": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "created_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "updated_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    }
                },
                "required": [
                    "id",
                    "merchant_profile_id",
                    "type",
                    "file_path",
                    "status",
                    "rejection_reason",
                    "created_at",
                    "updated_at"
                ],
                "title": "MerchantDocument"
            },
            "MerchantKpiResource": {
                "type": "object",
                "properties": {
                    "store": {
                        "type": "object",
                        "properties": {
                            "id": {
                                "type": "integer"
                            },
                            "name": {
                                "type": "string"
                            },
                            "slug": {
                                "type": "string"
                            }
                        },
                        "required": [
                            "id",
                            "name",
                            "slug"
                        ]
                    },
                    "filters": {
                        "type": "object",
                        "properties": {
                            "start_date": {
                                "type": "string"
                            },
                            "end_date": {
                                "type": "string"
                            },
                            "timezone": {
                                "type": "string"
                            }
                        },
                        "required": [
                            "start_date",
                            "end_date",
                            "timezone"
                        ]
                    },
                    "generated_at": {
                        "type": "string"
                    },
                    "daily": {
                        "type": "object",
                        "properties": {
                            "start_date": {
                                "type": "string"
                            },
                            "end_date": {
                                "type": "string"
                            },
                            "orders_total": {
                                "type": "integer"
                            },
                            "orders_completed": {
                                "type": "integer"
                            },
                            "orders_cancelled": {
                                "type": "integer"
                            },
                            "completion_rate": {
                                "type": "number"
                            },
                            "gross_revenue_cents": {
                                "type": "integer"
                            },
                            "net_revenue_cents": {
                                "type": "integer"
                            }
                        },
                        "required": [
                            "start_date",
                            "end_date",
                            "orders_total",
                            "orders_completed",
                            "orders_cancelled",
                            "completion_rate",
                            "gross_revenue_cents",
                            "net_revenue_cents"
                        ]
                    },
                    "weekly": {
                        "type": "object",
                        "properties": {
                            "start_date": {
                                "type": "string"
                            },
                            "end_date": {
                                "type": "string"
                            },
                            "orders_total": {
                                "type": "integer"
                            },
                            "orders_completed": {
                                "type": "integer"
                            },
                            "orders_cancelled": {
                                "type": "integer"
                            },
                            "completion_rate": {
                                "type": "number"
                            },
                            "gross_revenue_cents": {
                                "type": "integer"
                            },
                            "net_revenue_cents": {
                                "type": "integer"
                            }
                        },
                        "required": [
                            "start_date",
                            "end_date",
                            "orders_total",
                            "orders_completed",
                            "orders_cancelled",
                            "completion_rate",
                            "gross_revenue_cents",
                            "net_revenue_cents"
                        ]
                    },
                    "buckets": {
                        "type": "object",
                        "properties": {
                            "daily": {
                                "type": "array",
                                "items": {}
                            },
                            "weekly": {
                                "type": "array",
                                "items": {}
                            }
                        },
                        "required": [
                            "daily",
                            "weekly"
                        ]
                    }
                },
                "required": [
                    "store",
                    "filters",
                    "generated_at",
                    "daily",
                    "weekly",
                    "buckets"
                ],
                "title": "MerchantKpiResource"
            },
            "MerchantProfile": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "user_id": {
                        "type": "integer"
                    },
                    "business_name": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "dti_registration_number": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "dti_certificate_path": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "status": {
                        "type": "string"
                    },
                    "applied_at": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "approved_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "approved_by": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "rejection_reason": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "created_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "updated_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    }
                },
                "required": [
                    "id",
                    "user_id",
                    "business_name",
                    "dti_registration_number",
                    "dti_certificate_path",
                    "status",
                    "applied_at",
                    "approved_at",
                    "approved_by",
                    "rejection_reason",
                    "created_at",
                    "updated_at"
                ],
                "title": "MerchantProfile"
            },
            "MerchantSettlementSummaryResource": {
                "type": "object",
                "properties": {
                    "store": {
                        "type": "object",
                        "properties": {
                            "id": {
                                "type": "integer"
                            },
                            "name": {
                                "type": "string"
                            }
                        },
                        "required": [
                            "id",
                            "name"
                        ]
                    },
                    "summary": {
                        "type": "object",
                        "properties": {
                            "earned_cents": {
                                "type": "integer"
                            },
                            "pending_cents": {
                                "type": "integer"
                            },
                            "paid_cents": {
                                "type": "integer"
                            }
                        },
                        "required": [
                            "earned_cents",
                            "pending_cents",
                            "paid_cents"
                        ]
                    },
                    "holds": {
                        "type": "array",
                        "items": {}
                    },
                    "next_release_at": {
                        "type": "string"
                    },
                    "last_reconciled_at": {
                        "type": "string"
                    }
                },
                "required": [
                    "store",
                    "summary",
                    "holds",
                    "next_release_at",
                    "last_reconciled_at"
                ],
                "title": "MerchantSettlementSummaryResource"
            },
            "MerchantUpdateStoreHoursRequest": {
                "type": "object",
                "properties": {
                    "open_time": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "close_time": {
                        "type": [
                            "string",
                            "null"
                        ]
                    }
                },
                "title": "MerchantUpdateStoreHoursRequest"
            },
            "MerchantUpdateStoreRequest": {
                "type": "object",
                "properties": {
                    "name": {
                        "type": "string",
                        "maxLength": 255
                    },
                    "description": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "maxLength": 2000
                    },
                    "address": {
                        "type": "string",
                        "maxLength": 255
                    },
                    "latitude": {
                        "type": [
                            "number",
                            "null"
                        ],
                        "minimum": -90,
                        "maximum": 90
                    },
                    "longitude": {
                        "type": [
                            "number",
                            "null"
                        ],
                        "minimum": -180,
                        "maximum": 180
                    },
                    "pickup_place_id": {
                        "type": [
                            "integer",
                            "null"
                        ],
                        "description": "optional: link store pickup to the nearest known Place"
                    }
                },
                "title": "MerchantUpdateStoreRequest"
            },
            "MerchantUpdateStoreStatusRequest": {
                "type": "object",
                "properties": {
                    "status": {
                        "type": "string",
                        "enum": [
                            "open",
                            "closed",
                            "under_maintenance"
                        ]
                    }
                },
                "required": [
                    "status"
                ],
                "title": "MerchantUpdateStoreStatusRequest"
            },
            "OpsOrderAssignDriverRequest": {
                "type": "object",
                "properties": {
                    "driver_id": {
                        "type": "integer"
                    },
                    "reason": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "maxLength": 200
                    },
                    "note": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "maxLength": 500
                    }
                },
                "required": [
                    "driver_id"
                ],
                "title": "OpsOrderAssignDriverRequest"
            },
            "OpsOrderUnassignDriverRequest": {
                "type": "object",
                "properties": {
                    "reason": {
                        "type": "string",
                        "maxLength": 500
                    },
                    "note": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "maxLength": 500
                    }
                },
                "required": [
                    "reason"
                ],
                "title": "OpsOrderUnassignDriverRequest"
            },
            "OrderPrepResource": {
                "type": "object",
                "properties": {
                    "order_id": {
                        "type": "integer"
                    },
                    "status": {
                        "type": "string"
                    },
                    "store_status": {
                        "type": "string"
                    },
                    "prep_time_min": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "prep_time_override_minutes": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "prep_time_overridden_at": {
                        "type": "string"
                    },
                    "prep_time_overridden_by": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "prep_time_override_reason": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "dispatch_at": {
                        "type": "string"
                    }
                },
                "required": [
                    "order_id",
                    "status",
                    "store_status",
                    "prep_time_min",
                    "prep_time_override_minutes",
                    "prep_time_overridden_at",
                    "prep_time_overridden_by",
                    "prep_time_override_reason",
                    "dispatch_at"
                ],
                "title": "OrderPrepResource"
            },
            "OrderPrepTimeOverrideRequest": {
                "type": "object",
                "properties": {
                    "prep_time_min": {
                        "type": "integer",
                        "minimum": 1,
                        "maximum": 240
                    },
                    "reason": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "maxLength": 255
                    }
                },
                "required": [
                    "prep_time_min"
                ],
                "title": "OrderPrepTimeOverrideRequest"
            },
            "OrderTimelineResource": {
                "type": "object",
                "properties": {
                    "timeline": {
                        "type": "array",
                        "items": {}
                    }
                },
                "required": [
                    "timeline"
                ],
                "title": "OrderTimelineResource"
            },
            "PartnerProfile": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "user_id": {
                        "type": "integer"
                    },
                    "business_name": {
                        "type": "string"
                    },
                    "facebook_page_url": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "service_area": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "status": {
                        "type": "string"
                    },
                    "rejection_reason": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "notes": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "approved_at": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "approved_by_user_id": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "created_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "updated_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    }
                },
                "required": [
                    "id",
                    "user_id",
                    "business_name",
                    "facebook_page_url",
                    "service_area",
                    "status",
                    "rejection_reason",
                    "notes",
                    "approved_at",
                    "approved_by_user_id",
                    "created_at",
                    "updated_at"
                ],
                "title": "PartnerProfile"
            },
            "PaymentReceipt": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "order_id": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "wallet_topup_request_id": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "customer_id": {
                        "type": "integer"
                    },
                    "provider": {
                        "type": "string"
                    },
                    "path": {
                        "type": "string"
                    },
                    "file_deleted_at": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "mime": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "size": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "ocr_status": {
                        "type": "string"
                    },
                    "ocr_text": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "ocr_meta": {
                        "type": [
                            "array",
                            "null"
                        ],
                        "items": {}
                    },
                    "check_reference": {
                        "type": "boolean"
                    },
                    "check_amount": {
                        "type": "boolean"
                    },
                    "check_time": {
                        "type": "boolean"
                    },
                    "review_status": {
                        "type": "string"
                    },
                    "reviewed_by": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "reviewed_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "reject_reason": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "created_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "updated_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "receipt_hash": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "amount_detected": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "reference_detected": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "paid_at_detected": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "ocr_confidence": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    }
                },
                "required": [
                    "id",
                    "order_id",
                    "wallet_topup_request_id",
                    "customer_id",
                    "provider",
                    "path",
                    "file_deleted_at",
                    "mime",
                    "size",
                    "ocr_status",
                    "ocr_text",
                    "ocr_meta",
                    "check_reference",
                    "check_amount",
                    "check_time",
                    "review_status",
                    "reviewed_by",
                    "reviewed_at",
                    "reject_reason",
                    "created_at",
                    "updated_at",
                    "receipt_hash",
                    "amount_detected",
                    "reference_detected",
                    "paid_at_detected",
                    "ocr_confidence"
                ],
                "title": "PaymentReceipt"
            },
            "PlaceRequest": {
                "type": "object",
                "properties": {
                    "name": {
                        "type": "string",
                        "maxLength": 255
                    },
                    "landmark": {
                        "type": "string"
                    },
                    "latitude": {
                        "type": "number",
                        "minimum": -90,
                        "maximum": 90
                    },
                    "longitude": {
                        "type": "number",
                        "minimum": -180,
                        "maximum": 180
                    }
                },
                "required": [
                    "name",
                    "landmark",
                    "latitude",
                    "longitude"
                ],
                "title": "PlaceRequest"
            },
            "Product": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "store_id": {
                        "type": "integer"
                    },
                    "product_category_id": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "name": {
                        "type": "string"
                    },
                    "description": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "price": {
                        "type": "string"
                    },
                    "stock": {
                        "type": "integer"
                    },
                    "is_active": {
                        "type": "boolean"
                    },
                    "image": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "is_available": {
                        "type": "boolean"
                    },
                    "created_by": {
                        "type": "integer"
                    },
                    "updated_by": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "created_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "updated_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "image_path": {
                        "type": "string"
                    }
                },
                "required": [
                    "id",
                    "store_id",
                    "product_category_id",
                    "name",
                    "description",
                    "price",
                    "stock",
                    "is_active",
                    "image",
                    "is_available",
                    "created_by",
                    "updated_by",
                    "created_at",
                    "updated_at",
                    "image_path"
                ],
                "title": "Product"
            },
            "ProductCategoryResource": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "store_id": {
                        "type": "integer"
                    },
                    "name": {
                        "type": "string"
                    },
                    "slug": {
                        "type": "string"
                    },
                    "status": {
                        "type": "string"
                    },
                    "status_reason": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "sort_order": {
                        "type": "integer"
                    },
                    "products": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/ProductResource"
                        }
                    }
                },
                "required": [
                    "id",
                    "store_id",
                    "name",
                    "slug",
                    "status",
                    "status_reason",
                    "sort_order"
                ],
                "title": "ProductCategoryResource"
            },
            "ProductCategoryStoreRequest": {
                "type": "object",
                "properties": {
                    "store_id": {
                        "type": "integer"
                    },
                    "name": {
                        "type": "string",
                        "maxLength": 120
                    },
                    "slug": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "maxLength": 120
                    },
                    "sort_order": {
                        "type": [
                            "integer",
                            "null"
                        ],
                        "minimum": 1
                    },
                    "status": {
                        "type": "string",
                        "enum": [
                            "active",
                            "paused"
                        ]
                    },
                    "status_reason": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "maxLength": 255
                    }
                },
                "required": [
                    "store_id",
                    "name"
                ],
                "title": "ProductCategoryStoreRequest"
            },
            "ProductCategoryUpdateRequest": {
                "type": "object",
                "properties": {
                    "name": {
                        "type": "string",
                        "maxLength": 120
                    },
                    "slug": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "maxLength": 120
                    },
                    "sort_order": {
                        "type": "integer",
                        "minimum": 1
                    },
                    "status": {
                        "type": "string",
                        "enum": [
                            "active",
                            "paused"
                        ]
                    },
                    "status_reason": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "maxLength": 255
                    }
                },
                "title": "ProductCategoryUpdateRequest"
            },
            "ProductCollectionResource": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "store_id": {
                        "type": "integer"
                    },
                    "name": {
                        "type": "string"
                    },
                    "slug": {
                        "type": "string"
                    },
                    "status": {
                        "type": "string"
                    },
                    "status_reason": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "description": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "sort_order": {
                        "type": "integer"
                    },
                    "products": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/ProductResource"
                        }
                    }
                },
                "required": [
                    "id",
                    "store_id",
                    "name",
                    "slug",
                    "status",
                    "status_reason",
                    "description",
                    "sort_order"
                ],
                "title": "ProductCollectionResource"
            },
            "ProductCollectionStoreRequest": {
                "type": "object",
                "properties": {
                    "store_id": {
                        "type": "integer"
                    },
                    "name": {
                        "type": "string",
                        "maxLength": 120
                    },
                    "slug": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "maxLength": 120
                    },
                    "sort_order": {
                        "type": [
                            "integer",
                            "null"
                        ],
                        "minimum": 1
                    },
                    "status": {
                        "type": "string",
                        "enum": [
                            "active",
                            "paused"
                        ]
                    },
                    "status_reason": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "maxLength": 255
                    },
                    "description": {
                        "type": [
                            "string",
                            "null"
                        ]
                    }
                },
                "required": [
                    "store_id",
                    "name"
                ],
                "title": "ProductCollectionStoreRequest"
            },
            "ProductCollectionSyncRequest": {
                "type": "object",
                "properties": {
                    "product_ids": {
                        "type": "array",
                        "items": {
                            "type": "integer"
                        }
                    }
                },
                "required": [
                    "product_ids"
                ],
                "title": "ProductCollectionSyncRequest"
            },
            "ProductCollectionUpdateRequest": {
                "type": "object",
                "properties": {
                    "name": {
                        "type": "string",
                        "maxLength": 120
                    },
                    "slug": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "maxLength": 120
                    },
                    "sort_order": {
                        "type": "integer",
                        "minimum": 1
                    },
                    "status": {
                        "type": "string",
                        "enum": [
                            "active",
                            "paused"
                        ]
                    },
                    "status_reason": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "maxLength": 255
                    },
                    "description": {
                        "type": [
                            "string",
                            "null"
                        ]
                    }
                },
                "title": "ProductCollectionUpdateRequest"
            },
            "ProductRequest": {
                "type": "object",
                "properties": {
                    "store_id": {
                        "type": "integer"
                    },
                    "name": {
                        "type": "string",
                        "maxLength": 255
                    },
                    "description": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "price": {
                        "type": "number",
                        "minimum": 0
                    },
                    "stock": {
                        "type": "integer",
                        "minimum": 0
                    },
                    "image": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "binary",
                        "contentMediaType": "application/octet-stream",
                        "maxLength": 2048
                    },
                    "is_available": {
                        "type": "boolean",
                        "description": "Image validation"
                    }
                },
                "required": [
                    "store_id",
                    "name",
                    "price",
                    "stock"
                ],
                "title": "ProductRequest"
            },
            "ProductResource": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "store_id": {
                        "type": "integer"
                    },
                    "category": {
                        "type": "object",
                        "properties": {
                            "id": {
                                "type": "integer"
                            },
                            "name": {
                                "type": "string"
                            },
                            "slug": {
                                "type": "string"
                            }
                        },
                        "required": [
                            "id",
                            "name",
                            "slug"
                        ]
                    },
                    "collections": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/ProductCollectionResource"
                        }
                    },
                    "name": {
                        "type": "string"
                    },
                    "description": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "price": {
                        "type": "string"
                    },
                    "stock": {
                        "type": "integer"
                    },
                    "image": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "is_available": {
                        "type": "boolean"
                    },
                    "is_active": {
                        "type": "boolean"
                    },
                    "availability": {
                        "type": "object",
                        "properties": {
                            "status": {},
                            "status_source": {},
                            "reason": {},
                            "updated_at": {
                                "type": "string"
                            }
                        },
                        "required": [
                            "status",
                            "status_source",
                            "reason",
                            "updated_at"
                        ]
                    },
                    "created_at": {
                        "type": "string"
                    },
                    "updated_at": {
                        "type": "string"
                    }
                },
                "required": [
                    "id",
                    "store_id",
                    "name",
                    "description",
                    "price",
                    "stock",
                    "image",
                    "is_available",
                    "is_active",
                    "availability",
                    "created_at",
                    "updated_at"
                ],
                "title": "ProductResource"
            },
            "PromoApplyRequest": {
                "type": "object",
                "properties": {
                    "promo": {
                        "type": "array",
                        "description": "`promo` is required for preview/apply, but not for rollback calls.",
                        "items": {
                            "type": "string"
                        }
                    },
                    "idempotency_key": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "maxLength": 191
                    },
                    "dry_run": {
                        "type": [
                            "boolean",
                            "null"
                        ]
                    },
                    "guardrail_override": {
                        "type": "boolean"
                    },
                    "guardrail_override_reason": {
                        "type": "string",
                        "maxLength": 500
                    }
                },
                "title": "PromoApplyRequest"
            },
            "PromoAssignment": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "run_date": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "slot": {
                        "type": "string"
                    },
                    "user_id": {
                        "type": "integer"
                    },
                    "template_id": {
                        "type": "integer"
                    },
                    "segment_id": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "voucher_id": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "campaign_id": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "variant": {
                        "type": "string"
                    },
                    "is_control": {
                        "type": "boolean"
                    },
                    "assigned_at": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "expires_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "meta": {
                        "type": [
                            "array",
                            "null"
                        ],
                        "items": {}
                    },
                    "created_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "updated_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    }
                },
                "required": [
                    "id",
                    "run_date",
                    "slot",
                    "user_id",
                    "template_id",
                    "segment_id",
                    "voucher_id",
                    "campaign_id",
                    "variant",
                    "is_control",
                    "assigned_at",
                    "expires_at",
                    "meta",
                    "created_at",
                    "updated_at"
                ],
                "title": "PromoAssignment"
            },
            "PromoBrainRun": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "run_date": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "slot": {
                        "type": "string"
                    },
                    "status": {
                        "type": "string"
                    },
                    "started_at": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "finished_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "snapshot": {
                        "type": [
                            "array",
                            "null"
                        ],
                        "items": {}
                    },
                    "published": {
                        "type": [
                            "array",
                            "null"
                        ],
                        "items": {}
                    },
                    "meta": {
                        "type": [
                            "array",
                            "null"
                        ],
                        "items": {}
                    },
                    "created_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "updated_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    }
                },
                "required": [
                    "id",
                    "run_date",
                    "slot",
                    "status",
                    "started_at",
                    "finished_at",
                    "snapshot",
                    "published",
                    "meta",
                    "created_at",
                    "updated_at"
                ],
                "title": "PromoBrainRun"
            },
            "PromoCampaign": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "name": {
                        "type": "string"
                    },
                    "code": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "description": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "applies_to": {
                        "type": [
                            "array",
                            "null"
                        ],
                        "items": {}
                    },
                    "geo": {
                        "type": [
                            "array",
                            "null"
                        ],
                        "items": {}
                    },
                    "rules": {
                        "type": [
                            "array",
                            "null"
                        ],
                        "items": {}
                    },
                    "discount_type": {
                        "type": "string"
                    },
                    "discount_value": {
                        "type": "integer"
                    },
                    "max_discount_points": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "is_auto_apply": {
                        "type": "boolean"
                    },
                    "per_user_limit": {
                        "type": "integer"
                    },
                    "max_redemptions": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "starts_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "ends_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "status": {
                        "type": "string"
                    },
                    "created_by": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "updated_by": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "created_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "updated_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    }
                },
                "required": [
                    "id",
                    "name",
                    "code",
                    "description",
                    "applies_to",
                    "geo",
                    "rules",
                    "discount_type",
                    "discount_value",
                    "max_discount_points",
                    "is_auto_apply",
                    "per_user_limit",
                    "max_redemptions",
                    "starts_at",
                    "ends_at",
                    "status",
                    "created_by",
                    "updated_by",
                    "created_at",
                    "updated_at"
                ],
                "title": "PromoCampaign"
            },
            "PromoRedeemCodeRequest": {
                "type": "object",
                "properties": {
                    "code": {
                        "type": "string",
                        "minLength": 2,
                        "maxLength": 40
                    },
                    "idempotency_key": {
                        "type": "string",
                        "maxLength": 80
                    }
                },
                "required": [
                    "code",
                    "idempotency_key"
                ],
                "title": "PromoRedeemCodeRequest"
            },
            "PromoRunResource": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "idempotency_key": {
                        "type": "string"
                    },
                    "status": {
                        "type": "string"
                    },
                    "admin_id": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "applied_count": {
                        "type": "integer"
                    },
                    "sample_user_ids": {
                        "anyOf": [
                            {
                                "type": "array",
                                "items": {}
                            },
                            {
                                "type": "array",
                                "items": {
                                    "type": "string"
                                },
                                "minItems": 0,
                                "maxItems": 0,
                                "additionalItems": false
                            }
                        ]
                    },
                    "impact_metrics": {
                        "anyOf": [
                            {
                                "type": "array",
                                "items": {}
                            },
                            {
                                "type": "null"
                            },
                            {
                                "type": "array",
                                "items": {
                                    "type": "string"
                                },
                                "minItems": 0,
                                "maxItems": 0,
                                "additionalItems": false
                            }
                        ]
                    },
                    "guardrail_flags": {
                        "type": "array",
                        "items": {}
                    },
                    "anomaly_notes": {
                        "type": "array",
                        "items": {}
                    },
                    "dry_summary": {
                        "type": [
                            "array",
                            "null"
                        ],
                        "items": {}
                    },
                    "applied_changes_sample": {
                        "type": "array",
                        "items": {}
                    },
                    "rollback_ready": {
                        "type": "boolean"
                    },
                    "rolled_back": {
                        "type": "boolean"
                    },
                    "rolled_back_at": {
                        "type": "string"
                    },
                    "guardrail_acknowledged": {
                        "type": "object",
                        "properties": {
                            "at": {
                                "type": "string"
                            },
                            "by": {
                                "type": [
                                    "integer",
                                    "null"
                                ]
                            },
                            "reason": {
                                "type": [
                                    "string",
                                    "null"
                                ]
                            }
                        },
                        "required": [
                            "at",
                            "by",
                            "reason"
                        ]
                    },
                    "created_at": {
                        "type": "string"
                    },
                    "updated_at": {
                        "type": "string"
                    }
                },
                "required": [
                    "id",
                    "idempotency_key",
                    "status",
                    "admin_id",
                    "applied_count",
                    "sample_user_ids",
                    "impact_metrics",
                    "guardrail_flags",
                    "anomaly_notes",
                    "dry_summary",
                    "applied_changes_sample",
                    "rollback_ready",
                    "rolled_back",
                    "rolled_back_at",
                    "guardrail_acknowledged",
                    "created_at",
                    "updated_at"
                ],
                "title": "PromoRunResource"
            },
            "PublicStorefrontResource": {
                "type": "object",
                "properties": {
                    "store": {
                        "type": "object",
                        "properties": {
                            "id": {
                                "type": "integer"
                            },
                            "slug": {
                                "type": "string"
                            },
                            "name": {
                                "type": "string"
                            },
                            "description": {
                                "type": [
                                    "string",
                                    "null"
                                ]
                            },
                            "address": {
                                "type": "string"
                            },
                            "status": {
                                "type": "string"
                            },
                            "is_paused": {
                                "type": "boolean"
                            },
                            "pause_reason": {
                                "type": [
                                    "string",
                                    "null"
                                ]
                            },
                            "prep_time_minutes": {
                                "type": [
                                    "integer",
                                    "null"
                                ]
                            },
                            "order_cutoff_minutes": {
                                "type": [
                                    "integer",
                                    "null"
                                ]
                            },
                            "min_order_amount_cents": {
                                "type": [
                                    "integer",
                                    "null"
                                ]
                            },
                            "service_area": {
                                "type": "object",
                                "properties": {
                                    "geometry": {
                                        "type": [
                                            "array",
                                            "null"
                                        ],
                                        "items": {}
                                    },
                                    "geojson": {
                                        "type": [
                                            "array",
                                            "null"
                                        ],
                                        "items": {}
                                    }
                                },
                                "required": [
                                    "geometry",
                                    "geojson"
                                ]
                            },
                            "hours": {
                                "type": "object",
                                "properties": {
                                    "open": {
                                        "type": [
                                            "string",
                                            "null"
                                        ]
                                    },
                                    "close": {
                                        "type": [
                                            "string",
                                            "null"
                                        ]
                                    }
                                },
                                "required": [
                                    "open",
                                    "close"
                                ]
                            },
                            "updated_at": {
                                "type": "string"
                            }
                        },
                        "required": [
                            "id",
                            "slug",
                            "name",
                            "description",
                            "address",
                            "status",
                            "is_paused",
                            "pause_reason",
                            "prep_time_minutes",
                            "order_cutoff_minutes",
                            "min_order_amount_cents",
                            "service_area",
                            "hours",
                            "updated_at"
                        ]
                    },
                    "catalog": {
                        "type": "object",
                        "properties": {
                            "categories": {
                                "type": "array",
                                "items": {
                                    "type": "object",
                                    "properties": {
                                        "id": {
                                            "type": "integer"
                                        },
                                        "name": {
                                            "type": "string"
                                        },
                                        "slug": {
                                            "type": "string"
                                        },
                                        "sort_order": {
                                            "type": "integer"
                                        },
                                        "products": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "id",
                                        "name",
                                        "slug",
                                        "sort_order",
                                        "products"
                                    ]
                                }
                            }
                        },
                        "required": [
                            "categories"
                        ]
                    }
                },
                "required": [
                    "store",
                    "catalog"
                ],
                "title": "PublicStorefrontResource"
            },
            "RegisterRequest": {
                "type": "object",
                "properties": {
                    "name": {
                        "type": "string",
                        "maxLength": 255
                    },
                    "ref_code": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "maxLength": 32
                    },
                    "username": {
                        "type": "string"
                    },
                    "email": {
                        "type": "string"
                    },
                    "password": {
                        "type": "string",
                        "minLength": 5
                    },
                    "mobile": {
                        "type": "string",
                        "pattern": "^\\+639\\d{9}$",
                        "maxLength": 20
                    },
                    "password_confirmation": {
                        "type": "string",
                        "minLength": 5
                    }
                },
                "required": [
                    "name",
                    "username",
                    "email",
                    "password",
                    "mobile",
                    "password_confirmation"
                ],
                "title": "RegisterRequest"
            },
            "Store": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "owner_id": {
                        "type": "integer"
                    },
                    "partner_user_id": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "name": {
                        "type": "string"
                    },
                    "description": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "store_type": {
                        "type": "string"
                    },
                    "address": {
                        "type": "string"
                    },
                    "latitude": {
                        "type": [
                            "number",
                            "null"
                        ]
                    },
                    "longitude": {
                        "type": [
                            "number",
                            "null"
                        ]
                    },
                    "pickup_place_id": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "service_zone_id": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "status": {
                        "type": "string"
                    },
                    "is_paused": {
                        "type": "integer"
                    },
                    "pause_started_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "pause_expires_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "pause_actor_id": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "pause_reason": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "pause_notes": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "approval_status": {
                        "type": "string"
                    },
                    "open_time": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "close_time": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "product_limit_base": {
                        "type": "integer"
                    },
                    "product_limit_extra": {
                        "type": "integer"
                    },
                    "subscription_ends_at": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "default_prep_time_min": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "prep_time_minutes": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "order_cutoff_minutes": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "min_order_amount_points": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "service_area_geometry": {
                        "type": [
                            "array",
                            "null"
                        ],
                        "items": {}
                    },
                    "service_area_geojson": {
                        "type": [
                            "array",
                            "null"
                        ],
                        "items": {}
                    },
                    "created_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "updated_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "public_storefront_slug": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "is_public_storefront_enabled": {
                        "type": "boolean"
                    },
                    "fulfillment_modes": {
                        "type": "string"
                    },
                    "pickup": {
                        "type": "string"
                    },
                    "business_name": {
                        "type": "string"
                    },
                    "availability": {
                        "type": "string"
                    }
                },
                "required": [
                    "id",
                    "owner_id",
                    "partner_user_id",
                    "name",
                    "description",
                    "store_type",
                    "address",
                    "latitude",
                    "longitude",
                    "pickup_place_id",
                    "service_zone_id",
                    "status",
                    "is_paused",
                    "pause_started_at",
                    "pause_expires_at",
                    "pause_actor_id",
                    "pause_reason",
                    "pause_notes",
                    "approval_status",
                    "open_time",
                    "close_time",
                    "product_limit_base",
                    "product_limit_extra",
                    "subscription_ends_at",
                    "default_prep_time_min",
                    "prep_time_minutes",
                    "order_cutoff_minutes",
                    "min_order_amount_points",
                    "service_area_geometry",
                    "service_area_geojson",
                    "created_at",
                    "updated_at",
                    "public_storefront_slug",
                    "is_public_storefront_enabled",
                    "fulfillment_modes",
                    "pickup",
                    "business_name",
                    "availability"
                ],
                "title": "Store"
            },
            "StoreCloseRequest": {
                "type": "object",
                "properties": {
                    "reason": {
                        "type": "string",
                        "maxLength": 120
                    },
                    "notes": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "maxLength": 2000
                    }
                },
                "required": [
                    "reason"
                ],
                "title": "StoreCloseRequest"
            },
            "StoreConstraintsRequest": {
                "type": "object",
                "properties": {
                    "min_order_amount_points": {
                        "type": [
                            "integer",
                            "null"
                        ],
                        "minimum": 0,
                        "maximum": 10000000
                    },
                    "service_area": {
                        "type": "object",
                        "properties": {
                            "type": {
                                "type": "string",
                                "enum": [
                                    "radius",
                                    "polygon"
                                ]
                            },
                            "radius_m": {
                                "type": "integer",
                                "minimum": 100,
                                "maximum": 20000
                            },
                            "center": {
                                "type": "object",
                                "properties": {
                                    "latitude": {
                                        "type": "number",
                                        "minimum": -90,
                                        "maximum": 90
                                    },
                                    "longitude": {
                                        "type": "number",
                                        "minimum": -180,
                                        "maximum": 180
                                    }
                                }
                            },
                            "points": {
                                "type": "array",
                                "items": {
                                    "type": "object",
                                    "properties": {
                                        "latitude": {
                                            "type": "number",
                                            "minimum": -90,
                                            "maximum": 90
                                        },
                                        "longitude": {
                                            "type": "number",
                                            "minimum": -180,
                                            "maximum": 180
                                        }
                                    }
                                },
                                "minItems": 3,
                                "maxItems": 20
                            }
                        }
                    }
                },
                "title": "StoreConstraintsRequest"
            },
            "StoreDefaultPrepTimeRequest": {
                "type": "object",
                "properties": {
                    "default_prep_time_min": {
                        "type": "integer",
                        "minimum": 1,
                        "maximum": 240
                    }
                },
                "required": [
                    "default_prep_time_min"
                ],
                "title": "StoreDefaultPrepTimeRequest"
            },
            "StoreMerchantOrderRequest": {
                "type": "object",
                "properties": {
                    "dropoff_name": {
                        "type": "string",
                        "minLength": 2,
                        "maxLength": 120
                    },
                    "dropoff_phone": {
                        "type": "string",
                        "minLength": 7,
                        "maxLength": 30
                    },
                    "dropoff_address": {
                        "type": "string",
                        "minLength": 5,
                        "maxLength": 255
                    },
                    "dropoff_lat": {
                        "type": "number",
                        "minimum": -90,
                        "maximum": 90
                    },
                    "dropoff_lng": {
                        "type": "number",
                        "minimum": -180,
                        "maximum": 180
                    },
                    "package_type": {
                        "type": "string",
                        "maxLength": 40
                    },
                    "notes": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "description": "e.g. food|parcel|grocery",
                        "maxLength": 500
                    },
                    "items_total_points": {
                        "type": [
                            "integer",
                            "null"
                        ],
                        "minimum": 0,
                        "maximum": 10000000
                    }
                },
                "required": [
                    "dropoff_name",
                    "dropoff_phone",
                    "dropoff_address",
                    "dropoff_lat",
                    "dropoff_lng",
                    "package_type"
                ],
                "title": "StoreMerchantOrderRequest"
            },
            "StoreOpenRequest": {
                "type": "object",
                "properties": {
                    "reason": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "maxLength": 120
                    },
                    "notes": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "maxLength": 2000
                    }
                },
                "title": "StoreOpenRequest"
            },
            "StorePauseRequest": {
                "type": "object",
                "properties": {
                    "reason": {
                        "type": "string",
                        "maxLength": 120
                    },
                    "notes": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "maxLength": 2000
                    },
                    "resume_after_minutes": {
                        "type": [
                            "integer",
                            "null"
                        ],
                        "minimum": 5,
                        "maximum": 1440
                    },
                    "resume_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    }
                },
                "required": [
                    "reason"
                ],
                "title": "StorePauseRequest"
            },
            "StoreRequest": {
                "type": "object",
                "properties": {
                    "name": {
                        "type": "string",
                        "maxLength": 255
                    },
                    "description": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "store_type": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "enum": [
                            "general",
                            "pharmacy",
                            "paper"
                        ]
                    },
                    "address": {
                        "type": "string"
                    },
                    "latitude": {
                        "type": [
                            "number",
                            "null"
                        ],
                        "minimum": -90,
                        "maximum": 90
                    },
                    "longitude": {
                        "type": [
                            "number",
                            "null"
                        ],
                        "minimum": -180,
                        "maximum": 180
                    },
                    "status": {
                        "type": "string",
                        "enum": [
                            "open",
                            "closed",
                            "under_maintenance"
                        ]
                    },
                    "open_time": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "close_time": {
                        "type": [
                            "string",
                            "null"
                        ]
                    }
                },
                "required": [
                    "name",
                    "address",
                    "status"
                ],
                "title": "StoreRequest"
            },
            "StoreResource": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "owner_id": {
                        "type": "integer"
                    },
                    "name": {
                        "type": "string"
                    },
                    "status": {
                        "type": "string"
                    },
                    "approval_status": {
                        "type": "string"
                    },
                    "default_prep_time_min": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "prep_time_minutes": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "order_cutoff_minutes": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "is_paused": {
                        "type": "boolean"
                    },
                    "pause_reason": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "pause_notes": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "pause_started_at": {
                        "type": "string"
                    },
                    "pause_expires_at": {
                        "type": "string"
                    },
                    "availability": {
                        "type": "string"
                    },
                    "address": {
                        "type": "string"
                    },
                    "latitude": {
                        "type": [
                            "number",
                            "null"
                        ]
                    },
                    "longitude": {
                        "type": [
                            "number",
                            "null"
                        ]
                    },
                    "open_time": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "close_time": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "min_order_amount_points": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "service_area": {
                        "type": [
                            "array",
                            "null"
                        ],
                        "items": {}
                    },
                    "service_area_geojson": {
                        "type": [
                            "array",
                            "null"
                        ],
                        "items": {}
                    },
                    "updated_at": {
                        "type": "string"
                    }
                },
                "required": [
                    "id",
                    "owner_id",
                    "name",
                    "status",
                    "approval_status",
                    "default_prep_time_min",
                    "prep_time_minutes",
                    "order_cutoff_minutes",
                    "is_paused",
                    "pause_reason",
                    "pause_notes",
                    "pause_started_at",
                    "pause_expires_at",
                    "address",
                    "latitude",
                    "longitude",
                    "open_time",
                    "close_time",
                    "min_order_amount_points",
                    "service_area",
                    "service_area_geojson",
                    "updated_at"
                ],
                "title": "StoreResource"
            },
            "StoreResumeRequest": {
                "type": "object",
                "properties": {
                    "reason": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "maxLength": 120
                    }
                },
                "title": "StoreResumeRequest"
            },
            "StoreRulesRequest": {
                "type": "object",
                "properties": {
                    "prep_time_minutes": {
                        "type": "integer",
                        "minimum": 1,
                        "maximum": 240
                    },
                    "order_cutoff_minutes": {
                        "type": [
                            "integer",
                            "null"
                        ],
                        "minimum": 0,
                        "maximum": 240
                    },
                    "min_order_amount_points": {
                        "type": [
                            "integer",
                            "null"
                        ],
                        "minimum": 0,
                        "maximum": 10000000
                    },
                    "service_area_geojson": {
                        "type": [
                            "string",
                            "null"
                        ]
                    }
                },
                "required": [
                    "prep_time_minutes"
                ],
                "title": "StoreRulesRequest"
            },
            "StoreRulesResource": {
                "type": "object",
                "properties": {
                    "store_id": {
                        "type": "integer"
                    },
                    "prep_time_minutes": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "order_cutoff_minutes": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "min_order_amount_points": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "service_area_geojson": {
                        "type": "string"
                    },
                    "service_area_legacy": {
                        "type": "string"
                    },
                    "meta": {
                        "type": "object",
                        "properties": {
                            "currency": {
                                "type": "string",
                                "enum": [
                                    "points"
                                ]
                            },
                            "updated_at": {
                                "type": "string"
                            },
                            "limits": {
                                "type": "object",
                                "properties": {
                                    "prep_time_minutes": {
                                        "type": "object",
                                        "properties": {
                                            "min": {
                                                "type": "integer",
                                                "enum": [
                                                    1
                                                ]
                                            },
                                            "max": {
                                                "type": "integer",
                                                "enum": [
                                                    240
                                                ]
                                            }
                                        },
                                        "required": [
                                            "min",
                                            "max"
                                        ]
                                    },
                                    "order_cutoff_minutes": {
                                        "type": "object",
                                        "properties": {
                                            "min": {
                                                "type": "integer",
                                                "enum": [
                                                    0
                                                ]
                                            },
                                            "max": {
                                                "type": "integer",
                                                "enum": [
                                                    240
                                                ]
                                            }
                                        },
                                        "required": [
                                            "min",
                                            "max"
                                        ]
                                    },
                                    "min_order_amount_points": {
                                        "type": "object",
                                        "properties": {
                                            "min": {
                                                "type": "integer",
                                                "enum": [
                                                    0
                                                ]
                                            }
                                        },
                                        "required": [
                                            "min"
                                        ]
                                    }
                                },
                                "required": [
                                    "prep_time_minutes",
                                    "order_cutoff_minutes",
                                    "min_order_amount_points"
                                ]
                            }
                        },
                        "required": [
                            "currency",
                            "updated_at",
                            "limits"
                        ]
                    }
                },
                "required": [
                    "store_id",
                    "prep_time_minutes",
                    "order_cutoff_minutes",
                    "min_order_amount_points",
                    "service_area_geojson",
                    "meta"
                ],
                "title": "StoreRulesResource"
            },
            "StoreScheduleOverrideRequest": {
                "type": "object",
                "properties": {
                    "overrides": {
                        "type": "array",
                        "items": {
                            "type": "object",
                            "properties": {
                                "date": {
                                    "type": "string",
                                    "format": "date"
                                },
                                "status": {
                                    "type": "string",
                                    "enum": [
                                        "open",
                                        "closed",
                                        "paused"
                                    ]
                                },
                                "open_time": {
                                    "type": [
                                        "string",
                                        "null"
                                    ]
                                },
                                "close_time": {
                                    "type": [
                                        "string",
                                        "null"
                                    ]
                                },
                                "reason": {
                                    "type": [
                                        "string",
                                        "null"
                                    ],
                                    "maxLength": 120
                                },
                                "notes": {
                                    "type": [
                                        "string",
                                        "null"
                                    ],
                                    "maxLength": 1000
                                }
                            },
                            "required": [
                                "date",
                                "status"
                            ]
                        },
                        "minItems": 1,
                        "maxItems": 31
                    }
                },
                "required": [
                    "overrides"
                ],
                "title": "StoreScheduleOverrideRequest"
            },
            "StoreScheduleOverrideResource": {
                "type": "object",
                "properties": {
                    "store_id": {
                        "type": "integer"
                    },
                    "date": {
                        "type": "string"
                    },
                    "status": {
                        "type": "string"
                    },
                    "open_time": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "close_time": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "reason": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "notes": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "source": {
                        "type": "array",
                        "items": {}
                    },
                    "updated_at": {
                        "type": "string"
                    }
                },
                "required": [
                    "store_id",
                    "date",
                    "status",
                    "open_time",
                    "close_time",
                    "reason",
                    "notes",
                    "source",
                    "updated_at"
                ],
                "title": "StoreScheduleOverrideResource"
            },
            "StuckOrderResource": {
                "type": "object",
                "properties": {
                    "order_id": {
                        "type": "integer"
                    },
                    "reference_no": {
                        "type": "string"
                    },
                    "status": {
                        "type": "string"
                    },
                    "dispatch_status": {
                        "type": "string"
                    },
                    "reason_code": {
                        "type": "string"
                    },
                    "reason": {
                        "type": "string"
                    },
                    "recommended_action": {
                        "type": "string"
                    },
                    "last_event_at": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "age_minutes": {
                        "type": "string"
                    },
                    "customer": {
                        "type": "object",
                        "properties": {
                            "id": {
                                "type": "integer"
                            },
                            "name": {
                                "type": "string"
                            },
                            "mobile": {
                                "type": "string"
                            }
                        },
                        "required": [
                            "id",
                            "name",
                            "mobile"
                        ]
                    },
                    "driver": {
                        "type": "object",
                        "properties": {
                            "id": {
                                "type": "integer"
                            },
                            "name": {
                                "type": "string"
                            },
                            "mobile": {
                                "type": "string"
                            }
                        },
                        "required": [
                            "id",
                            "name",
                            "mobile"
                        ]
                    },
                    "store": {
                        "type": "object",
                        "properties": {
                            "id": {
                                "type": "integer"
                            },
                            "name": {
                                "type": "string"
                            }
                        },
                        "required": [
                            "id",
                            "name"
                        ]
                    },
                    "meta": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "array",
                                "items": {
                                    "type": "string"
                                },
                                "minItems": 0,
                                "maxItems": 0,
                                "additionalItems": false
                            }
                        ]
                    }
                },
                "required": [
                    "order_id",
                    "reference_no",
                    "status",
                    "dispatch_status",
                    "reason_code",
                    "reason",
                    "recommended_action",
                    "last_event_at",
                    "age_minutes",
                    "meta"
                ],
                "title": "StuckOrderResource"
            },
            "SupportAiAssistRequest": {
                "type": "object",
                "properties": {
                    "message": {
                        "type": "string"
                    },
                    "customer_id": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "order_id": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "create_ticket": {
                        "type": [
                            "boolean",
                            "null"
                        ]
                    },
                    "subject": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "maxLength": 190
                    },
                    "priority": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "enum": [
                            "low",
                            "normal",
                            "high",
                            "urgent"
                        ]
                    }
                },
                "required": [
                    "message"
                ],
                "title": "SupportAiAssistRequest"
            },
            "SupportKbArticle": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "title": {
                        "type": "string"
                    },
                    "slug": {
                        "type": "string"
                    },
                    "content": {
                        "type": "string"
                    },
                    "tags": {
                        "type": [
                            "array",
                            "null"
                        ],
                        "items": {}
                    },
                    "is_published": {
                        "type": "boolean"
                    },
                    "created_by": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "updated_by": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "created_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "updated_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    }
                },
                "required": [
                    "id",
                    "title",
                    "slug",
                    "content",
                    "tags",
                    "is_published",
                    "created_by",
                    "updated_by",
                    "created_at",
                    "updated_at"
                ],
                "title": "SupportKbArticle"
            },
            "SupportKbUpsertRequest": {
                "type": "object",
                "properties": {
                    "title": {
                        "type": "string",
                        "maxLength": 190
                    },
                    "slug": {
                        "type": "string",
                        "maxLength": 190
                    },
                    "content": {
                        "type": "string"
                    },
                    "is_published": {
                        "type": [
                            "boolean",
                            "null"
                        ]
                    },
                    "tags": {
                        "type": [
                            "array",
                            "null"
                        ],
                        "items": {
                            "type": "string",
                            "maxLength": 50
                        }
                    }
                },
                "required": [
                    "title",
                    "slug",
                    "content"
                ],
                "title": "SupportKbUpsertRequest"
            },
            "SupportRefundRequest": {
                "type": "object",
                "properties": {
                    "amount_points": {
                        "type": [
                            "integer",
                            "null"
                        ],
                        "minimum": 1,
                        "maximum": 100000000
                    },
                    "reason": {
                        "type": "string",
                        "maxLength": 200
                    },
                    "notes": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "maxLength": 2000
                    },
                    "idempotency_key": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "maxLength": 120
                    }
                },
                "required": [
                    "reason"
                ],
                "title": "SupportRefundRequest"
            },
            "SupportResolveDisputeRequest": {
                "type": "object",
                "properties": {
                    "outcome": {
                        "type": "string",
                        "enum": [
                            "refund",
                            "penalty_driver",
                            "penalty_merchant",
                            "mark_fraudulent",
                            "reject"
                        ]
                    },
                    "note": {
                        "type": "string",
                        "maxLength": 2000
                    },
                    "refund_points": {
                        "type": "integer",
                        "description": "Optional financial actions (points-based)",
                        "minimum": 1,
                        "maximum": 500000
                    },
                    "penalty_driver_points": {
                        "type": "integer",
                        "minimum": 1,
                        "maximum": 500000
                    },
                    "penalty_merchant_points": {
                        "type": "integer",
                        "minimum": 1,
                        "maximum": 500000
                    },
                    "meta": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    }
                },
                "required": [
                    "outcome"
                ],
                "title": "SupportResolveDisputeRequest"
            },
            "SupportTicket": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "customer_id": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "order_id": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "created_by": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "subject": {
                        "type": "string"
                    },
                    "status": {
                        "type": "string"
                    },
                    "priority": {
                        "type": "string"
                    },
                    "channel": {
                        "type": "string"
                    },
                    "last_activity_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "meta": {
                        "type": [
                            "array",
                            "null"
                        ],
                        "items": {}
                    },
                    "created_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "updated_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    }
                },
                "required": [
                    "id",
                    "customer_id",
                    "order_id",
                    "created_by",
                    "subject",
                    "status",
                    "priority",
                    "channel",
                    "last_activity_at",
                    "meta",
                    "created_at",
                    "updated_at"
                ],
                "title": "SupportTicket"
            },
            "SupportTicketCreateRequest": {
                "type": "object",
                "properties": {
                    "customer_id": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "order_id": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "subject": {
                        "type": "string",
                        "maxLength": 190
                    },
                    "priority": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "enum": [
                            "low",
                            "normal",
                            "high",
                            "urgent"
                        ]
                    },
                    "message": {
                        "type": "string"
                    }
                },
                "required": [
                    "subject",
                    "message"
                ],
                "title": "SupportTicketCreateRequest"
            },
            "SupportTicketMessage": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "ticket_id": {
                        "type": "integer"
                    },
                    "author_id": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "author_role": {
                        "type": "string"
                    },
                    "message": {
                        "type": "string"
                    },
                    "meta": {
                        "type": [
                            "array",
                            "null"
                        ],
                        "items": {}
                    },
                    "created_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "updated_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    }
                },
                "required": [
                    "id",
                    "ticket_id",
                    "author_id",
                    "author_role",
                    "message",
                    "meta",
                    "created_at",
                    "updated_at"
                ],
                "title": "SupportTicketMessage"
            },
            "SupportTicketMessageRequest": {
                "type": "object",
                "properties": {
                    "message": {
                        "type": "string"
                    }
                },
                "required": [
                    "message"
                ],
                "title": "SupportTicketMessageRequest"
            },
            "SystemComplianceSummaryRequest": {
                "type": "object",
                "properties": {
                    "type": {
                        "type": "string",
                        "enum": [
                            "incident_report",
                            "chat_transcript",
                            "driver_issue",
                            "order_dispute",
                            "custom"
                        ]
                    },
                    "source_type": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "maxLength": 50
                    },
                    "source_id": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "meta": {
                        "type": [
                            "array",
                            "null"
                        ],
                        "items": {
                            "type": "string"
                        }
                    }
                },
                "required": [
                    "type"
                ],
                "title": "SystemComplianceSummaryRequest"
            },
            "SystemHealthResource": {
                "type": "object",
                "properties": {
                    "ok": {
                        "type": "boolean"
                    },
                    "timestamp": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "services": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "array",
                                "items": {
                                    "type": "string"
                                },
                                "minItems": 0,
                                "maxItems": 0,
                                "additionalItems": false
                            }
                        ]
                    }
                },
                "required": [
                    "ok",
                    "timestamp",
                    "services"
                ],
                "title": "SystemHealthResource"
            },
            "UpdatePrepStatusRequest": {
                "type": "object",
                "properties": {
                    "prep_status": {
                        "type": "string",
                        "description": "merchant-side states only (NOT driver delivery states)",
                        "enum": [
                            "preparing",
                            "ready_for_pickup"
                        ]
                    }
                },
                "required": [
                    "prep_status"
                ],
                "title": "UpdatePrepStatusRequest"
            },
            "User": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "role_id": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "company_id": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "partner_user_id": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "latitude": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "longitude": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "location_updated_at": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "last_seen_at": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "branch_id": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "name": {
                        "type": "string"
                    },
                    "fcm_token": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "expo_push_token": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "email": {
                        "type": "string"
                    },
                    "mobile": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "mobile_verified_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "username": {
                        "type": "string"
                    },
                    "ref_code": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "email_verified_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "status": {
                        "type": "string"
                    },
                    "status_changed_at": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "created_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "updated_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "referred_by_user_id": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "role_name": {
                        "type": "string"
                    }
                },
                "required": [
                    "id",
                    "role_id",
                    "company_id",
                    "partner_user_id",
                    "latitude",
                    "longitude",
                    "location_updated_at",
                    "last_seen_at",
                    "branch_id",
                    "name",
                    "fcm_token",
                    "expo_push_token",
                    "email",
                    "mobile",
                    "mobile_verified_at",
                    "username",
                    "ref_code",
                    "email_verified_at",
                    "status",
                    "status_changed_at",
                    "created_at",
                    "updated_at",
                    "referred_by_user_id",
                    "role_name"
                ],
                "title": "User"
            },
            "Vehicle": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "make": {
                        "type": "string"
                    },
                    "model": {
                        "type": "string"
                    },
                    "license_plate": {
                        "type": "string"
                    },
                    "driver_id": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "vehicle_type_id": {
                        "type": "integer"
                    },
                    "passenger_count": {
                        "type": "integer"
                    },
                    "created_by": {
                        "type": "integer"
                    },
                    "updated_by": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "created_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "updated_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    }
                },
                "required": [
                    "id",
                    "make",
                    "model",
                    "license_plate",
                    "driver_id",
                    "vehicle_type_id",
                    "passenger_count",
                    "created_by",
                    "updated_by",
                    "created_at",
                    "updated_at"
                ],
                "title": "Vehicle"
            },
            "VehicleRequest": {
                "type": "object",
                "properties": {
                    "make": {
                        "type": "string",
                        "maxLength": 255
                    },
                    "model": {
                        "type": "string",
                        "maxLength": 255
                    },
                    "license_plate": {
                        "type": "string"
                    },
                    "driver_id": {
                        "type": "string"
                    },
                    "vehicle_type_id": {
                        "type": "integer"
                    },
                    "passenger_count": {
                        "type": "integer",
                        "minimum": 1
                    },
                    "updated_by": {
                        "type": "integer"
                    },
                    "created_by": {
                        "type": "string",
                        "description": "DO NOT accept these from app:"
                    }
                },
                "required": [
                    "updated_by"
                ],
                "title": "VehicleRequest"
            },
            "VehicleType": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "name": {
                        "type": "string"
                    },
                    "max_passengers": {
                        "type": "integer"
                    },
                    "base_fare": {
                        "type": "string"
                    },
                    "per_km_rate": {
                        "type": "string"
                    },
                    "included_km": {
                        "type": "string"
                    },
                    "tier1_km_cap": {
                        "type": "string"
                    },
                    "tier1_per_km_rate": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "tier2_per_km_rate": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "speed_economy_mult": {
                        "type": "string"
                    },
                    "speed_standard_mult": {
                        "type": "string"
                    },
                    "speed_express_mult": {
                        "type": "string"
                    },
                    "surcharge": {
                        "type": "string"
                    },
                    "wait_rate_per_min": {
                        "type": "string"
                    },
                    "transaction_fee": {
                        "type": "string"
                    },
                    "transaction_per_km_fee": {
                        "type": "string"
                    },
                    "created_by": {
                        "type": "integer"
                    },
                    "updated_by": {
                        "type": [
                            "integer",
                            "null"
                        ]
                    },
                    "created_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    },
                    "updated_at": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time"
                    }
                },
                "required": [
                    "id",
                    "name",
                    "max_passengers",
                    "base_fare",
                    "per_km_rate",
                    "included_km",
                    "tier1_km_cap",
                    "tier1_per_km_rate",
                    "tier2_per_km_rate",
                    "speed_economy_mult",
                    "speed_standard_mult",
                    "speed_express_mult",
                    "surcharge",
                    "wait_rate_per_min",
                    "transaction_fee",
                    "transaction_per_km_fee",
                    "created_by",
                    "updated_by",
                    "created_at",
                    "updated_at"
                ],
                "title": "VehicleType"
            },
            "VehicleTypeRequest": {
                "type": "object",
                "properties": {
                    "name": {
                        "type": "string",
                        "maxLength": 255
                    },
                    "base_fare": {
                        "type": "number",
                        "minimum": 0
                    },
                    "per_km_rate": {
                        "type": "number",
                        "minimum": 0
                    },
                    "surcharge": {
                        "type": "number",
                        "minimum": 0
                    },
                    "transaction_fee": {
                        "type": "number",
                        "minimum": 0
                    },
                    "transaction_per_km_fee": {
                        "type": "number",
                        "minimum": 0
                    }
                },
                "required": [
                    "name",
                    "base_fare",
                    "per_km_rate",
                    "surcharge",
                    "transaction_fee",
                    "transaction_per_km_fee"
                ],
                "title": "VehicleTypeRequest"
            }
        },
        "responses": {
            "ValidationException": {
                "description": "Validation error",
                "content": {
                    "application/json": {
                        "schema": {
                            "type": "object",
                            "properties": {
                                "message": {
                                    "type": "string",
                                    "description": "Errors overview."
                                },
                                "errors": {
                                    "type": "object",
                                    "description": "A detailed description of each field that failed validation.",
                                    "additionalProperties": {
                                        "type": "array",
                                        "items": {
                                            "type": "string"
                                        }
                                    }
                                }
                            },
                            "required": [
                                "message",
                                "errors"
                            ]
                        }
                    }
                }
            },
            "ModelNotFoundException": {
                "description": "Not found",
                "content": {
                    "application/json": {
                        "schema": {
                            "type": "object",
                            "properties": {
                                "message": {
                                    "type": "string",
                                    "description": "Error overview."
                                }
                            },
                            "required": [
                                "message"
                            ]
                        }
                    }
                }
            },
            "AuthenticationException": {
                "description": "Unauthenticated",
                "content": {
                    "application/json": {
                        "schema": {
                            "type": "object",
                            "properties": {
                                "message": {
                                    "type": "string",
                                    "description": "Error overview."
                                }
                            },
                            "required": [
                                "message"
                            ]
                        }
                    }
                }
            },
            "AuthorizationException": {
                "description": "Authorization error",
                "content": {
                    "application/json": {
                        "schema": {
                            "type": "object",
                            "properties": {
                                "message": {
                                    "type": "string",
                                    "description": "Error overview."
                                }
                            },
                            "required": [
                                "message"
                            ]
                        }
                    }
                }
            }
        }
    }
}